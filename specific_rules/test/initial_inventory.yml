-
  In order to test the initial inventory document, I'll create a new initial inventory and confirm it
-
  Creating a new initial inventory
-
  !record {model: initial.stock.inventory, id: init1}:
    name: test initial inventory
    inventory_line_id:
      - product_id: product_nomenclature_test3
        average_cost: 50.00
        location_id: stock.stock_location_stock
        product_qty: 250.00
-
  Confirm the inventory
-
  !python {model: initial.stock.inventory}: |
    self.action_confirm(cr, uid, ref('init1'))
    self.action_done(cr, uid, ref('init1'))
-
  Check if the standard price of the product is ok
-
  !assert {model:product.product, id:product_nomenclature_test3}:
    - standard_price == 50.00, "The standard price of the product hasn't been updated"
-
  Check if the product qty in the Stock location is ok
-
  !python {model: product.product}: |
    context = {'location_id': ref('stock.stock_location_stock'), 'compute_child': False}
    product = self.browse(cr, uid, ref('product_nomenclature_test3'), context=context)
    assert product.qty_available == 250.00, "The quantity of product in Stock hasn't been updated"
