<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>

		<record id="product_normal_form_view" model="ir.ui.view">
            <field name="name">product.normal.form</field>
            <field name="model">product.product</field>
            <field name="type">form</field>
            <field eval="300" name="priority"/>
            <field name="inherit_id" ref="product_expiry.view_product_form_expiry" />
            <field name="arch" type="xml">
            	<data>
            
	            <field name="life_time" position="replace">
	            	<field name="life_time" attrs="{'required':[('short_shelf_life', '=', True),],}" />
	            </field>
            
            </data>
            </field>
        </record>
            
		<record id="view_order_form" model="ir.ui.view">
			<field name="name">sale.order.form</field>
			<field name="model">sale.order</field>
			<field name="type">form</field>
			<field name="priority" eval="250" />
			<field name="inherit_id" ref="sale.view_order_form" />
			<field name="arch" type="xml">
				<data>
				
					<xpath expr="//form[@string='Sales Order']//tree[@string='Sales Order Lines']/field[@name='product_uom']" position="after">
						<field name="kc_dg" />
					</xpath>
            	
            	</data>
            </field>
        </record>
        
        <record id="purchase_order_form" model="ir.ui.view">
			<field name="name">purchase.order.form</field>
			<field name="model">purchase.order</field>
			<field name="type">form</field>
			<field name="inherit_id" ref="purchase.purchase_order_form" />
			<field name="arch" type="xml">
				<data>
				
					<xpath expr="//form[@string='Purchase Order']//tree[@string='Purchase Order Lines']/field[@name='product_uom']" position="after">
						<field name="kc_dg" />
					</xpath>
            	
            	</data>
            </field>
        </record>
        
        <record id="view_picking_form" model="ir.ui.view">
            <field name="name">stock.picking.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="stock.view_picking_form" />
            <field eval="12" name="priority"/>
            <field name="arch" type="xml">
            	<data>
					
					<xpath expr="//form[@string='Stock Moves']//field[@name='prodlot_id']" position="replace">
                        <field name="prodlot_id" groups="base.group_extended"
	                    	context="{'location_id':location_id, 'product_id':product_id, 'expiry_date_check': expiry_date_check, 'batch_number_check': batch_number_check,}"
	                    	domain="[('product_id','=?',product_id), ('check_type','=', True),]"
	                    	on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id, product_uom)" colspan="3"
	                    	attrs="{'readonly': [('hidden_prod_mandatory','=',False)],}" />
	                    <field name="hidden_prod_mandatory" invisible="True" />
						<field name="expired_date" />
	           			<field name="kc_check" />
            			<field name="ssl_check" />
            			<field name="dg_check" />
            			<field name="np_check" />
					</xpath>
					
					<xpath expr="//tree[@string='Stock Moves']//field[@name='state']" position="after">
					
	           			<field name="kc_check" />
            			<field name="ssl_check" />
            			<field name="dg_check" />
            			<field name="np_check" />
					
					</xpath>
            	
            	</data>
            </field>
		</record>
		
		<record id="view_picking_out_form" model="ir.ui.view">
            <field name="name">stock.picking.out.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="stock.view_picking_out_form" />
            <field name="arch" type="xml">
            	<data>
            	
					<xpath expr="//form[@string='Stock Moves']//field[@name='prodlot_id']" position="replace">
                        <field name="prodlot_id" groups="base.group_extended"
	                    	context="{'location_id':location_id, 'product_id':product_id, 'expiry_date_check': expiry_date_check, 'batch_number_check': batch_number_check,}"
	                    	domain="[('product_id','=?',product_id), ('check_type','=', True),]"
	                    	on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id, product_uom)" colspan="3"
	                    	attrs="{'readonly': [('hidden_prod_mandatory','=',False)],}" />
	                    <field name="hidden_prod_mandatory" invisible="True" />
						<field name="expired_date" />
						<field name="kc_check" />
            			<field name="ssl_check" />
            			<field name="dg_check" />
            			<field name="np_check" />
					</xpath>
					
					<xpath expr="//tree[@string='Stock Moves']//field[@name='state']" position="after">
					
	           			<field name="kc_check" />
            			<field name="ssl_check" />
            			<field name="dg_check" />
            			<field name="np_check" />
					
					</xpath>
            	
            	</data>
            </field>
		</record>
		
		
		<record id="view_picking_in_form" model="ir.ui.view">
            <field name="name">stock.picking.in.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="stock.view_picking_in_form" />
            <field name="arch" type="xml">
            	<data>
            	
					<xpath expr="//form[@string='Stock Moves']//field[@name='prodlot_id']" position="replace">
                        <field name="prodlot_id" groups="base.group_extended"
	                    	context="{'location_id':location_id, 'product_id':product_id, 'expiry_date_check': expiry_date_check, 'batch_number_check': batch_number_check,}"
	                    	domain="[('product_id','=?',product_id), ('check_type','=', True),]"
	                    	on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id, product_uom)" colspan="3"
	                    	attrs="{'readonly': [('hidden_prod_mandatory','=',False)],}" />
	                    <field name="hidden_prod_mandatory" invisible="True" />
						<field name="expired_date" />
						<field name="kc_check" />
            			<field name="ssl_check" />
            			<field name="dg_check" />
            			<field name="np_check" />
					</xpath>
					
					<xpath expr="//tree[@string='Stock Moves']//field[@name='state']" position="after">
					
	           			<field name="kc_check" />
            			<field name="ssl_check" />
            			<field name="dg_check" />
            			<field name="np_check" />
					
					</xpath>
            	
            	</data>
            </field>
		</record>
		
		<record id="view_production_lot_tree" model="ir.ui.view">
            <field name="name">stock.production.lot.tree</field>
            <field name="model">stock.production.lot</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="stock.view_production_lot_tree" />
            <field name="arch" type="xml">
                <data>
            	
            		<field name="ref" position="replace">
            			<field name="type" />
            			<field name="life_date" />
            		</field>
            		
            		<field name="prefix" position="replace" />
            		
            		<field name="stock_available" position="after">
            			<field name="stock_real" />
            		</field>
            	
            	</data>
            </field>
        </record>
        
        <record id="view_production_lot_expiry_date_tree" model="ir.ui.view">
            <field name="name">stock.production.lot.expiry.date.tree</field>
            <field name="model">stock.production.lot</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Expiry Dates">
                    <field name="prefix" invisible="True" />
                    <field name="name" invisible="True" />
                    <field name="type" invisible="True" />
            		<field name="life_date" />
                    <field name="product_id"/>
                    <field name="stock_available"/>
                    <field name="date"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="search_product_lot_filter">
            <field name="name">Production Lots Filter</field>
            <field name="model">stock.production.lot</field>
            <field name="type">search</field>
            <field name="inherit_id" ref="stock.search_product_lot_filter" />
            <field name="arch" type="xml">
            	<data>
            	
            		<filter name="available" position="replace">
            			<filter icon="terp-check" name="available" string="Available" domain="[('stock_available', '&gt;', 0)]" help="Available Product Lots" />
            			<filter icon="terp-check" name="real" string="Real" domain="[('stock_real', '&gt;', 0)]" help="Real Stock" />
            		</filter>
            		<field name="prefix" position="replace" />
            		<field name="ref" position="replace" />
            		<field name="name" position="after">
            			<field name="type" />
            			<field name="life_date" />
            		</field>
            	
            	</data>
            </field>
        </record>
        
        <record id="view_production_lot_form" model="ir.ui.view">
            <field name="name">stock.production.lot.form</field>
            <field name="model">stock.production.lot</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="stock.view_production_lot_form" />
            <field name="arch" type="xml">
            	<data>
            	
            		<field name="product_id" position="replace">
            			<field name="product_id" colspan="4" on_change="product_id_change(product_id)" />
            		</field>
            		
            		<field name="stock_available" position="after">
            			<field name="stock_real" colspan="4" />
            		</field>
            		
            		
            		<field name="ref" position="after">
            			<field name="type" />
            		</field>
            		
            		<field name="name" position="replace">
            			<field name="name" colspan="4" />
            		</field>
            		
            		<field name="date" position="replace">
            			<field name="date" colspan="2" />
            		</field>
            		
            		<field name="prefix" position="replace" />
            		<field name="ref" position="replace" />
            	
            	</data>
            </field>
        </record>
        
        <record model="ir.ui.view" id="view_move_form_expiry">
            <field name="name">stock.production.lot.form</field>
            <field name="model">stock.production.lot</field>
            <field name="inherit_id" ref="product_expiry.view_move_form_expiry" />
            <field name="type">form</field>
            <field name="arch" type="xml">
            	<data>
            	
            		<field name="use_date" position="replace" />
            		<field name="removal_date" position="replace" />
            		<field name="alert_date" position="replace" />
            	
            	</data>
            </field>
        </record>
        
		<record id="view_move_form" model="ir.ui.view">
            <field name="name">stock.move.form</field>
            <field name="model">stock.move</field>
            <field name="type">form</field>
            <field eval="4" name="priority"/>
            <field name="inherit_id" ref="stock.view_move_form" />
            <field name="arch" type="xml">
            	<data>
            	
	                <field name="prodlot_id" position="replace">
	                	<field name="prodlot_id" groups="base.group_extended"
	                    	context="{'location_id':location_id, 'product_id':product_id, 'expiry_date_check': expiry_date_check, 'batch_number_check': batch_number_check,}"
	                    	domain="[('product_id','=?',product_id), ('check_type','=', True),]"
	                    	on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id, product_uom)" colspan="3"
	                    	attrs="{'readonly': [('hidden_prod_mandatory','=',False)],}" />
	                    <field name="hidden_prod_mandatory" invisible="True" />
						<field name="expired_date" />
	                  	<field name="kc_check" />
	          			<field name="ssl_check" />
	          			<field name="dg_check" />
	          			<field name="np_check" />
	                </field>
            	
            	</data>
            </field>
        </record>
        
        <record id="view_move_form_reception_picking" model="ir.ui.view">
            <field name="name">stock.move.form2</field>
            <field name="model">stock.move</field>
            <field name="type">form</field>
            <field eval="6" name="priority"/>
            <field name="inherit_id" ref="stock.view_move_form_reception_picking" />
            <field name="arch" type="xml">
            	<data>
            	
	                <field name="prodlot_id" position="replace">
	                	<field name="prodlot_id" groups="base.group_extended"
	                    	context="{'location_id':location_id, 'product_id':product_id, 'expiry_date_check': expiry_date_check, 'batch_number_check': batch_number_check,}"
	                    	domain="[('product_id','=?',product_id), ('check_type','=', True),]"
	                    	on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id, product_uom)" colspan="3"
	                    	attrs="{'readonly': [('hidden_prod_mandatory','=',False)],}" />
	                    <field name="hidden_prod_mandatory" invisible="True" />
						<field name="expired_date" />
	                  	<field name="kc_check" />
	          			<field name="ssl_check" />
	          			<field name="dg_check" />
	          			<field name="np_check" />
	                </field>
            	
            	</data>
            </field>
        </record>
        
        <record id="stock_move_tree" model="ir.ui.view">
            <field name="name">Stock Moves</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="field_parent">move_history_ids</field>
            <field name="inherit_id" ref="stock.stock_move_tree" />
            <field name="arch" type="xml">
            	<data>
            	
            		<button name="action_done" position="after">
            			<field name="kc_check" />
	          			<field name="ssl_check" />
	          			<field name="dg_check" />
	          			<field name="np_check" />
            		</button>
            	
            	</data>
           	</field>
       	</record>
       	
       	<record id="stock_move_tree2" model="ir.ui.view">
            <field name="name">Stock Moves</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="field_parent">move_history_ids2</field>
            <field name="inherit_id" ref="stock.stock_move_tree2" />
            <field name="arch" type="xml">
            	<data>
            	
            		<field name="state" position="after">
            			<field name="kc_check" />
	          			<field name="ssl_check" />
	          			<field name="dg_check" />
	          			<field name="np_check" />
            		</field>
            	
            	</data>
           	</field>
       	</record>
       	
       	<record id="view_move_tree" model="ir.ui.view">
            <field name="name">stock.move.tree</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field eval="6" name="priority"/>
            <field name="inherit_id" ref="stock.view_move_tree" />
            <field name="arch" type="xml">
            	<data>
            	
            		<button name="action_done" position="after">
            			<field name="kc_check" />
	          			<field name="ssl_check" />
	          			<field name="dg_check" />
	          			<field name="np_check" />
            		</button>
            	
            	</data>
           	</field>
       	</record>
       	
       	<record id="view_move_tree_reception_picking" model="ir.ui.view">
            <field name="name">stock.move.tree2</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="priority" eval="6" />
            <field name="inherit_id" ref="stock.view_move_tree_reception_picking" />
            <field name="arch" type="xml">
            	<data>
            	
            		<button name="%(stock.action_partial_move_server)d" position="after">
            			<field name="kc_check" />
	          			<field name="ssl_check" />
	          			<field name="dg_check" />
	          			<field name="np_check" />
            		</button>
            	
            	</data>
           	</field>
       	</record>
        
        <record id="stock_inventory_line_tree" model="ir.ui.view">
            <field name="name">stock.inventory.line.tree</field>
            <field name="model">stock.inventory.line</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="stock.stock_inventory_line_tree" />
            <field name="arch" type="xml">
            	<data>
	                <xpath expr="/tree/field[@name='product_uom']" position="after">
	                    <field name="reason_type_id" widget="selection" domain="[('is_inventory', '=', True)]" />
	                    <field name="comment" />
	                </xpath>
	                    
	           		<field name="prod_lot_id" position="replace">
	           			<field name="prod_lot_id"
	                       	on_change="change_lot(prod_lot_id)"
	                       	groups="base.group_extended"
	                       	context="{'location_id':location_id, 'product_id': product_id, 'hidden_perishable_mandatory': hidden_perishable_mandatory,}"
	                       	domain="[('check_type','=', True), ('product_id', '=', product_id)]"
	                       	attrs="{'required': [('hidden_batch_management_mandatory', '=', True),], 'readonly': [('hidden_perishable_mandatory', '=', False), ('hidden_batch_management_mandatory', '=', False)],}" />
	                       <field name="expiry_date"
	                       	on_change="change_expiry(expiry_date, product_id, type_check)"
	                       	attrs="{'required': [('hidden_perishable_mandatory', '=', True),], 'readonly': [('hidden_perishable_mandatory', '=', False),],}" />
	           			
	           			<field name="hidden_perishable_mandatory" invisible="True" />
	           			<field name="hidden_batch_management_mandatory" invisible="True" />
	           			<field name="type_check" invisible="True" />
	           			<field name="kc_check" />
            			<field name="ssl_check" />
            			<field name="dg_check" />
            			<field name="np_check" />
	           		</field>
            	</data>
            </field>
        </record>

        <record id="stock_inventory_line_form" model="ir.ui.view">
            <field name="name">stock.inventory.line.form</field>
            <field name="model">stock.inventory.line</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="stock.view_inventory_line_form" />
            <field name="arch" type="xml">
            	<data>
            	
            		<field name="prod_lot_id" position="replace">
	            		<field name="prod_lot_id"
	                        	on_change="change_lot(prod_lot_id)"
	                        	groups="base.group_extended"
	                        	context="{'location_id':location_id, 'product_id': product_id, 'hidden_perishable_mandatory': hidden_perishable_mandatory,}"
	                        	domain="[('check_type','=', True), ('product_id', '=', product_id)]"
	                        	attrs="{'required': [('hidden_batch_management_mandatory', '=', True),], 'readonly': [('hidden_perishable_mandatory', '=', False), ('hidden_batch_management_mandatory', '=', False)],}" />
	                    <field name="expiry_date"
	                       		on_change="change_expiry(expiry_date, product_id, type_check)"
	                       		attrs="{'required': [('hidden_perishable_mandatory', '=', True),], 'readonly': [('hidden_perishable_mandatory', '=', False),],}" />
	           			
	           			<field name="hidden_perishable_mandatory" invisible="True" />
	           			<field name="hidden_batch_management_mandatory" invisible="True" />
	           			<field name="type_check" invisible="True" />
	           			<field name="kc_check" />
            			<field name="ssl_check" />
            			<field name="dg_check" />
            			<field name="np_check" />
           			</field>
            	
            	</data>
            </field>
        </record>
        
        <record id="view_inventory_form" model="ir.ui.view">
            <field name="name">stock.inventory.form</field>
            <field name="model">stock.inventory</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="stock.view_inventory_form" />
            <field name="arch" type="xml">
                <data>
                
                    <xpath expr="//tree[@string='Products']//field[@name='prod_lot_id']" position="replace">
                        <field name="prod_lot_id"
                        	on_change="change_lot(prod_lot_id)"
                        	groups="base.group_extended"
                        	context="{'location_id':location_id, 'product_id': product_id, 'hidden_perishable_mandatory': hidden_perishable_mandatory,}"
                        	domain="[('check_type','=', True), ('product_id', '=', product_id),]"
                        	attrs="{'required': [('hidden_batch_management_mandatory', '=', True),], 'readonly': [('hidden_perishable_mandatory', '=', False), ('hidden_batch_management_mandatory', '=', False)],}" />
                        <field name="expiry_date"
                        	on_change="change_expiry(expiry_date, product_id, type_check)"
                        	attrs="{'required': [('hidden_perishable_mandatory', '=', True),], 'readonly': [('hidden_perishable_mandatory', '=', False),],}" />
            			
            			<field name="hidden_perishable_mandatory" invisible="True" />
            			<field name="hidden_batch_management_mandatory" invisible="True" />
            			<field name="type_check" invisible="True" />
            			<field name="kc_check" />
            			<field name="ssl_check" />
            			<field name="dg_check" />
            			<field name="np_check" />
                    </xpath>
                    
                    <xpath expr="//form[@string='Products ']//field[@name='prod_lot_id']" position="replace">
                    	<field name="prod_lot_id"
                        	on_change="change_lot(prod_lot_id)"
                        	groups="base.group_extended"
                        	context="{'location_id':location_id, 'product_id': product_id, 'hidden_perishable_mandatory': hidden_perishable_mandatory,}"
                        	domain="[('check_type','=', True), ('product_id', '=', product_id),]"
                        	attrs="{'required': [('hidden_batch_management_mandatory', '=', True),], 'readonly': [('hidden_perishable_mandatory', '=', False), ('hidden_batch_management_mandatory', '=', False)],}" />
                        <field name="expiry_date"
                        	on_change="change_expiry(expiry_date, product_id, type_check)"
                        	attrs="{'required': [('hidden_perishable_mandatory', '=', True),], 'readonly': [('hidden_perishable_mandatory', '=', False),],}" />
            			
            			<field name="hidden_perishable_mandatory" invisible="True" />
            			<field name="hidden_batch_management_mandatory" invisible="True" />
            			<field name="type_check" invisible="True" />
            			<field name="kc_check" />
            			<field name="ssl_check" />
            			<field name="dg_check" />
            			<field name="np_check" />
                    
                    </xpath>
                    
                </data>
            </field>
        </record>

	</data>
</openerp>
