<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>
    
        <record id="real_average_consumption_form_view" model="ir.ui.view">
            <field name="name">real.average.consumption.form.view</field>
            <field name="model">real.average.consumption</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Real consumption reporting">
                    <separator colspan="4" string="General informations" />
                    <field name="cons_location_id" />
                    <field name="creation_date" />
                    <field name="activity_id" />
                    <newline />
                    <separator colspan="4" string="Period of consumption" />
                    <field name="period_from" />
                    <field name="period_to" />
                    <separator colspan="4" string="Product filters" />
                    <field name="sublist_id" />
                    <field name="nomen_id" />
                    <separator colspan="4" string="Products" />
                    <field colspan="4" name="line_ids" mode="tree" nolabel="1">
                        <tree string="Products">
                            <field name="product_id" />
                            <field name="uom_id" />
                            <field name="product_qty" />
                            <field name="consumed_qty" />
                            <field name="remark" />
                        </tree>
                    </field>
                    <separator colspan="4" string="Actions" />
                    <button name="save_and_process" string="Save &amp; Process" icon="gtk-execute" type="object" colspan="2" />
                </form>
            </field>
        </record>
        
        <record id="real_average_consumption_confirmation_view" model="ir.ui.view">
            <field name="name">real.average.consumption.confirmation.view</field>
            <field name="model">real.average.consumption</field>
            <field name="type">form</field>
            <field name="priority" eval="99" />
            <field name="arch" type="xml">
                <form string="Need confirmation">
                    <separator colspan="4" string="Need confirmation" />
                    <field name="valid_ok" />
                    <separator colspan="4" string="Actions" />
                    <button name="process_moves" string="Process moves" icon="gtk-execute" type="object" colspan="2" />
                </form>
            </field>
        </record>
        
        <record id="real_average_consumption_tree_view" model="ir.ui.view">
            <field name="name">real.average.consumption.tree.view</field>
            <field name="model">real.average.consumption</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Real consumption reports">
                    <field name="cons_location_id" />
                    <field name="activity_id" />
                    <field name="period_from" />
                    <field name="period_to" />
                    <field name="line_ids" />
                    <field name="created_ok" />
                </tree>
            </field>
        </record>
        
        <record id="real_average_consumption_search_view" model="ir.ui.view">
            <field name="name">real.average.consumption.search.view</field>
            <field name="model">real.average.consumption</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Real consumption reports">
                    <group col="10" colspan="4">
                        <filter icon="terp-check" string="Moves created" domain="[('created_ok','=',True)]"/>
                        <separator orientation="vertical"/>
                        <field name="cons_location_id"/>
                        <field name="activity_id"/>
                        <field name="period_from"/>
                        <field name="period_to"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By...">
                        <filter string="Consumer" icon="terp-stock" domain="" context="{'group_by': 'cons_location_id'}" />
                        <filter string="Activity" icon="terp-administration" domain="" context="{'group_by':'activity_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Sublist" icon="terp-go-week" domain="" context="{'group_by':'sublist_id'}"/>
                        <filter string="Nomenclature" icon="terp-tools" domain="" context="{'group_by':'nomen_id'}"/>
                    </group>
                </search>
            </field>
        </record>
        
        <record id="action_real_average_consumption" model="ir.actions.act_window">
            <field name="name">Real consumption reports</field>
            <field name="res_model">real.average.consumption</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <record id="action_new_real_consumption_report" model="ir.actions.act_window">
            <field name="name">New real consumption report</field>
            <field name="res_model">real.average.consumption</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
        </record>
        
        <menuitem
             id="warehouse_consumption_menu"
             name="Consumption"
             parent="stock.menu_stock_root" />
             
        <menuitem
            id="consumption_reports_menu"
            action="action_real_average_consumption"
            parent="warehouse_consumption_menu" />
          
        <menuitem
            id="new_consumption_reports_menu"
            action="action_new_real_consumption_report"
            parent="warehouse_consumption_menu" />
                   
    
    </data>
</openerp>