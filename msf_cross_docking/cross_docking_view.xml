<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
    
        <record id="purchase_cross_docking_form_view" model="ir.ui.view">
            <field name="name">purchase.cross.docking.form.view</field>
            <field name="model">purchase.order</field>
            <field name="type">form</field>
            <field name="priority">301</field>
            <field name="inherit_id" ref="purchase.purchase_order_form" />
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/form/notebook/page[@string='Delivery &amp; Invoicing']/group/field[@name='location_id']" position="before" >
                        <field name="cross_docking_ok" attrs="{'readonly':[('state','in', ['confirmed','approved','done'] )]}" 
                        on_change="onchange_cross_docking_ok(cross_docking_ok)"
                        />
                    </xpath>
                    <field name="location_id" position= "replace">
                        <field name="location_id" attrs="{'readonly':[('cross_docking_ok','=', True )]}"/>
                    </field>
                </data>
            </field>
        </record>
        
        <record id="stock_picking_cross_docking_form_view" model="ir.ui.view">
            <field name="name">stock.picking.in.form.cross.docking</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="priority">16</field>
            <field name="inherit_id" ref="stock.view_picking_in_form" />
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/form/notebook/page[@string='General Information']/field[@name='move_lines']" position="attributes" >
                        <attribute name="context">{'purchase_id': purchase_id} </attribute>
                    </xpath>
                </data>
            </field>
        </record>
         
    </data>
</openerp>