<?xml version="1.0"?>
<openerp>
<data>

    <record model="ir.ui.view" id="view_odms_subscription_list_portal">
        <field name="name">odms.subscription.portal.list</field>
        <field name="model">odms.subscription</field>
        <field name="type">tree</field>
        <field name="priority" eval="20"/>
        <field name="arch" type="xml">
            <tree string="Your Subscriptions">
                <field name="date" />
                <field name="name"/>
                <field name="url"/>
                <field name="offer_id"/> 
                <field name="nbr_users"/>
                <field name="max_users"/>
                <field name="price"/>
                <field name="deadline_date" />
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record model="ir.ui.view" id="view_odms_subscription_form_new_portal">
        <field name="name">odms.subscription.portal.new.form</field>
        <field name="model">odms.subscription</field>
        <field name="type">form</field>
        <field name="priority" eval="20"/>
        <field name="arch" type="xml">
            <form string="Free Trial Request">
            <notebook>
            <page string="General">
                <separator string="General Information" colspan="4"/>
                <field name="name" select="1" colspan="2" readonly="1"/>
                <field name="date" select="2" />
                <field name="offer_id" select="1" />
                <field name="max_users"/>
                <separator string="Login information" colspan="4"/>
                <field name="email"/>
                <newline/>
                <field name="url" colspan="2" select="2"/>
                <label string=".od.openerp.com" colspan="2" align="0"/>
                <separator string="Notes" colspan="4"/>
                <field name="notes" colspan="4" nolabel="1"/>
                <separator string="State" colspan="4"/>
                <field name="state" select="1"/>
                <button string="Request Free Trial" colspan="2" name="save" confirm="Your request has been saved !"/>
            </page>
            <page string="Services">
                <field name="bundle_ids" colspan="4" nolabel="1">
                    <tree>
                        <field name="bundle_id"/>
                        <field name="state"/>
                    </tree>
                </field>
            </page>
            <page string="Statistics">
                <field name="nbr_users"/>
                <field name="price"/>
            </page>
            </notebook>
            </form>
        </field>
    </record>


    <record model="ir.ui.view" id="view_odms_subscription_form_portal">
        <field name="name">odms.subscription.portal.form</field>
        <field name="model">odms.subscription</field>
        <field name="type">form</field>
        <field name="priority" eval="20"/>
        <field name="arch" type="xml">
            <form string="OD Subscription">
            <notebook>
            <page string="General">
                <field name="name" select="1" colspan="2"/>
                <field name="date" select="2" />
                <field name="offer_id" select="1" />
                <field name="max_users"/>
                <field name="activ_date" select="2" />
                <field name="deadline_date" select="2" />
                <field name="owner_id" select="2" string="Your Responsible"/>
                <separator string="Login information" colspan="4"/>
                <field name="url" colspan="2" select="2"/>
                <label string=".od.openerp.com" colspan="2" align="0"/>

                <separator string="Status" colspan="4"/>
                <field name="vserv_server_state"/>
                <field name="vserver_state"/>
                <field name="web_server_state"/>
                <field name="bckup_server_state"/>

                <field name="state" select="1"/>
            </page>
            <page string="Services">
                <field name="bundle_ids" colspan="4" nolabel="1">
                    <tree>
                        <field name="bundle_id"/>
                        <field name="state"/>
                    </tree>
                </field>
            </page>
            <page string="Statistics">
                <field name="nbr_users"/>
                <field name="price"/>
            </page>
            </notebook>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_odms_subs_bundle_tree_portal">
        <field name="name">odms.subs_bundle.portal.tree</field>
        <field name="model">odms.subs_bundle</field>
        <field name="type">tree</field>
        <field name="priority" eval="20"/>
        <field name="arch" type="xml">
            <tree string="Your Services">
                <field name="bundle_id"/>
                <field name="subscription_id"/>
                <field name="price"/>
                <field name="state"/>
                <button name="%(odms_bundle_active_wizard)d" string="Activate This Service" states="notinstalled" type="action" icon="STOCK_APPLY"/>
            </tree>
        </field>
    </record>


    <record model="ir.ui.view" id="view_odms_subs_bundle_form_portal">
        <field name="name">odms.subs_bundle.portal.form</field>
        <field name="model">odms.subs_bundle</field>
        <field name="type">form</field>
        <field name="priority" eval="20"/>
        <field name="arch" type="xml">
            <form string="Your Services">
                <field name="bundle_id" select="1"/>
                <field name="subscription_id" select="2"/>
                <field name="price"/>
                <newline/>
                <field name="note" colspan="4"/>
                <separator string="Status" colspan="4" select="1"/>
                <field name="state"/>
                <group colspan="2">
                    <button name="%(odms_bundle_active_wizard)d" string="Activate This Service" states="notinstalled" type="action" icon="STOCK_APPLY"/>
                    <button name="uninstall_bundle" string="Uninstall Service" states="installed" type="object"/>
                </group>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_odms_subscription_list">
        <field name="name">New Free Trial Subscription</field>
        <field name="res_model">odms.subscription</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_id" ref="view_odms_subscription_form_new_portal"/>
        <field name="view_type">form</field>
        <field name="view_mode">form,tree</field>
        <field name="domain">{'portal':True}</field>
    </record>

</data>
</openerp>
