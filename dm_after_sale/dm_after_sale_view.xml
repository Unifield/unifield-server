<?xml version="1.0"?>
<openerp>
<data>

    <!--
    =======================================================
    AFTER-SALE VIEWS
    =======================================================
    -->
    
    <record model="ir.ui.view" id="view_after_sale_action_tree">
        <field name="name">dm.after.sale.action.tree</field>
        <field name="model">dm.after.sale.action</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="After-Sale Action">
                <field name="segment_id" colspan="4" context="{'address_id': context.get('address_id',False)}" />
                <field name="action_id" colspan="4" domain="[('type','=','as')]" on_change="onchange_content(action_id)"/>
                <field name="mail_service_id" colspan="4" domain="[('media_id.name','=','Email')]"/>
                <separator string="Report Content" colspan="4"/>
                <field name="as_report" widget="text_tag" nolabel="1" colspan="4"/>
                <button name="set_cancel" string="Cancel" icon="gtk-cancel" type="object" special="cancel" colspan="2"/>
                <button name="send_document" string="Send Document" icon='gtk-ok' type="object" colspan="2"/>
            </form>
        </field>
    </record>

    <record id="dm_after_sale_action_form" model="ir.actions.act_window">
        <field name="name">After-Sale Action</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.after.sale.action</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="context">{'address_id':active_id}</field>
    </record> 
 
    <act_window context="{'address_id': active_id}"
    			id="address_after_sale_action"
    			name="After-Sale Action"
    			res_model="dm.after.sale.action"
    			src_model="res.partner.address"
    			target="new"
    			view_mode="form"
     />
</data>
</openerp>
