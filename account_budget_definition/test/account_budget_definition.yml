-
    In order to test the budget module, I start by creating a new budget
-
  !record {model: crossovered.budget, id: budget_1}:
    date_from: !eval "'%s-01-01' %(datetime.now().year+1)"
    date_to: !eval "'%s-12-31' %(datetime.now().year+1)"
    name: !eval "'Budget %s' %(datetime.now().year+1)"
    code: !eval "'B%s' %(datetime.now().year+1)"
    state: draft
    analytic_account_id: account.analytic_super_product_trainings
    decision_moment: "This is the decision moment"
    
-
  I create a budget line
-
  !record {model: crossovered.budget, id: budget_1}:
    crossovered_budget_line:
      - general_budget_id: account_budget.account_budget_post_purchase0
        planned_amount: 10000.0
    
-
  I check that the fields are correctly set from the parent budget
-
  !assert {model: crossovered.budget, id: budget_1}:
    crossovered_budget_line:
      - general_budget_code == 'PUR'
      - analytic_account_id == account.analytic_super_product_trainings
      - date_to == !eval "'%s-12-31' %(datetime.now().year+1)"
      - date_from == !eval "'%s-01-01' %(datetime.now().year+1)"