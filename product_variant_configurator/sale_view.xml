<?xml version="1.0"?>
<openerp>
	<data>

		<record id="action_product_configure" model="ir.actions.act_window">
			<field name="name">product_variant_configurator.action_product_configure</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">product_variant_configurator.configurator</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="target">new</field>
		</record>

		<record id="view_product_variant_configurator" model="ir.ui.view">
			<field name="name">view_product_variant_configurator</field>
			<field name="model">product_variant_configurator.configurator</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Product Configurator">
					<group col="4" colspan="4">

						<field name="product_tmpl_id" on_change="onchange_product_tmpl_id(product_tmpl_id)"/>

						<newline/>

						<field name="dimension_configuration_line_ids" widget="one2many_list">
							<form string="Dimension" editable="bottom">
								<field name="dimension_type_id" on_change="onchange_dimension_type_id(dimension_type_id)" context="{'product_tmpl_id':parent.product_tmpl_id}" />
								<field name="dimension_type_value_id" on_change="onchange_dimension_type_value_id(dimension_type_value_id)" />
								<field name="dimension_custom_value" on_change="onchange_dimension_custom_value(dimension_custom_value)" attrs="{'readonly':[('allow_custom_value','=',False)]}" />
								<field name="allow_custom_value" />
							</form>
							<tree string="Dimension" editable="bottom">
								<field name="dimension_type_id" on_change="onchange_dimension_type_id(dimension_type_id)" context="{'product_tmpl_id':parent.product_tmpl_id}" />
								<field name="dimension_type_value_id" on_change="onchange_dimension_type_value_id(dimension_type_value_id)" />
								<field name="dimension_custom_value" on_change="onchange_dimension_custom_value(dimension_custom_value)" attrs="{'readonly':[('allow_custom_value','=',False)]}" />
								<field name="allow_custom_value"/>
							</tree>
						</field>

						<newline />

						<field name="product_variant_id" on_change="onchange_product_variant_id(product_variant_id, dimension_configuration_line_ids)" context="{'dimension_configuration_line_ids': dimension_configuration_line_ids}" />

						<field name="next_step" invisible='1' />
					</group>
					<group col="2" colspan="2">
						<button icon="gtk-cancel" special="cancel" string="Cancel" />
						<button icon="gtk-ok" name="configure_line" string="Validate order line" type="object" attrs="{'invisible':[('product_variant_id','=',False)]}" />
					</group>

				</form>
			</field>
		</record>

	</data>
</openerp>