<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>


<!-- =========================Connection Manager=============================== -->

        <record model="ir.ui.view" id="entity_tree_view">
            <field name="name">connection.tree</field>
            <field name="model">sync.client.sync_server_connection</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Instance Tree">
                    <field name="host"/>
                    <field name="database"/>
                    <field name="login"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="entity_form_view">
            <field name="name">connection.form</field>
            <field name="model">sync.client.sync_server_connection</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Instance Form">
                    <separator string="Connection information" colspan="4"/>
                    <field name="host" required="1"/>
                    <field name="port" required="1"/>
                    <field name="protocol" required="1"/>
                    <field name="database" required="1"/>
                    <field name="login" required="1"/>
                    <field name="password" required="1" password="1"/>
                    <field name="max_size" required="1"/>
                    <separator string="Connection state" colspan="4"/>
                    <!-- the following line break the 6.1 web client backport because its a functional field of type integer -->
                    <!-- <field name="uid" invisible="1"/> -->
                    <field name="state"/>
                    <button  icon="gtk-apply" string="Connect" name="action_connect" type="object" attrs="{'invisible' : [('state', '=', 'Connected')]}"/>
                    <button  icon="gtk-go-back" string="Reset Connection" name="action_disconnect" type="object" attrs="{'invisible' : [('state', '!=', 'Connected')]}"/>
                </form>
            </field>
        </record>


<!-- ========================= UPDATE RECEIVED =============================== -->

        <record model="ir.ui.view" id="update_received_tree_view">
            <field name="name">update.received.tree</field>
            <field name="model">sync.client.update_received</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="red:run == False" string="Instance Tree">
                    <field name="source"/>
                    <field name="model"/>
                    <field name="sequence"/>
                    <field name="create_date"/>
                    <field name="execution_date"/>
                    <field name="version"/>
                    <field name="run"/>
                </tree>
            </field>
        </record>


        <record model="ir.ui.view" id="update_received_form_view">
            <field name="name">update.received.form</field>
            <field name="model">sync.client.update_received</field>
            <field name="type">form</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <form string="Update Received">
                    <group col="6" colspan="4">
                        <field name="run"/>
                        <field name="source"/>
                        <field name="version"/>
                        <field name="sequence"/>
                        <field name="model"/>
                        <field name="owner"/>
                        <field name="create_date"/>
                        <field name="execution_date"/>
                    </group>
                    <separator string="Execution Messages" colspan="4"/>
                    <field name="log" nolabel="1" colspan="4" attrs="{'readonly':[('editable','=',False)]}"/>
                    <group colspan="2" col="1">
                        <separator string="Fields"/>
                        <field name="fields" nolabel="1" attrs="{'readonly':[('editable','=',False)]}"/>
                    </group>
                    <group colspan="2" col="1">
                        <separator string="Fallback Values"/>
                        <field name="fallback_values" nolabel="1" attrs="{'readonly':[('editable','=',False)]}"/>
                    </group>
                    <separator string="Values" colspan="4"/>
                    <field name="values" nolabel="1" colspan="4" attrs="{'readonly':[('editable','=',False)]}"/>
                    <label string="" colspan="3"/>
                    <group colspan="1" col="3">
                        <field name="editable" attrs="{'invisible':[('run','=',True)]}"/>
                        <button string="Run manually" name="run" type="object" attrs="{'invisible':[('run','=',True)]}"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="update_received_search_view" model="ir.ui.view">
            <field name="name">update.received.search</field>
            <field name="model">sync.client.update_received</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search update Received">
                   <field name="source"/>
                   <field name="model"/>
                   <field name="sequence" />
                   <newline />
                   <field name="create_date"/>
                   <field name="execution_date"/>
                   <newline/>
                   <filter icon="terp-check" string="Not Run"
                       name="current"
                       domain="[('run','=', False)]"/>
                   <newline />
                   <group expand="0" string="Group By..." colspan="4">
                       <filter string="Source" icon="terp-partner" domain="[]"
                           context="{'group_by':'source'}"/>
                       <filter string="Model" icon="terp-personal"
                           domain="[]" context="{'group_by':'model'}"/>
                      <filter string="Sequence" icon="terp-accessories-archiver"
                           domain="[]" context="{'group_by':'sequence'}"/>

                   </group>
               </search>
            </field>
        </record>

<!-- ========================= Message RECEIVED =============================== -->

    <record model="ir.ui.view" id="message_received_tree_view">
            <field name="name">message.received.tree</field>
            <field name="model">sync.client.message_received</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="red:run == False" string="Instance Tree">
                    <field name="identifier" />
                    <field name="source"/>
                    <field name="remote_call"/>
                    <field name="run"/>
                    <field name="create_date"/>
                    <field name="execution_date"/>
                </tree>
            </field>
        </record>


        <record model="ir.ui.view" id="message_received_form_view">
            <field name="name">message.received.form</field>
            <field name="model">sync.client.message_received</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Message Received">
                    <group col="6" colspan="4">
                        <field name="identifier"/>
                        <field name="source"/>
                        <field name="run"/>
                        <field name="create_date"/>
                        <field name="execution_date"/>
                    </group>
                    <separator string="Execution log" colspan="4"/>
                    <field name="log" nolabel="1" colspan="4" />
                    <group colspan="2" col="1">
                        <separator string="Call"/>
                        <field name="remote_call" nolabel="1" attrs="{'readonly':[('editable','=',False)]}"/>
                    </group>
                    <group colspan="2" col="1">
                        <separator string="Arguments"/>
                        <field name="arguments" nolabel="1" attrs="{'readonly':[('editable','=',False)]}"/>
                    </group>
                    <label string="" colspan="3"/>
                    <group colspan="1" col="3">
                        <field name="editable" attrs="{'invisible':[('run','=',True)]}"/>
                        <button string="Run manually" name="execute" type="object" attrs="{'invisible':[('run','=',True)]}"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="message_received_search_view" model="ir.ui.view">
            <field name="name">message.received.search</field>
            <field name="model">sync.client.message_received</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search update Received">
                   <field name="source"/>
                   <field name="remote_call"/>
                   <field name="create_date"/>
                   <field name="execution_date"/>
                   <newline/>
                   <filter icon="terp-check" string="Not Run"
                       name="current"
                       domain="[('run','=', False)]"/>
                   <newline />
                   <group expand="0" string="Group By..." colspan="4">
                       <filter string="Source" icon="terp-partner" domain="[]"
                           context="{'group_by':'source'}"/>
                       <filter string="Call" icon="terp-personal"
                           domain="[]" context="{'group_by':'remote_call'}"/>
                       <filter string="Sequence" icon="terp-accessories-archiver"
                           domain="[]" context="{'group_by':'sequence'}"/>

                   </group>
               </search>
            </field>
        </record>



<!-- ========================= UPDATE SENT =============================== -->

    <record model="ir.ui.view" id="sync_client_update_to_send_tree_view">
            <field name="name">sync.client.update_to_send.tree</field>
            <field name="model">sync.client.update_to_send</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="red:sent == False">
                    <field name="model"/>
                    <field name="session_id"/>
                    <field name="version"/>
                    <field name="rule_id"/>
                    <field name="sent"/>
                    <field name="sent_date"/>
                    <field name="xml_id" invisible="1"/>
                </tree>
            </field>
        </record>


        <record model="ir.ui.view" id="update_sent_form_view">
            <field name="name">sync.client.update_to_send.form</field>
            <field name="model">sync.client.update_to_send</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Instance Form">
                    <group col="6" colspan="4">
                        <field name="sent"/>
                        <field name="session_id"/>
                        <field name="rule_id"/>
                        <field name="model"/>
                        <field name="xml_id"/>
                        <field name="version"/>
                        <field name="sent_date"/>
                        <field name="owner"/>
                        <group colspan="6" col="1">
                            <separator string="Fields"/>
                            <field name="fields" nolabel="1"/>
                            <separator string="Values"/>
                            <field name="values" nolabel="1"/>
                        </group>
                    </group>
                </form>
            </field>
        </record>

        <record id="update_sent_search_view" model="ir.ui.view">
            <field name="name">sync.client.update_to_send.search</field>
            <field name="model">sync.client.update_to_send</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search update Sent">
                   
                   <field name="sent_date"/>
                   <field name="model"/>
                   <field name="rule_id"/>
                   <newline />
                   <filter icon="terp-check" string="Not Run"
                       name="current"
                       domain="[('sent','=', False)]"/>
                   <newline/>
                   <group expand="0" string="Group By..." colspan="4">
                      <filter string="Model" icon="terp-partner" domain="[]"
                           context="{'group_by':'model'}"/>

                      <filter string="Rule" icon="terp-personal"
                           domain="[]" context="{'group_by':'rule_id'}"/>

                      <filter string="Session" icon="terp-accessories-archiver"
                           domain="[]" context="{'group_by':'session_id'}"/>

                      <filter string="Date" icon="terp-partner" domain="[]"
                           context="{'group_by':'sync_date'}"/>

                      <filter string="Record" icon="terp-partner" domain="[]"
                           context="{'group_by':'xml_id'}"/>

                   </group>
               </search>
            </field>
        </record>

<!-- ========================= Message SENT =============================== -->

    <record model="ir.ui.view" id="sync_client_message_to_send_tree_view">
            <field name="name">sync.client.message_to_send.tree</field>
            <field name="model">sync.client.message_to_send</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="red:sent == False">
                    <field name="identifier"/>
                    <field name="destination_name"/>
                    <field name="remote_call"/>
                    <field name="sent"/>
                    <field name="sent_date"/>
                </tree>
            </field>
        </record>


        <record model="ir.ui.view" id="sync_client_message_to_send_form_view">
            <field name="name">sync.client.message_to_send.form</field>
            <field name="model">sync.client.message_to_send</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form>
                    <field name="identifier"/>
                    <field name="destination_name"/>
                    <field name="sent_date"/>
                    <field name="sent"/>
                    <group colspan="2" col="1">
                        <separator string="Call"/>
                        <field name="remote_call" nolabel="1"/>
                    </group>
                    <group colspan="2" col="1">
                        <separator string="Arguments"/>
                        <field name="arguments" nolabel="1"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="sync_client_message_to_send_search_view" model="ir.ui.view">
            <field name="name">sync.client.message_to_send.search</field>
            <field name="model">sync.client.message_to_send</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search>
                   
                   <field name="sent_date"/>
                   <separator orientation="vertical"/>
                   <field name="identifier"/>
                   <field name="remote_call"/>
                   <field name="destination_name"/>
                   
                   <newline/>
                   <filter icon="terp-check" string="Not Sent"
                       name="current"
                       domain="[('sent','=', False)]"/>
                   <newline />
                   <group expand="0" string="Group By..." colspan="4">
                       <filter string="Destination" icon="terp-partner" domain="[]"
                           context="{'group_by':'destination_name'}"/>
                       <filter string="Call" icon="terp-personal"
                           domain="[]" context="{'group_by':'remote_call'}"/>
                   </group>
               </search>
            </field>
        </record>

<!-- =========================MENUS and ACTIONS=============================== -->

        <record model="ir.actions.act_window" id="connection_manager_action">

        <field name="name">Connection Manager</field>
            <field name="res_model">sync.client.sync_server_connection</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
        </record>

        <record model="ir.actions.act_window" id="update_received_action">
            <field name="name">Update Received Monitor</field>
            <field name="res_model">sync.client.update_received</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
        </record>

        <record model="ir.actions.act_window" id="update_sent_action">
            <field name="name">Update Sent Monitor</field>
            <field name="res_model">sync.client.update_to_send</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
        </record>

        <record model="ir.actions.act_window" id="message_received_action">
            <field name="name">Message Received Monitor</field>
            <field name="res_model">sync.client.message_received</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
        </record>

        <record model="ir.actions.act_window" id="message_sent_action">
            <field name="name">Message Sent Monitor</field>
            <field name="res_model">sync.client.message_to_send</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
        </record>

        <menuitem id="main_menu" 
        		 name="Synchronization" 
        		 parent=""
                 web_icon="images/sync.jpg"
                 web_icon_hover="images/sync-hover.jpg"
        		/>

        <menuitem id="sync_menu" name="Synchronization" parent="main_menu" sequence="20"/>

        <menuitem id="reg_menu" name="Registration" parent="main_menu" sequence="10"/>

        <menuitem id="mon_menu" name="Monitoring" parent="main_menu" sequence="30"/>

        <menuitem id="update_menu" name="Update" parent="mon_menu" sequence="50"/>

        <menuitem id="message_menu" name="Message" parent="mon_menu" sequence="60"/>

        <menuitem id="connection_manager_menu" name="Connection Manager" parent="reg_menu"
                action="connection_manager_action"/>

        <menuitem id="update_received_menu" name="Update Received Monitor" parent="update_menu"
                action="update_received_action" />

        <menuitem id="update_sent_menu" name="Update Sent Monitor" parent="update_menu"
                action="update_sent_action" />

        <menuitem id="Message_received_menu" name="Message Received Monitor" parent="message_menu"
                action="message_received_action" />

        <menuitem id="message_sent_menu" name="Messages Sent Monitor" parent="message_menu"
                action="message_sent_action" />

        <record model="ir.ui.view" id="ir_model_data_inherit">
            <field name="name">ir.model.data.inherit</field>
            <field name="model">ir.model.data</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="base.view_model_data_form"/>
            <field name="arch" type="xml">
                <field name="date_init" position="after">
                     <field name="last_modification"/>
                  <field name="sync_date"/>
                </field>
            </field>
        </record>


    </data>
</openerp>
<!--
    vim:expandtab:smartindent:tabstop=4:softtabstop=4:shiftwidth=4:
-->

