<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

    <record id="stock.view_stock_tree" model="ir.ui.view">
        <field name="name">report.stock.move.tree</field>
        <field name="model">report.stock.move</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Moves Analysis">
                <field name="date" invisible="1"/>
                <field name="year" invisible="1" />
                <field name="month" invisible="1"/>
                <field name="day" invisible="1"/>
                <field name="type" invisible="1"/>
                <field name="company_id" invisible="1"/>
                <field name="partner_id" invisible="1" context="{'contact_display':'partner'}" />
                <field name="picking_id" invisible="1"/>
                <field name="location_id" invisible="1"/>
                <field name="location_dest_id" invisible="1"/>
                <field name="product_id" invisible="0"/>
                <field name="categ_id" invisible="1"/>
                <field name="state" invisible="1"/>
                <field name="comment" invisible="1"/>
                <field name="order_type" invisible="1"/>
                <field name="origin" invisible="1"/>
                <field name="prodlot_id" invisible="1"/>
                <field name="tracking_id" invisible="1"/>
				<field name="reason_type_id" invisible="1" />
                <field name="product_qty" sum="Total quantity"/>
                <field name="product_qty_in" sum="Total incoming quantity" />
                <field name="product_qty_out" sum="Total outgoing quantity"/>
                <field name="currency_id" invisible="1" />
                <field name="day_diff1"/>
                <field name="day_diff"/>
                <field name="day_diff2" string="Delay(Days)"/>
           </tree>
        </field>
    </record>

    <record id="stock.view_stock_search" model="ir.ui.view">
        <field name="name">report.stock.move.search</field>
        <field name="model">report.stock.move</field>
        <field name="type">search</field>
        <field name="arch" type="xml">
            <search string="Moves Analysis">
                <group>
                <filter icon="terp-go-year" string="Year"
                domain="[('date','&lt;=', time.strftime('%%Y-%%m-%%d')),('date','&gt;=',time.strftime('%%Y-01-01'))]"
                help="Current year"/>
                <filter icon="terp-go-month"
                 string="Month-1"
                 name="month-1"
                 domain="[('date','&lt;=', (datetime.date.today() - relativedelta(day=31, months=1)).strftime('%%Y-%%m-%%d')),('date','&gt;=',(datetime.date.today() - relativedelta(day=1,months=1)).strftime('%%Y-%%m-%%d'))]"
                 help="Last month"/>
                <filter icon="terp-go-month" string="Month"
                name="month"
                domain="[('date','&lt;=',(datetime.date.today()+relativedelta(day=31)).strftime('%%Y-%%m-%%d')),('date','&gt;=',(datetime.date.today()-relativedelta(day=1)).strftime('%%Y-%%m-%%d'))]"
                help="Current month"/>
                <separator orientation="vertical"/>
                <filter string="Closed"
                    name="done"
                    icon="terp-dialog-close"
                    domain="[('state','=','done')]"
                    help = "Completed Stock-Moves"/>
                <filter string="Todo"
                    icon="terp-gtk-go-back-rtl"
                    domain="[('state','in',('assigned','waiting','confirmed'))]"
                    help = "Future Stock-Moves"/>

                <separator orientation="vertical"/>
                <filter icon="terp-go-home" name="in" string="Incoming" domain="[('type','=','in')]"/>
                <filter icon="terp-go-home" name="internal" string="Internal" domain="[('type','=','internal')]"/>
                <filter icon="terp-go-home" name="out" string="Outgoing" domain="[('type','=','out')]"/>
                <separator orientation="vertical"/>
                <field name="product_id" default_focus="1"/>
                <field name="partner_id" context="{'contact_display':'partner'}"/>
				<field name="order_type" />
				<field name="reason_type_id" widget="selection"/>
				<newline />
                </group>
                <newline/>
                <group expand="0" string="Extended Filters...">
                    <field name="location_id" />
                    <field name="location_dest_id" />
                    <field name="origin" />
                    <field name="state" />
                    <field name="date"/>
                </group>
                <newline/>
                <group expand="1" string="Group By...">
                    <filter name="group_partner" string="Supplier" icon="terp-partner" context="{'group_by':'partner_id'}"/>
                    <separator orientation="vertical"/>
                    <filter name="group_categ_id" string="Family" icon="terp-stock_symbol-selection" context="{'group_by':'categ_id'}"/>
                    <filter name="group_product" string="Product" icon="terp-accessories-archiver" context="{'group_by':'product_id'}"/>
                    <filter name="group_prodlot" string="Batch" icon="terp-accessories-archiver" context="{'group_by':'prodlot_id'}"/>
                    <separator orientation="vertical"/>
                    <filter string="Source Location" name="src_location" icon="terp-gtk-jump-to-rtl" context="{'group_by':'location_id'}"/>
                    <filter string="Dest. Location" name="dest_location" icon="terp-gtk-jump-to-ltr"  context="{'group_by':'location_dest_id'}"/>
                    <separator orientation="vertical"/>
                    <filter string="Type" name="group_type" icon="terp-stock_symbol-selection" context="{'group_by':'type'}" help="Shipping type specify, goods coming in or going out"/>
                    <filter string="State" name="group_state" icon="terp-stock_effects-object-colorize" context="{'group_by':'state'}"/>
                    <filter string="Reason Type" name="group_reason_type_id" icon="terp-folder-orange" context="{'group_by':'reason_type_id'}"/>
                    <separator orientation="vertical"/>
                    <filter string="Company" name="group_state" icon="terp-stock_effects-object-colorize" context="{'group_by':'company_id'}" groups="base.group_multi_company"/>
                    <separator orientation="vertical"/>
                    <filter string="Day" icon="terp-go-today" context="{'group_by':'day'}" help="Day Planned"/>
                    <filter string="Month" icon="terp-go-month" context="{'group_by':'date'}" help="Month Planned"/>
                    <filter string="Year" icon="terp-go-year" context="{'group_by':'year'}"  help="Year Planned"/>
                </group>
            </search>
        </field>
    </record>

</data>
</openerp>
