<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
    
    	<record id="view_return_claim_form" model="ir.ui.view">
            <field name="name">return.claim.form</field>
            <field name="model">return.claim</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
            	<form string="Claim">
            		<group col="6" colspan="4">
            			<group col="4" colspan="4">
	                        <field name="name" />
	                        <field name="po_so_return_claim" />
	                        <field name="picking_id_return_claim"
	                        	domain="[('state', '=', 'done'), '|', '&amp;', ('type', 'in', ['out', 'in']), ('subtype', '=', 'standard'), '&amp;', '&amp;', ('type', '=', 'out'), ('subtype', '=', 'picking'), ('backorder_id', '!=', False)]"
	                        	attrs="{'readonly': [('contains_event_return_claim', '=', True)]}" />
	                        <field name="partner_id_return_claim"
	                        	attrs="{'readonly': [('contains_event_return_claim', '=', True)]}" />
	                        <field name="type_return_claim"
	                        	attrs="{'readonly': [('contains_event_return_claim', '=', True)]}" />
	                        <field name="category_return_claim" />
                        </group>
                        <group col="2" colspan="1">
                        	<field name="creation_date_return_claim" />
                        	<field name="from_picking_wizard_return_claim" />
                        	<field name="contains_event_return_claim" />
                        </group>
                    </group>
                    <notebook colspan="4">
                    	<page string="Events">
                    		<field name="event_ids_return_claim" mode="tree,form" nolabel="True" widget="one2many_list" colspan="4">
                    			<form string="Event">
				                    <group col="6" colspan="4">
				            			<notebook colspan="4">
				            				<page string="Event">
				           						<field name="name" invisible="True" />
				           						<field name="creation_date_claim_event" />
						                        <field name="type_claim_event" />
					                        </page>
					                        <page string="Notes">
					                        	<field name="description_claim_event" nolabel="True" />
					                        </page>
				            			</notebook>
				            			<group col="5" colspan="2">
					                    	<field name="state" colspan="3" />
					                    </group>
				                    </group>
				            	</form>
                    			<tree string="Events" editable="top" hide_new_button="True">
				            		<field name="name" invisible="True" />
				            		<field name="order_claim_event" invisible="True" />
				            		<field name="type_claim_event" />
				            		<field name="location_id_claim_event" />
				            		<field name="creation_date_claim_event" />
				            		<field name="state" />
				            		<field name="hidden_state" invisible="True" />
				            		<button name="do_process_event" type="object" string="Add an Event" icon="gtk-go-forward"
										attrs="{'invisible': [('hidden_state', '=', 'done')]}" />
				            	</tree>
                    		</field>
                    		<group colspan="3" col="3" />
                    		<button name="add_event" type="object" string="Add an Event" icon="gtk-add"
                    			attrs="{'readonly': [('type_return_claim', '=', 'transport')]}" />
                    	</page>
                    	<page string="Products">
                    		<field name="default_src_location_id_return_claim" />
                    		<field name="product_line_ids_return_claim" mode="tree,form" nolabel="True" widget="one2many_list" colspan="4">
                    			<tree string="Products" editable="top">
				            		<field name="name" />
	           						<field name="product_id_claim_product_line" />
	           						<field name="asset_id_claim_product_line" />
	           						<field name="composition_list_id_claim_product_line" />
	           						<field name="qty_claim_product_line" />
	           						<field name="uom_id_claim_product_line" />
	           						<field name="lot_id_claim_product_line" />
	           						<field name="expiry_date_claim_product_line" />
	           						<field name="src_location_id_claim_product_line" />
	           						<field name="stock_move_id_claim_product_line" invisible="False" />
				            	</tree>
                    		</field>
                    	</page>
                    	<page string="Description">
                    		<field name="description_return_claim" nolabel="True" />
                    	</page>
                    	<page string="Follow Up">
                    		<field name="follow_up_return_claim" nolabel="True" />
                    	</page>
                    </notebook>
                    <group col="5" colspan="2">
                    	<field name="state" colspan="3" />
                    </group>
                    <group col="7" colspan="2">
                    	<button name="mark_as_completed" string="Mark as Completed" type="object" icon="gtk-go-forward" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('active', '=', False)]}" />
                   	</group>
            	</form>
            </field>
		</record>
		
		<record id="view_return_claim_tree" model="ir.ui.view">
            <field name="name">return.claim.tree</field>
            <field name="model">return.claim</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
            	<tree string="Claim">
            		<field name="name" />
            		<field name="creation_date_return_claim" />
            		<field name="state" />
            	</tree>
            </field>
		</record>
		
		<record id="view_return_claim_filter" model="ir.ui.view">
            <field name="name">return.claim.filter</field>
            <field name="model">return.claim</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Claim">
                    <filter icon="terp-document-new" name="draft" string="Draft" domain="[('state','=','draft')]" separator="1" />
                    <filter icon="terp-camera_test" name="completed" string="Completed" domain="[('state','=', 'completed')]" separator="1" />
                    <filter icon="terp-dialog-close" name="done" string="Closed" domain="[('state','=','done')]" />
                    <separator orientation="vertical" />
                    <filter icon="gtk-missing-image" name="inactive" string="Show Inactive" domain="[]" context="{'active_test': False}" separator="1" />
                    <separator orientation="vertical" />
                    <field name="state" select="1" />
					<newline />
                  	<group expand="0" string="Group By..." colspan="4" col="10" groups="base.group_extended">
	                    <filter string="State" icon="gtk-execute" domain="[]" context="{'group_by':'state'}"/>
	                    <separator orientation="vertical"/>
	                    <filter string="Creation Date" icon="terp-go-month" domain="[]" context="{'group_by':'creation_date_return_claim'}"/>
                	</group>
              	</search>
            </field>
        </record>
		
		<record id="return_claim_action" model="ir.actions.act_window">
			<field name="name">Claim</field>
			<field name="res_model">return.claim</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[]</field>
			<field name="context">{}</field>
			<field name="search_view_id" ref="view_return_claim_filter" />
		</record>
		
		<menuitem id="return_claim" name="Claim" parent="product_attributes.menu_main_product" sequence="15" />
		<menuitem action="return_claim_action" id="return_claim_menu" parent="return_claim" sequence="1" />
    
    </data>
</openerp>
