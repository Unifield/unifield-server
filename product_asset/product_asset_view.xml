<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>


		<!--
			this is the stock move visible on the dashboard of warehouse <record
			id="view_move_form" model="ir.ui.view"> <field
			name="name">stock.move.form</field> <field
			name="model">stock.move</field> <field name="type">form</field>
			<field name="inherit_id" ref="stock.view_move_form" /> <field
			name="arch" type="xml"> <data> <button name="%(stock.move_scrap)d"
			position="after"> <field name="asset_id" domain="[('product_id', '=',
			product_id)]" /> </button> </data> </field> </record>
		-->

		<!-- internal moves -->
		<record id="view_picking_form" model="ir.ui.view">
			<field name="name">stock.picking.form</field>
			<field name="model">stock.picking</field>
			<field name="type">form</field>
			<field name="inherit_id" ref="stock.view_picking_form" />
			<field name="arch" type="xml">
				<data>

					<xpath expr="//form[@string='Stock Moves']//field[@name='product_id']"
						position="after">
						<field name="asset_id" domain="[('product_id', '=', product_id)]" />
						<!--
							always visible due to openerp bug, attrs does not respond to
							modification from on_change function attrs="{'invisible':
							[('subtype', '!=', 'asset')]}" />
						-->
						<field name="subtype" invisible="True" />
					</xpath>

				</data>
			</field>
		</record>


		<!-- incoming shipments -->
		<record id="view_picking_in_form" model="ir.ui.view">
			<field name="name">stock.picking.in.form</field>
			<field name="model">stock.picking</field>
			<field name="type">form</field>
			<field name="inherit_id" ref="stock.view_picking_in_form" />
			<field name="arch" type="xml">
				<data>

					<xpath expr="//form[@string='Stock Moves']//field[@name='product_id']"
						position="after">
						<field name="asset_id" domain="[('product_id', '=', product_id)]" />
						<!--
							always visible due to openerp bug, attrs does not respond to
							modification from on_change function attrs="{'invisible':
							[('subtype', '!=', 'asset')]}" />
						-->
						<field name="subtype" invisible="True" />
					</xpath>

				</data>
			</field>
		</record>


		<record id="view_picking_out_form" model="ir.ui.view">
			<field name="name">stock.picking.out.form</field>
			<field name="model">stock.picking</field>
			<field name="type">form</field>
			<field name="inherit_id" ref="stock.view_picking_out_form" />
			<field name="arch" type="xml">
				<data>

					<xpath expr="//form[@string='Stock Moves']//field[@name='product_id']"
						position="after">
						<field name="asset_id" domain="[('product_id', '=', product_id)]" />
						<!--
							always visible due to openerp bug, attrs does not respond to
							modification from on_change function attrs="{'invisible':
							[('subtype', '!=', 'asset')]}" />
						-->
						<field name="subtype" invisible="True" />
					</xpath>

				</data>
			</field>
		</record>


		<!--
			inherit: purchase_order_form. model 'purchase.order' does not change
		-->
		<record id="product_normal_form_view" model="ir.ui.view">
			<field name="name">product.normal.form</field>
			<field name="model">product.product</field>
			<field name="type">form</field>
			<field name="inherit_id" ref="product.product_normal_form_view" />
			<field name="arch" type="xml">
				<data>

					<field name="type" position="after">
						<field name="subtype" attrs="{'invisible':[('type','!=','product')]}" />
						<field name="asset_type_id" widget="selection"
							attrs="{'invisible':[('subtype','!=','asset')]}" />


					</field>

					<!--
						<page string="Information" position="after"> <page string="Assets"
						attrs="{'invisible':[('subtype','!=','asset')]}"> <field
						colspan="4" name="asset_ids" nolabel="True" mode="tree,form"
						widget="one2many_list"
						default_get="{'prod_int_code':parent.default_code,
						'prod_int_name': parent.name, 'asset_type_id':
						parent.asset_type_id.id}"> <form string="Asset"> <group
						colspan="4" col="6"> <group colspan="4" col="2"> <separator
						string="Product" colspan="2" /> <field name="prod_int_name" />
						<field name="prod_int_code" /> <field name="name" /> </group>
						<group colspan="2" col="2"> <separator string="Codes" colspan="2"
						/> <field name="asset_code" /> <field name="prod_nomenc_code" />
						</group> <group colspan="4" col="2"> <separator
						string="Characteristics" colspan="2" /> <field
						name="asset_type_id" /> </group> </group> <group colspan="2"
						col="2"> <separator string="HQ Reference" colspan="2" /> <field
						name="hq_local_ref" /> <field name="hq_asset_name" /> <field
						name="hq_serial_nb" /> <field name="hq_brand" /> <field
						name="hq_type" /> <field name="hq_model" /> </group> <group
						colspan="2" col="2"> <separator string="Traceability" colspan="2"
						/> <field name="trac_orig_req_ref" /> <field
						name="trac_orig_mission_code" /> <field name="trac_sourc_ref" />
						<newline /> <field name="trac_arriv_date" /> <field
						name="trac_receipt_place" /> </group> <group colspan="2" col="2">
						<separator string="Invoice" colspan="2" /> <field name="invo_num"
						/> <field name="invo_date" /> <field name="invo_val_curr" />
						<field name="invo_supplier" /> <field name="invo_donator_code" />
						</group> </form> </field> </page> </page>
					-->


				</data>
			</field>
		</record>


		<act_window id="product_2_assets_normal_link" context="{}"
			domain="[('product_id', '=', active_id)]" name="Assets" res_model="product.asset"
			src_model="product.product" />

		<!--
			Main asset form
		-->
		<record id="asset_normal_form_view" model="ir.ui.view">
			<field name="name">asset.normal.form</field>
			<field name="model">product.asset</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Asset">

					<group colspan="4" col="6">
						<group colspan="4" col="2">
							<separator string="Asset" colspan="2" />
							<field name="product_id" on_change="onChangeProductId(product_id)" domain="[('subtype', '=', 'asset')]" />
							<field name="name" />
							<field name="asset_code" attrs="{'invisible':[('asset_code', '=', False)], 'readonly':[('asset_code', '!=', False)]}"/>
							<field name="asset_type_id" />

						</group>
						<group colspan="2" col="2">
							<separator string="MSF Codification" colspan="2" />

							<field name="prod_int_name" />
							<field name="prod_int_code" />
							<field name="prod_nomenc_code" />
						</group>

					</group>

					<group colspan="2" col="2">
						<separator string="HQ Reference" colspan="2" />
						<field name="hq_local_ref" />
						<field name="hq_asset_name" />
						<field name="hq_serial_nb" />
						<field name="hq_brand" />
						<field name="hq_type" />
						<field name="hq_model" />
					</group>
					<group colspan="2" col="2">
						<separator string="Traceability" colspan="2" />
						<field name="trac_orig_req_ref" />
						<field name="trac_orig_mission_code" />
						<field name="trac_sourc_ref" />
						<newline />
						<field name="trac_arriv_date" />
						<field name="trac_receipt_place" />
					</group>

					<group colspan="2" col="2">
						<separator string="Invoice" colspan="2" />
						<field name="invo_num" />
						<field name="invo_date" />
						<field name="invo_val_curr" />
						<field name="invo_supplier" />
						<field name="invo_donator_code" />
					</group>

					<!--
						<group colspan="2" col="2"> <separator string="Events" colspan="2"
						/> <field colspan="4" name="event_ids" nolabel="1"
						mode="tree,form"> <tree string="Events"> <field name="date" />
						<field name="name" /> <field name="event_type" /> </tree> </field>
						</group>
					-->

				</form>
			</field>
		</record>


		<record id="asset_normal_tree_view" model="ir.ui.view">
			<field name="name">asset.normal.tree</field>
			<field name="model">product.asset</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Assets">
					<field name="trac_arriv_date" />
					<field name="asset_code" select="1" />
				</tree>
			</field>
		</record>


		<record id="asset_search_form_view" model="ir.ui.view">
			<field name="name">asset.search.form</field>
			<field name="model">product.asset</field>
			<field name="type">search</field>
			<field name="arch" type="xml">
				<search string="Asset">
					<field name="hq_brand" />
					<field name="hq_type" />
					<field name="hq_model" />
				</search>
			</field>
		</record>


		<record id="asset_normal_action" model="ir.actions.act_window">
			<field name="name">Assets</field>
			<field name="res_model">product.asset</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="search_view_id" ref="asset_search_form_view" />
		</record>

		<menuitem id="base.menu_asset" name="Assets" parent="base.menu_base_partner"
			sequence="10" />
		<menuitem action="asset_normal_action" id="menu_assets"
			parent="base.menu_asset" sequence="1" />


		<act_window id="asset_2_events_normal_link" context="{}"
			domain="[('asset_id', '=', active_id)]" name="Events" res_model="product.asset.event"
			src_model="product.asset" />


		<record id="asset_event_normal_form_view" model="ir.ui.view">
			<field name="name">asset.event.normal.form</field>
			<field name="model">product.asset.event</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Asset Event">

					<group colspan="2" col="2">
						<separator string="Event Information" colspan="2" />
						<field name="date" />
						<field name="name" />
						<field name="asset_id" on_change="onChangeAssetId(asset_id)" />
						<field name="asset_code" />
						<field name="asset_type_id" />
						<field name="prod_int_name" />
						<field name="prod_int_code" />
					</group>

					<group colspan="2" col="2">
						<separator string="Selection" colspan="2" />
						<field name="hq_brand" />
						<field name="hq_model" />
					</group>

					<group colspan="2" col="2">
						<separator string="Other" colspan="2" />
						<field name="location" />
						<field name="proj_code" />
						<field name="event_type" />
						<field name="remark" />
						<field name="state" />
					</group>

				</form>
			</field>
		</record>

		<record id="asset_event_normal_tree_view" model="ir.ui.view">
			<field name="name">asset.event.normal.tree</field>
			<field name="model">product.asset.event</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Asset Events">
					<field name="date" />
					<field name="asset_code" select="1" />
					<field name="prod_int_name" />
					<field name="prod_int_code" />
				</tree>
			</field>
		</record>
		
		
		<record id="asset_event_search_form_view" model="ir.ui.view">
			<field name="name">asset.event.search.form</field>
			<field name="model">product.asset.event</field>
			<field name="type">search</field>
			<field name="arch" type="xml">
				<search string="Asset Event">
					<field name="asset_code" />
					<field name="prod_int_code" />
					<field name="hq_brand" />
					<field name="hq_model" />
					<field name="proj_code" />
				</search>
			</field>
		</record>

		<record id="asset_event_normal_action" model="ir.actions.act_window">
			<field name="name">Asset Events</field>
			<field name="res_model">product.asset.event</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="search_view_id" ref="asset_event_search_form_view" />
		</record>

		<menuitem action="asset_event_normal_action" id="menu_asset_event"
			parent="base.menu_asset" sequence="1" />


		<record id="asset_type_normal_form_view" model="ir.ui.view">
			<field name="name">asset.type.normal.form</field>
			<field name="model">product.asset.type</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Asset Type">

					<group colspan="2" col="2">
						<separator string="Asset Type Information" colspan="2" />
						<field name="name" />
					</group>

				</form>
			</field>
		</record>

		<record id="asset_type_normal_tree_view" model="ir.ui.view">
			<field name="name">asset.type.normal.tree</field>
			<field name="model">product.asset.type</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Asset Types">
					<field name="name" />
				</tree>
			</field>
		</record>

		<record id="asset_type_normal_action" model="ir.actions.act_window">
			<field name="name">Asset Types</field>
			<field name="res_model">product.asset.type</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>

		<menuitem action="asset_type_normal_action" id="menu_asset_type"
			parent="base.menu_asset" sequence="1" />

	</data>
</openerp>
