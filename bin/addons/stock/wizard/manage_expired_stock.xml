<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>
        <record id="manage_expired_stock_form_view" model="ir.ui.view">
            <field name="name">manage.expired.stock.form.view</field>
            <field name="model">manage.expired.stock</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Manage Expired Stock">
                    <separator colspan="4" string="Select the locations" />
                    <field name="location_id" string="Source Location" colspan="2" />
                    <field name="dest_loc_id" string="Destination Location" colspan="2" />
                    <separator colspan="4" string="Parameters" />
                    <field name="bned_date_sel" colspan="2" required="1" />
                    <field name="in_next_x_weeks" colspan="2" attrs="{'invisible': [('bned_date_sel', '!=', 'soon_exp_prod')]}" />
                    <separator colspan="4" string="Actions" />
                    <group col="2" colspan="4">
                        <button name="open_view_expired_expiring_stock" string="View Expired/Expiring products" icon="gtk-go-forward" type="object" attrs="{'invisible': [('bned_date_sel', '!=', 'soon_exp_prod')]}" />
                        <button name="create_int_expired_stock" string="Create Internal Move with expired stock" icon="terp-document-new" type="object" />
                    </group>
                </form>
            </field>
        </record>

        <record id="stock.action_manage_expired_stock" model="ir.actions.act_window">
            <field name="name">Manage Expired Stock</field>
            <field name="res_model">manage.expired.stock</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <menuitem action="stock.action_manage_expired_stock"
                  id="stock.menu_action_manage_expired_stock"
                  parent="stock.menu_stock_inventory_control"
                  sequence="100"/>

        <record id="view_expired_expiring_stock_form" model="ir.ui.view">
            <field name="name">view.expired.expiring.stock.form</field>
            <field name="model">view.expired.expiring.stock</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Select Expired/Expiring products">
                    <field name="v_mng_exp_lines_ids" colspan="4" nolabel="1" mode="tree,form" o2m_selectable="2">
                        <tree string="Expired/Expiring Products" noteditable="1">
                            <field name="product_id" />
                            <field name="prodlot_id" />
                            <field name="expired_date" />
                            <field name="product_qty" />
                            <field name="product_uom" invisible="1" />
                            <button name="unlink" string="Delete" icon="gtk-del" type="object"/>
                        </tree>
                    </field>
                    <group colspan="4" col="3">
                        <button name="del_sel_prod" string="Delete Selected Products" icon="gtk-del" type="object" />
                        <button name="create_int_expired_expiring_stock" string="Add all displayed Products to an Internal Move" icon="terp-document-new" type="object" />
                        <button name="cancel" string="Cancel" icon="gtk-cancel" type="object" />
                    </group>
                </form>
            </field>
        </record>
    </data>
</openerp>
