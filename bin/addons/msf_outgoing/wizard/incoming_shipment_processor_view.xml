<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="stock_incoming_processor_form_view" model="ir.ui.view">
            <field name="name">stock.incoming.processor.form.view</field>
            <field name="model">stock.incoming.processor</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Products to Process">
                    <field name="date" invisible="1" />
                    <field name="linked_to_out"  invisible="1"/>
                    <field name="picking_id" invisible="1" />
                    <field name="display_process_to_ship_button" invisible="1" />
                    <field name="sequence_issue" invisible="1" />
                    <field name="fields_as_ro" invisible="1" />
                    <field name="imp_filename" invisible="1" />
                    <button name="copy_all" type="object" icon="gtk-jump-to" colspan="2" string="Copy all" set_ids="move_ids" attrs="{'invisible': [('imp_filename', '!=', False)]}"/>
                    <button name="uncopy_all" type="object" icon="gtk-undo" colspan="2" string="Clear all" set_ids="move_ids" attrs="{'invisible': [('imp_filename', '!=', False)]}"/>
                    <group name="import_file_lines" string="Import Lines" colspan="4" attrs="{'invisible': [('imp_filename', '!=', False)]}">
                        <button name="launch_simulation" string="Import IN" icon="gtk-execute" colspan="1" type="object" />
                        <button name="launch_simulation_pack" string="Import IN, process IN &amp; pick and pack" icon="gtk-execute" colspan="1" type="object" attrs="{'invisible': [('linked_to_out', '=', False)]}"/>
                    </group>
                    <field name="contains_dg" invisible="1" />
                    <field name="contains_kc" invisible="1" />
                    <field name="location_dest_active_ok" invisible="1"/>
                    <field name="draft" invisible="1" />
                    <field name="forbidden_product" nolabel="1" widget="html_text" colspan="4"/>
                    <group colspan="4" attrs="{'invisible': ['|', ('contains_dg', '=', True), ('contains_kc', '=', False)]}">
                        <html>
                            <p style="text-align: center; v-align: middle;">
                                    <img src="/openerp/static/images/stock/gtk-dialog-warning.png" height="12" width="12" />
                                        <span><translate>You receive heat sensitive products, please refer to the appropriate procedure.</translate></span>
                                    <img src="/openerp/static/images/stock/gtk-dialog-warning.png" height="12" width="12" />
                            </p>
                        </html>
                    </group>
                    <group colspan="4" attrs="{'invisible': ['|', ('contains_kc', '=', True), ('contains_dg', '=', False)]}">
                        <html>
                            <p style="text-align: center; v-align: middle;">
                                    <img src="/openerp/static/images/stock/gtk-dialog-warning.png" height="12" width="12" />
                                        <span><translate>You receive dangerous goods products, please refer to the appropriate procedure.</translate></span>
                                    <img src="/openerp/static/images/stock/gtk-dialog-warning.png" height="12" width="12" />
                            </p>
                        </html>
                    </group>
                    <group colspan="4" attrs="{'invisible': ['|', ('contains_dg', '=', False), ('contains_kc', '=', False)]}">
                        <html>
                            <p style="text-align: center; v-align: middle;">
                                    <img src="/openerp/static/images/stock/gtk-dialog-warning.png" height="12" width="12" />
                                        <span><translate>You receive heat sensitive and dangerous goods products, please refer to the appropriate procedure.</translate></span>
                                    <img src="/openerp/static/images/stock/gtk-dialog-warning.png" height="12" width="12" />
                            </p>
                        </html>
                    </group>
                    <group colspan="4" attrs="{'invisible': [('sequence_issue', '=', False)]}">
                        <html>
                            <p style="text-align: center; v-align: middle;color:#f27d0c; font-weight:bold; font-size:1.2em">
                                    <img src="/openerp/static/images/stock/gtk-dialog-warning.png" height="12" width="12" />
                                        <span><translate>Please correct red lines before processing or do not process to ship</translate></span>
                                    <img src="/openerp/static/images/stock/gtk-dialog-warning.png" height="12" width="12" />
                            </p>
                        </html>
                    </group>
                    <separator colspan="4" string="Move lines" />
                    <field name="move_ids" mode="tree" context="{'display_process_to_ship_button': display_process_to_ship_button}"
                        colspan="4" nolabel="1" />
                    <group colspan="4" col="4" name="claim">
                        <separator string="Register a Claim to the Supplier for selected products." colspan="4" />
                        <notebook colspan="4">
                            <page string="Claim">
                                <field name="register_a_claim" on_change="onchange_register_a_claim(register_a_claim, onchange_dest_type)"/>
                                <field name="claim_in_has_partner_id" invisible="True"/>
                                <field name="claim_partner_id"
                                       attrs="{'required': [('register_a_claim', '=', True)]}"
                                       readonly="1"
                                       context="{'search_default_supplier': True}"/>
                                <field name="claim_type"
                                       attrs="{'readonly': [('register_a_claim', '=', False)], 'required': [('register_a_claim', '=', True)]}"
                                       on_change="onchange_claim_type(claim_type)"/>
                                <field name="claim_replacement_picking_expected"
                                       attrs="{'invisible': [('claim_type', 'not in', ('accept', 'scrap', 'quarantine', 'return', 'missing'))],
                                               'readonly': [('claim_type', 'not in', ('accept', 'scrap', 'quarantine', 'return'))]}"/>
                            </page>
                            <page string="Claim Description">
                                <field name="claim_description" colspan="4" nolabel="True"/>
                            </page>
                        </notebook>
                    </group>
                    <group colspan="9" col="10" name="actions">
                        <label colspan="2" string=" " />
                        <group colspan="1" col="2">
                            <field name="physical_reception_date" bold="1" />
                        </group>
                        <label colspan="4" string=" " />
                        <separator string="Actions" colspan="9" />
                        <group colspan="2" col="4">
                            <field name="dest_type"
                                on_change="onchange_dest_type(dest_type, picking_id)"
                                />
                            <field name="direct_incoming"
                                attrs="{'invisible': [('dest_type', 'not in', ['default', 'to_stock'])], 'readonly': [('register_a_claim', '=', True)]}"
                                />
                        </group>
                        <button name="do_reset" type="object" string="Reset" attrs="{'invisible':[('draft','!=',True)]}" icon="gtk-go-forward" />
                        <button name="do_save_draft" type="object" string="Save as draft" icon="gtk-go-forward" />
                        <button special="cancel" string="Cancel" icon="gtk-cancel" />
                        <button name="do_incoming_shipment" type="object" string="Process" icon="gtk-go-forward" attrs="{'invisible': [('location_dest_active_ok', '!=', True)]}" />
                        <button name="do_incoming_shipment" type="object" string="Process" icon="gtk-go-forward" attrs="{'invisible': [('location_dest_active_ok', '!=', False)]}"
                            confirm="Warning the final destination location of these goods is no longer active, IN will be processed as normal but please check and process the Internal move created after manually. Continue ?" />
                        <button name="process_to_ship" attrs="{'invisible': ['|', ('display_process_to_ship_button', '=', False), ('register_a_claim', '=', True)]}" type="object" string="Process to ship" icon="gtk-goto-last" />
                    </group>
                </form>
            </field>
        </record>

        <record id="stock_incoming_processor_internal_warning_form_view" model="ir.ui.view">
            <field name="name">stock.incoming.processor.internal.warning.form.view</field>
            <field name="model">stock.incoming.processor</field>
            <field name="type">form</field>
            <field name="priority" eval="99" />
            <field name="arch" type="xml">
                <form string="Warning !">
                    <label> </label>
                    <group colspan="2" col="2">
                        <html>
                            <div style="align: center">
                                <p style="font-size:14px;text-align: center; v-align: middle;">
                                    <translate>Warning! There is a risk of producing inconsistent data if you process this Incoming Shipment before it receives the delivery details and is changed into status "Available Shipped" after synchronization. To avoid major misalignment please proceed only if you can do a full reception.</translate>
                                </p>
                            </div>
                        </html>
                    </group>
                    <label> </label>
                    <separator colspan="4" string="Actions" />
                    <button special="cancel" string="Close Window" icon="gtk-cancel" colspan="2" />
                    <button name="force_process" string="Process anyway" icon="gtk-go-forward" colspan="2" type="object" />
                </form>
            </field>
        </record>

        <record id="stock_move_in_processor_tree_view" model="ir.ui.view">
            <field name="name">stock.move.in.processor.tree.view</field>
            <field name="model">stock.move.in.processor</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Moves"
                    editable="top"
                    hide_delete_button="1"
                    hide_new_button="1"
                    colors="red:integrity_status!='empty'"
                    editable_style="new"
                    >
                    <!-- Invisible fields -->
                    <field name="type_check" invisible="1" />
                    <field name="ordered_uom_category" invisible="1" />
                    <field name="kit_check" invisible="1" />
                    <field name="cost_as_ro" invisible="1" />
                    <field name="asset_check" invisible="1" />
                    <field name="location_id" invisible="1" />
                    <field name="ssl_check" invisible="1" widget="null_boolean" />
                    <!-- Visible fields -->
                    <field name="line_number" string="Line" />
                    <field name="product_id" string="Product" />
                    <field name="comment" readonly="1" />
                    <field name="batch_location_ids" invisible="1" />
                    <button name="open_change_product_wizard"
                        type="object"
                        icon="gtk-convert"
                        string="Change Product"
                        attrs="{'invisible': [('fields_as_ro', '=', True)]}"
                        />
                    <field name="asset_id"
                        domain="[('product_id', '=', product_id)]"
                        attrs="{'readonly': [('asset_check', '=', False)], 'required': [('location_supplier_customer_mem_out', '=', True), ('asset_check', '=', True)]}"
                        />
                    <field name="composition_list_id"
                        domain="[('composition_product_id', '=', product_id), ('state', '=', 'completed'), ('composition_type', '=', 'real')]"
                        attrs="{'readonly': [('kit_check', '=', False)]}"
                        />
                    <field name="ordered_quantity" />
                    <field name="ordered_uom_id" />
                    <field name="quantity"
                        string="Quantity to process"
                        on_change="onchange_uom_qty(uom_id, quantity)"
                        />
                    <field name="uom_id" readonly="1" />
                    <field name="from_pack" readonly="1" />
                    <field name="to_pack" readonly="1" />
                    <field name="filter_pack" filter_selector="1" invisible="1" />
                    <field name="total_volume" readonly="1" />
                    <field name="total_weight" readonly="1" />
                    <field name="ppl_name" readonly="1" filter_selector="1" />
                    <field name="packing_list" readonly="1" filter_selector="1" />
                    <button name="open_split_wizard"
                        type="object"
                        icon="terp-stock_effects-object-colorize"
                        string="Split"
                        attrs="{'invisible': [('fields_as_ro', '=', True)]}"
                        />
                    <field name="prodlot_id"
                        domain="[('product_id', '=', product_id), ('check_type', '=', True)]"
                        context="{'location_id': batch_location_ids, 'location_dive': True, 'product_id': product_id, 'expiry_date_check': exp_check, 'batch_number_check': lot_check}"
                        attrs="{'readonly': [('lot_check', '=', False), ('exp_check', '=', False)]}"
                        on_change="change_lot(prodlot_id)"
                        />
                    <field name="expiry_date"
                        attrs="{'readonly': ['|', '&amp;', ('lot_check', '=', False), ('exp_check', '=', False), '&amp;', ('lot_check', '=', True), ('exp_check', '=', True)]}"
                        on_change="change_expiry(expiry_date, product_id, type_check)" />
                    <field name="lot_check" />
                    <field name="exp_check" />
                    <field name="kc_check" widget="null_boolean" />
                    <field name="dg_check" widget="null_boolean" />
                    <field name="np_check" widget="null_boolean" />
                    <field name="cost" attrs="{'readonly': [('cost_as_ro', '=', True)]}" />
                    <field name="currency" />
                    <field name="integrity_status" string="" />
                </tree>
            </field>
        </record>

        <record id="incoming_shipment_processor_step2_form_view" model="ir.ui.view">
            <field name="name">stock.incoming.processor.step2.form.view</field>
            <field name="model">stock.incoming.processor</field>
            <field name="type">form</field>
            <field name="priority">17</field>
            <field name="arch" type="xml">
                <form string="PPL Information - Step 2">
                    <separator colspan="4" string="Pack families" />
                    <field name="family_ids" mode="tree" colspan="4" nolabel="1" />
                    <group colspan="4" col="6" name="actions">
                        <separator string="Actions" colspan="6" />
                        <label colspan="4"> </label>
                        <button name="do_in_back" type="object" string="Previous" icon="gtk-go-back" />
                        <button name="do_in_step2" type="object" string="Process" icon="gtk-go-forward" />
                    </group>
                </form>
            </field>
        </record>

        <record id="in_family_processor_tree_view" model="ir.ui.view">
            <field name="name">in.family.processor.tree.view</field>
            <field name="model">in.family.processor</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Moves" editable="top" hide_delete_button="1" hide_new_button="1" colors="red:integrity_status!='empty'">
                    <field name="packing_list" readonly="1" />
                    <field name="from_pack" readonly="1"/>
                    <field name="to_pack" readonly="1"/>
                    <field name="pack_type" on_change="onchange_pack_type(pack_type)"/>
                    <field name="length"/>
                    <field name="width"/>
                    <field name="height"/>
                    <field name="weight" default_focus="1" />
                    <field name="integrity_status" string=""/>
                </tree>
            </field>
        </record>

    </data>
</openerp>
