<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>

        <record id="manual_import_job_search_view" model="ir.ui.view">
            <field name="name">manual.import.job.search.view</field>
            <field name="model">manual.import.job</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Import job requests">
                    <filter icon="terp-document-new" string="Draft" name="draft" domain="[('state', '=', 'draft')]" help="Draft jobs" /> 
                    <filter icon="terp-gnome-cpu-frequency-applet+" string="In progress" name="in_progress" domain="[('state', '=', 'in_progress')]" help="In progress jobs" /> 
                    <filter icon="terp-dialog-close" string="Done" name="done" domain="[('state', '=', 'done')]" help="Done jobs" /> 
                    <filter icon="terp-emblem-important" string="Exception" name="exceptions" domain="[('state', '=', 'error')]" help="Jobs with error" /> 
                    <separator orientation="vertical" />
                    <field name="name" />
                    <field name="function_id" />
                </search>
            </field>
        </record>

        <record id="manual_import_job_tree_view" model="ir.ui.view">
            <field name="name">manual.import.job.tree.view</field>
            <field name="model">manual.import.job</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Import job reports">
                    <field name="name" />
                    <field name="function_id" />
                    <field name="state" />
                </tree>
            </field>
        </record>

        <record id="manual_import_job_form_view" model="ir.ui.view">
            <field name="name">manual.import.job.form.view</field>
            <field name="model">manual.import.job</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Import job report">
                    <separator colspan="4" string="Import file" />
                    <field name="file_to_import" filename="filename" required="1" />
                    <field name="function_id" required="1" widget="selection" attrs="{'readonly': [('state', 'in', ['done', 'error'])]}" />
                    <field name="filename" invisible="1" />
                    <group colspan="4" states='done,error'>
                        <separator colspan="4" string="Import results" />
                        <field name="nb_processed_records" />
                        <field name="nb_rejected_records" />
                        <field name="comment" colspan="4" />
                        <separator colspan="4" string="States" />
                    </group>
                    <field name="state" />
                    <button name="process_import" type="object" states="draft" string="Process import" icon="gtk-execute" />
                    <button name="process_import_bg" type="object" states="draft" string="Process in background" icon="gtk-execute" />
                </form>
            </field>
        </record>

        <record id="manual_import_job_info_view" model="ir.ui.view">
            <field name="name">manual.import.job.info.view</field>
            <field name="model">manual.import.job</field>
            <field name="type">form</field>
            <field name="priority" eval="99" />
            <field name="arch" type="xml">
                <form string="Status of the import" hide_new_button="1" hide_delete_button="1">
                    <label> </label>                                                
                    <group colspan="2" col="2">                                     
                        <html>                                                      
                            <div style="align: center">                             
                                <p style="font-size:14px;align:center">             
                                    Your import demand will be treated quickly.<br />
                                </p>                                                
                                <p style="font-size:14px;align:center">             
                                    You can check the state of your import in menu TOOLS > Manual imports.<br />
                                </p>                                                                                            
                            </div>                                                  
                        </html>                                                     
                    </group>                                                        
                    <label> </label>                                                
                </form>
            </field>
        </record>

        <record id="manual_import_job_action" model="ir.actions.act_window">
            <field name="name">Manual imports</field>
            <field name="res_model">manual.import.job</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem
            id="manual_import_job_menu"
            action="manual_import_job_action"
            parent="object_query.menu_preferences" />

    </data>
</openerp>
