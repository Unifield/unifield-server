Feature: SSL Complete Supply flow from Project IR to Ext CU via FO (with split)

@supply @irfoextcu
Scenario: SSL Complete Supply flow from Project IR to Ext CU via FO (with split)

   
#PARAMETRIZATION: 
# HQ1C1P1: need to have Ext CU Sara as external Consumption Unit
# HQ1C1P1: need to have 100000 quantity of ADAPCABL2S- in LOG
# HQ1C1: need to have 100000 quantity of ADAPCABL1S- in LOG


   ###################################################################
    ## CREATE AN IR IN HQ1C1P1 (reference in IR_REFERENCE)
    ###################################################################

	
# LINE 2

    I log into instance "HQ1C1P1"

    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click on "New"
    I fill "Requestor" with "LogCoo"
    I fill "Location Requestor" with "Ext CU Sara"
    I fill "Requested date" with "30/May/2016"
	
   # Add multiple products at the same time
	I click on "Add multiple lines" and open the window
	I click on "Add" and open the window
	I fill "Code" with "ADAP"
	I click on "Search"
	I click "checkbox" on line:
	 | CODE        |
	 | ADAPCOLABAG |
	 | ADAPCOLALOK |
	 | ADAPDCDRB-- |
	 | ADAPMEMK1-- |	 
	 
	I click on "Select" and close the window
	I click "Edit" on line:
	 | CODE        |
	 | ADAPCOLABAG |
	I fill "20" within column "QTY"
	I validate the line
	I click "Edit" on line:
	 | CODE        |
	 | ADAPCOLALOK |
	I fill "20" within column "QTY"
	I validate the line
	I click "Edit" on line:
	 | CODE        |
	 | ADAPDCDRB-- |
	I fill "20" within column "QTY"
	I validate the line

	I click "Edit" on line:
	 | CODE        |
	 | ADAPMEMK1-- |
	I fill "20" within column "QTY"
	I validate the line
    I click on "Add products" and close the window

    I store "Order Reference" in "IR_REFERENCE"
	
# LINE 3
	
    I click on "Validate lines"	
		
	I should see in the main table the following data:
        | PRODUCT                                                         | STATE     | QUANTITY (UOM)| 
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG                    | Validated |    20.00      |
        | [ADAPCOLALOK] (laptop computer) LOCK, with key, Kensington slot | Validated |    20.00      |
        | [ADAPDCDRB--] DISK, CD-R (recordable), data, cakebox of 25      |	Validated |    20.00      |	
		| [ADAPMEMK1--] MEMORY KEY, USB                                   | Validated |    20.00      |

	I should see "Validated" in "Order State"
	
	
    ###################################################################
    ## SOURCE THE IR TO HQ1C1 (PO)
    ###################################################################

# LINE 4
	
	I click on menu "Orders Sourcing Tool"
	I fill "Order" with "{{IR_REFERENCE}}"
	I click on "Search"
	
    I tick all the lines
    I click "Source lines" in the side panel and open the window

    I fill "Supplier" with "HQ1C1"	
    I click on "Save & source" and close the window
	

    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
	I fill "ORDER REFERENCE" with "{{IR_REFERENCE}}"
	
	I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |
	
	I should see in the main table the following data:
        | PRODUCT                                                         | STATE   | 
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG                    | Sourced |
        | [ADAPCOLALOK] (laptop computer) LOCK, with key, Kensington slot | Sourced |
        | [ADAPDCDRB--] DISK, CD-R (recordable), data, cakebox of 25      |	Sourced |	
		| [ADAPMEMK1--] MEMORY KEY, USB                                   | Sourced |

		
	I should see "Sourced" in "Order State"
	
    ###################################################################
    ## Validate THE PO (reference in PO_REFERENCE)
    ###################################################################

# LINE 5

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I toggle on "DRAFT"

    I click "Edit" on line:
        | SOURCE DOCUMENT    |
        | *{{IR_REFERENCE}}* |

	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                              |STATE  | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                    | Draft |
        | ADAPCOLALOK  |(laptop computer) LOCK, with key, Kensington slot | Draft |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25     | Draft |
        | ADAPMEMK1--  | MEMORY KEY, USB                                  | Draft |
		
	I click on "Analytical Distribution" and open the window
	I click on "New"
	I fill "SUP" within column "DESTINATION"
	I fill "HT101" within column "COST CENTER"
	I validate the line
	I click on "Save" and close the window
	
	I click on "Validate lines"
	
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                              |STATE      | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                    | Validated |
        | ADAPCOLALOK  |(laptop computer) LOCK, with key, Kensington slot | Validated |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25     | Validated |
        | ADAPMEMK1--  | MEMORY KEY, USB                                  | Validated |
		
    I should see "Validated" in "Order State"		
	I store "Order Reference" in "PO_REFERENCE_1"	
			
		  
    ####################
    ## SYNCHRONIZATION
    ###################


# LINE6 & 7	
    I synchronize "HQ1C1P1"
    I log out
    I synchronize "HQ1C1"
	I log into instance "HQ1C1"
	
  
    I open tab menu "ORDERS"
    I click on menu "Field Orders"
    I toggle on "Draft"

	I click "Edit" on line:
        | CUSTOMER REFERENCE  |
        | *{{PO_REFERENCE_1}} |	

	   
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                              |STATE  | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                    | Draft |
        | ADAPCOLALOK  |(laptop computer) LOCK, with key, Kensington slot | Draft |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25     | Draft |
        | ADAPMEMK1--  | MEMORY KEY, USB                                  | Draft |
		

	I store "Order Reference" in "FO_REFERENCE"	

# LINE 8	
	I click "Validate" on line:
        | PRODUCT CODE | PRODUCT DESCRIPTION           |STATE  | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG | Draft |

	I click "Validate" on line:
        | PRODUCT CODE | PRODUCT DESCRIPTION                              |STATE  | 
        | ADAPCOLALOK  |(laptop computer) LOCK, with key, Kensington slot | Draft |	
	
	I click "Validate" on line:
        | PRODUCT CODE | PRODUCT DESCRIPTION                          |STATE  | 
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Draft |	
		
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                              |STATE      | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                    | Validated |
        | ADAPCOLALOK  |(laptop computer) LOCK, with key, Kensington slot | Validated |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25     | Validated |
        | ADAPMEMK1--  | MEMORY KEY, USB                                  | Draft     |

	I click on "Save"	
	I should see "Draft-p" in "State"	
		
#LINE 9
				
	I click on menu "Orders Sourcing Tool"
	I fill "Order" with "{{FO_REFERENCE}}"
	I click on "Search"

	I click "checkbox" on line:
	 | PRODUCT       |
	 | *ADAPCOLABAG* |
	 | *ADAPCOLALOK* |
	 | *ADAPDCDRB--* |
	 
    I click "Source lines" in the side panel and open the window

    I fill "Supplier" with "MSF supply"	
    I click on "Save & source" and close the window	

	
    I click on menu "Field Orders"
	I click "Edit" on line:
        | ORDER REFERENCE   |
        | *{{FO_REFERENCE}} |	

	   
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                              |STATE    | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                    | Sourced |
        | ADAPCOLALOK  |(laptop computer) LOCK, with key, Kensington slot | Sourced |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25     | Sourced |
        | ADAPMEMK1--  | MEMORY KEY, USB                                  | Draft   |
		

# LINE 10

		
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "SOURCE DOCUMENT" with "{{FO_REFERENCE}}"

    I click "Search" until I see:
        | SOURCE DOCUMENT  |
        | {{FO_REFERENCE}} |
    I click "Edit" on line:
        | SOURCE DOCUMENT        |
        | {{FO_REFERENCE}} |	
		
	I click on "Validate lines"
	
	I store "Order Reference" in "PO_REF_COO"
	
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                              |STATE      | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                    | Validated |
        | ADAPCOLALOK  |(laptop computer) LOCK, with key, Kensington slot | Validated |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25     | Validated |
	   
	I click on "Save"
	I should see "Validated" in "Order State"	

	
	I open tab menu "ORDERS"   
    I click on menu "Field Orders"
	I click "Edit" on line:
        | ORDER REFERENCE   |
        | *{{FO_REFERENCE}} |	

	   
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                              |STATE      | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                    | Sourced-v |
        | ADAPCOLALOK  |(laptop computer) LOCK, with key, Kensington slot | Sourced-v |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25     | Sourced-v |
        | ADAPMEMK1--  | MEMORY KEY, USB                                  | Draft     |
	   
# LINE 11 & 12

    I synchronize "HQ1C1"
    I log out
    I synchronize "HQ1C1P1"
	I log into instance "HQ1C1P1"	   
	 	

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REFERENCE_1}}"

    I click on "Search"
    I click "Edit" on line:
        | REFERENCE          |
        | {{PO_REFERENCE_1}} |	
	
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                              |STATE      | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                    | Sourced-s |
        | ADAPCOLALOK  |(laptop computer) LOCK, with key, Kensington slot | Sourced-s |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25     | Sourced-s |
        | ADAPMEMK1--  | MEMORY KEY, USB                                  | Validated |

    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
	I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |

	I should see in the main table the following data:
        | PRODUCT                               |STATE      | 
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG                    | Sourced-s |
        | [ADAPCOLALOK] (laptop computer) LOCK, with key, Kensington slot | Sourced-s |
		| [ADAPDCDRB--] DISK, CD-R (recordable), data, cakebox of 25     | Sourced-s |
        | [ADAPMEMK1--] MEMORY KEY, USB                                  | Sourced-v |

    I should see "Sourced-p" in "Order state"
	
    ####################
    ## SYNCHRONIZATION
    ###################
	
    I synchronize "HQ1C1P1"
    I synchronize "HQ1C1"
    I log out
    I log into instance "HQ1C1"	
	
# LINE 13

	
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REF_COO}}"

    I click on "Search"
    I click "Edit" on line:
        | REFERENCE      |
        | {{PO_REF_COO}} |	


    I click on "Import PO confirmation"
    I click on "add attachment"
    I fill "File to import" with "TC2 SSL VI import.xml"
	
    I click on "Simulate"
	I should see "Simulation done" in "State"
	I open tab "Details"

	I should see in the main table the following data:
      | PRODUCT                                                          |CHG  | PRODUCT_2                                                  | QTY_2 |                             
      | [ADAPCOLABAG] (laptop computer) CARRYING BAG                     |     | [ADAPCOLABAG] (laptop computer) CARRYING BAG               | 20.00 |
	  | [ADAPCOLALOK] (laptop computer) LOCK, with key, Kensington slot  |     | [ADAPMOUSOUS] MOUSE, optical, USB port                     | 15.00 |
	  | [ADAPDCDRB--] DISK, CD-R (recordable), data, cakebox of 25       | Del | [ADAPDCDRB--] DISK, CD-R (recordable), data, cakebox of 25 | 20.00 |
	  |                                                                  | New | [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB              | 25.00 |
	
	I click on "Import"

    I click "Edit" on line and open the window:
      | PRODUCT CODE |
      | ADAPKBDAUSB  |

    I click on button_id "order_line/select_fo_select" and open the window
    I fill "ORDER REFERENCE" with "{{FO_REFERENCE}}"
	I click on "Search"
    I click "option" on line and close the window:
       | ORDER REFERENCE |
       | *{{FO_REFERENCE}}* |

    # testfield patch needed
    I fill "Order in sync. instance" with "{{IR_REFERENCE}}"

    I click on "Save & Close" and close the window


    # ref should be added on new line
#Extra lines to compensate for impossibility to import new lines
#    I click on "New" and open the window
#	I fill "Product" with "[ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB"
#    I click on button_id "order_line/select_fo_select" and open the window
#    I fill "ORDER REFERENCE" with "{{FO_REFERENCE}}"
#	I click on "Search"
#    I click "option" on line and close the window:
#       | ORDER REFERENCE |
#       | *{{FO_REFERENCE}}* |

#	I fill "Quantity" with "25.00"
#    I fill "Order in sync. instance" with "{{IR_REFERENCE}}"
#	I click on "Save & Close" and close the window

#    I click "Delete" on line:
#      | PRODUCT CODE |
#      | ADAPDCDRB--  |

#    I click "Edit" on line and open the window:
#      | PRODUCT CODE |
#      | ADAPCOLALOK |

#    I fill "Product" with "ADAPMOUSOUS"
#    I fill "Quantity" with "15.00"
#    I click on "Save & Close" and close the window

#End of extra lines to compensate for import 
	
	I should see in the main table the following data:
	   | LINE  |  PRODUCT CODE  | PRODUCT DESCRIPTION                          | QUANTITY | STATE       |                       
       |   1   | ADAPCOLABAG    | (laptop computer) CARRYING BAG               |  20.00   | Validated   |
	   |   2   | ADAPMOUSOUS    | MOUSE, optical, USB port                     |  15.00   | Validated   |
       |   3   | ADAPDCDRB--    | DISK, CD-R (recordable), data, cakebox of 25 |  20.00   | Cancelled   |
	   |   4   | ADAPKBDAUSB    | KEYBOARD, AZERTY, external, USB              |  25.00   | Validated-n |

	   
	   
 	I open tab menu "ORDERS"   
    I click on menu "Field Orders"
	I click "Edit" on line:
        | ORDER REFERENCE  |
        | {{FO_REFERENCE}} |	

	   
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                          | STATE     |
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                | Sourced-v |
        | ADAPCOLALOK  |*                                             | Sourced-v |
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
        | ADAPMEMK1--  | MEMORY KEY, USB                              | Draft     |
#	   	| ADAPKBDAUSB  | KEYBOARD, AZERTY, external, USB              | Sourced-n |
# to check with Sarah

# LINE 14

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REF_COO}}"
    I click on "Search"
    I click "Edit" on line:
        | REFERENCE      |
        | {{PO_REF_COO}} |	    		
		
	I click on "Confirm lines"
	
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                          |STATE      | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                | Confirmed |
        | ADAPMOUSOUS  | MOUSE, optical, USB port                     | Confirmed |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
	   	| ADAPKBDAUSB  | KEYBOARD, AZERTY, external, USB              | Confirmed |  
	

	
	I open tab menu "WAREHOUSE"
	I open accordion menu "Warehouse Management"
	I click on menu "Incoming Shipments"

	I click "Edit" on line:
		| PURCHASE ORDER   |
		| *{{PO_REF_COO}}* | 
    I should see in the main table the following data:
        | PRODUCT                                       | STATE     | QUANTITY       | 
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG  | Available |    20.000      |
        | [ADAPMOUSOUS] MOUSE, optical, USB port        | Available |    15.000      |
        | [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB | Available |    25.000      |	

	I open tab menu "ORDERS"   
    I click on menu "Field Orders"
	I click "Edit" on line:
        | ORDER REFERENCE  |
        | {{FO_REFERENCE}} |	

	   
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                          |STATE      | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                | Confirmed |
        | ADAPMOUSOUS  | MOUSE, optical, USB port                     | Confirmed |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
        | ADAPMEMK1--  | MEMORY KEY, USB                              | Draft     |
	   	| ADAPKBDAUSB  | KEYBOARD, AZERTY, external, USB              | Confirmed |  
	
	I should see "Draft-p" in "State"



#LINE 15	
	I click "Delete" on line:
       | PRODUCT CODE | PRODUCT DESCRIPTION |STATE | 
       | ADAPMEMK1--  | MEMORY KEY, USB     | Draft|

	   
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                          |STATE      | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                | Confirmed |
        | ADAPMOUSOUS  | MOUSE, optical, USB port                     | Confirmed |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
        | ADAPMEMK1--  | MEMORY KEY, USB                              | Cancelled |
	   	| ADAPKBDAUSB  | KEYBOARD, AZERTY, external, USB              | Confirmed |  	

    I click on "Save"
	I should see "Confirmed" in "State"	   

#LINE 16 &17

   ####################
    ## SYNCHRONIZATION
    ###################
	
    I synchronize "HQ1C1"
    I synchronize "HQ1C1P1"
    I log out
    I log into instance "HQ1C1P1"

    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
	I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |
		
 	I should see in the main table the following data:
        | PRODUCT                                                     |STATE      |
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG                | Confirmed |
        | [ADAPMOUSOUS] MOUSE, optical, USB port                      | Confirmed |
		| [ADAPDCDRB--] DISK, CD-R (recordable), data, cakebox of 25  | Cancelled |
        | [ADAPMEMK1--] MEMORY KEY, USB                               | Cancelled |
#	   	| [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB               | Confirmed |
# to check with Sarah

    I should see "Confirmed" in "Order state"


    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REFERENCE_1}}"

    I click on "Search"
    I click "Edit" on line:
        | REFERENCE          |
        | {{PO_REFERENCE_1}} |	    		
	
	I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                          |STATE      | 
       | ADAPCOLABAG  |(laptop computer) CARRYING BAG                | Confirmed |
       | ADAPMOUSOUS  | MOUSE, optical, USB port                     | Confirmed |	
	   | ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
       | ADAPMEMK1--  | MEMORY KEY, USB                              | Cancelled |
	   | ADAPKBDAUSB  | KEYBOARD, AZERTY, external, USB              | Confirmed |  	
	
    I should see "Confirmed" in "Order State"	

	
	I open tab menu "WAREHOUSE"
	I open accordion menu "Warehouse Management"
	I click on menu "Incoming Shipments"

	I click "Edit" on line:
		| PURCHASE ORDER       |
		| *{{PO_REFERENCE_1}}* | 
		
    I should see in the main table the following data:
        | PRODUCT                                       | STATE     |  QUANTITY      |
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG  | Available |    20.000      |
        | [ADAPMOUSOUS] MOUSE, optical, USB port        | Available |    15.000      |
        | [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB | Available |    25.000      |

	I should see "Available" in "State"
	

#LINE 18

    I log into instance "HQ1C1"
	
 	I open tab menu "WAREHOUSE"
	I open accordion menu "Warehouse Management"
	I click on menu "Incoming Shipments"

	I click "Edit" on line:
		| PURCHASE ORDER   |
		| *{{PO_REF_COO}}* | 	


	I click on "Process" and open the window
	I click on "Copy all"	
	I click "Edit" on line:
        | PRODUCT                                       |
        | [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB |

	I fill "0.00" within column "QUANTITY TO PROCESS"
    I validate the line
	
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open

	
    I should see in the main table the following data:
        | PRODUCT                                       | STATE     | QUANTITY      | 
        | [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB | Available |    25.000      |	


		
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REF_COO}}"

    I click on "Search"
    I click "Edit" on line:
        | REFERENCE          |
        | {{PO_REF_COO}} |	    		
	
	I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                          |STATE      | 
       | ADAPCOLABAG  |(laptop computer) CARRYING BAG                | Closed    |
       | ADAPMOUSOUS  | MOUSE, optical, USB port                     | Closed    |	
	   | ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
	   | ADAPKBDAUSB  | KEYBOARD, AZERTY, external, USB              | Confirmed |  	
	
    I should see "Confirmed-p" in "Order State"	
	
	I open tab menu "WAREHOUSE"
	I open accordion menu "Warehouse Management"
	I click on menu "Deliveries|Picking"

	I click "Edit" on line:
        | ORIGIN           |  STATE      |
        | {{FO_REFERENCE}} | Available   |
	
   I should see in the main table the following data:
        | PRODUCT                                                    | STATE         | 
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG               | Available     |
        | [ADAPMOUSOUS] MOUSE, optical, USB port                     | Available     |

#LINE 19

#	I click on "Create Picking..." and open the window
#	I click on "Copy all"
#	I click on "Create Picking" and close the window
	I click on "Validate Picking..." and open the window
	I click on "Copy all"
	I click on "Validate Picking" and close the window

    I click on "Pack..." and open the window
	I click on "Next"
	I click "Edit" on line:
        | FROM P. |
        | 1       |

	I fill "2" within column "Weight P.P [KG]"
	I validate the line

	I click on "Process" and close the window

	I click on "Create Shipment..." and open the window
	I click on "Create Shipment" and close the window

	I click on "Validate"

	I store "Reference" in "SHIPREF_1"	


#LINE 20 & 21

    ####################
    ## SYNCHRONIZATION
    ###################
	
    I synchronize "HQ1C1"
    I synchronize "HQ1C1P1"
    I log out
    I log into instance "HQ1C1P1"	
	
 	I open tab menu "WAREHOUSE"
	I open accordion menu "Warehouse Management"
	I click on menu "Incoming Shipments"

	I should see in the main table the following data:
		| PURCHASE ORDER       | STATE             | 
		| *{{PO_REFERENCE_1}}* | Available	       |	
		| *{{PO_REFERENCE_1}}* | Available Shipped |	

# LINE 22		
	I click "Edit" on line:
		| PURCHASE ORDER       | STATE             | 
		| *{{PO_REFERENCE_1}}* | Available Shipped |	
		
	I should see in the main table the following data:
        | PRODUCT                                      | STATE     | 
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG | Available |
        | [ADAPMOUSOUS] MOUSE, optical, USB port       | Available |		
		
	I click on "Process" and open the window
	I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open


    I click on menu "Deliveries|Delivery Orders"

	I click "Edit" on line:
        | ORIGIN            |
        | {{IR_REFERENCE}}  |

	I should see in the main table the following data:
	    | PRODUCT                                       | State         | 
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG  | Available     |
        | [ADAPMOUSOUS] MOUSE, optical, USB port        | Available     |
        | [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB | Not Available |	

	
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REFERENCE_1}}"

    I click on "Search"
    I click "Edit" on line:
        | REFERENCE          |
        | {{PO_REFERENCE_1}} |	    		
	
	I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                          |STATE      | 
       | ADAPCOLABAG  |(laptop computer) CARRYING BAG                | Closed    |
       | ADAPMOUSOUS  | MOUSE, optical, USB port                     | Closed    |	
	   | ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
       | ADAPMEMK1--  | MEMORY KEY, USB                              | Cancelled |
	   | ADAPKBDAUSB  | KEYBOARD, AZERTY, external, USB              | Confirmed |  	
	
    I should see "Confirmed-p" in "Order State"	

	
    I log into instance "HQ1C1"
	
#LINE 23	
	I open tab menu "WAREHOUSE"
	I open accordion menu "Warehouse Management"
	I click on menu "Incoming Shipments"
		
	I click "Edit" on line:
		| PURCHASE ORDER   | STATE     | 
		| *{{PO_REF_COO}}* | Available |	
		
	I should see in the main table the following data:
        | PRODUCT                                        | STATE     | 
	    | [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB | Available | 	
		
	I click on "Process" and open the window
	I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open
	
	
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REF_COO}}"

    I click on "Search"
    I click "Edit" on line:
        | REFERENCE          |
        | {{PO_REF_COO}} |	    		
	
	I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                          |STATE      | 
       | ADAPCOLABAG  |(laptop computer) CARRYING BAG                | Closed    |
       | ADAPMOUSOUS  | MOUSE, optical, USB port                     | Closed    |	
	   | ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
	   | ADAPKBDAUSB  | KEYBOARD, AZERTY, external, USB              | Closed    |  	
	
    I should see "Closed" in "Order State"	

	
	I open tab menu "WAREHOUSE"
	I open accordion menu "Warehouse Management"
	I click on menu "Deliveries|Picking"

	I click "Edit" on line:
        | ORIGIN           | STATE       |
        | {{FO_REFERENCE}} | Available   |
	
   I should see in the main table the following data:
        | PRODUCT                                                    | STATE     | 
#        | [ADAPCOLABAG] (laptop computer) CARRYING BAG               | Closed    |
#        | [ADAPMOUSOUS] MOUSE, optical, USB port                     | Closed    |
        | [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB              | Available |	
#	    | [ADAPDCDRB--] DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
	

#LINE 24

#	I click on "Create Picking..." and open the window
#	I click on "Copy all"
#	I click on "Create Picking" and close the window
	I click on "Validate Picking..." and open the window
	I click on "Copy all"
	I click on "Validate Picking" and close the window

    I click on "Pack..." and open the window
	I click on "Next"
	I click "Edit" on line:
        | FROM P. |
        | 1       |

	I fill "2" within column "Weight P.P [KG]"
	I validate the line

	I click on "Process" and close the window

	I click on "Create Shipment..." and open the window
	I click on "Create Shipment" and close the window

	I click on "Validate"

	I store "Reference" in "SHIPREF_2"	

	I open tab menu "ORDERS"   
    I click on menu "Field Orders"
	I click "Edit" on line:
        | ORDER REFERENCE  |
        | {{FO_REFERENCE}} |	

	   
	I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                          |STATE      | 
        | ADAPCOLABAG  |(laptop computer) CARRYING BAG                | Closed    |
        | ADAPMOUSOUS  | MOUSE, optical, USB port                     | Closed    |	
		| ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
        | ADAPMEMK1--  | MEMORY KEY, USB                              | Cancelled |
	   	| ADAPKBDAUSB  | KEYBOARD, AZERTY, external, USB              | Closed    |  
	
	I should see "Closed" in "State"
	
#LINE 25 & 26

    ####################
    ## SYNCHRONIZATION
    ###################
	
    I synchronize "HQ1C1"
    I synchronize "HQ1C1P1"
    I log out
    I log into instance "HQ1C1P1"	
	
 	I open tab menu "WAREHOUSE"
	I open accordion menu "Warehouse Management"
	I click on menu "Incoming Shipments"


# LINE 27		
	I click "Edit" on line:
		| PURCHASE ORDER       | STATE             | 
		| *{{PO_REFERENCE_1}}* | Available Shipped |	
		
	I should see in the main table the following data:
        | PRODUCT                                                    | STATE     | 
        | [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB              | Available |	
		
	I click on "Process" and open the window
	I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open
	
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REFERENCE_1}}"

    I click on "Search"
    I click "Edit" on line:
        | REFERENCE          |
        | {{PO_REFERENCE_1}} |	    		
	
	I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                          |STATE      | 
       | ADAPCOLABAG  |(laptop computer) CARRYING BAG                | Closed    |
       | ADAPMOUSOUS  | MOUSE, optical, USB port                     | Closed    |	
	   | ADAPDCDRB--  | DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
       | ADAPMEMK1--  | MEMORY KEY, USB                              | Cancelled |
	   | ADAPKBDAUSB  | KEYBOARD, AZERTY, external, USB              | Closed    |  	
	
    I should see "Closed" in "Order State"		

	
 	I open tab menu "WAREHOUSE"
	I open accordion menu "Warehouse Management"	
    I click on menu "Deliveries|Delivery Orders"

	I click "Edit" on line:
        | ORIGIN           |
        | {{IR_REFERENCE}} |

	I should see in the main table the following data:
	    | PRODUCT                                       | State     | 
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG  | Available |
        | [ADAPMOUSOUS] MOUSE, optical, USB port        | Available |
        | [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB | Available |	


#LINE 28
		
	I click on "Process" and open the window
	I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open


    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
	I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |
		
 	I should see in the main table the following data:
        | PRODUCT                                                     |STATE      | 
        | [ADAPCOLABAG] (laptop computer) CARRYING BAG                | Closed    |
        | [ADAPMOUSOUS] MOUSE, optical, USB port                     | Closed    |	
		| [ADAPDCDRB--] DISK, CD-R (recordable), data, cakebox of 25 | Cancelled |
        | [ADAPMEMK1--] MEMORY KEY, USB                              | Cancelled |
	   	| [ADAPKBDAUSB] KEYBOARD, AZERTY, external, USB              | Closed    |  	

    I should see "Closed" in "Order state"	
	
