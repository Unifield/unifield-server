Feature: SSL Complete Supply flow from Project IR to Ext CU via FO (with split)

@supply @irfoextcu
Scenario: SSL Complete Supply flow from Project IR to Ext CU via FO (with split)

   
#PARAMETRIZATION: 
# HQ1C2: need to have Ext CU Sara as external Consumption Unit
# HQ1C2: need to have 100000 quantity of ADAPCABL2S- in LOG
# HQ1C1: need to have 100000 quantity of ADAPCABL1S- in LOG


   ###################################################################
    ## CREATE AN IR IN HQ1C2 (reference in IR_REFERENCE)
    ###################################################################

    I log into instance "HQ1C2"
    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click on "New"
    I fill "Requestor" with "LogCoo"
    I fill "Location Requestor" with "Ext CU Sara"
    I fill "Requested date" with "28/May/2016"
    
   # Add multiple products at the same time
    I click on "Add multiple lines" and open the window
    I click on "Add" and open the window
    I fill "Code" with "ADAP"
    I click on "Search"
    I click "checkbox" on line:
     | CODE        |
     | ADAPCABL1S- |
     | ADAPCABL2S- |
     | ADAPCART02- |
     
     
    I click on "Select" and close the window
    I click "Edit" on line:
     | CODE        |
     | ADAPCABL1S- |
    I fill "10" within column "QTY"
    I validate the line
    I click "Edit" on line:
     | CODE        |
     | ADAPCABL2S- |
    I fill "10" within column "QTY"
    I validate the line
    I click "Edit" on line:
     | CODE        |
     | ADAPCART02- |
    I fill "10" within column "QTY"
    I validate the line
    
    I click on "Add products" and close the window

    
    
    # Add products line by line
    I click on "New"
    I fill "[AZAZA] Product test" within column "Product"
    I fill "30.00" within column "Quantity (UoM)"
    I validate the line

    I fill "[DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial" within column "Product"
    I fill "30.00" within column "Quantity (UoM)"
    I validate the line
    
    I fill "[DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab." within column "Product"
    I fill "30.00" within column "Quantity (UoM)"
    I validate the line

    I store "Order Reference" in "IR_REFERENCE"
    
    
    I click "Validate" on line:
        | PRODUCT                                                                |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)  |

    I click "Validate" on line:
        | PRODUCT                                               |
        | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING |       
        
    I should see in the main table the following data:
        | PRODUCT                                                                 | STATE     |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)   | Validated |
        | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male | Draft     |
        | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING                   | Validated | 
        | [AZAZA] Product test                                                    | Draft     |
        | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial                        | Draft     |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab.       | Draft     |

    I click on "Save"
    I should see "Draft-p" in "Order State"
    
    
    ###################################################################
    ## SOURCE THE IR TO HQ1C1 (PO)
    ###################################################################

    I click on menu "Orders Sourcing Tool"
    I fill "Order" with "{{IR_REFERENCE}}"
    I click on "Search"
    
    I tick all the lines
    I click "Source lines" in the side panel and open the window

    I fill "Supplier" with "HQ1C1"  
    I click on "Save & source" and close the window

    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I fill "ORDER REFERENCE" with "{{IR_REFERENCE}}"
    
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |
    
    I should see in the main table the following data:
        | PRODUCT                                                                 | STATE   |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)   | Sourced |
        | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male | Draft   |
        | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING                   | Sourced |   

    
    ###################################################################
    ## CHECK THE PO (reference in PO_REFERENCE)
    ###################################################################

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I toggle on "DRAFT"

    I click "Search" until I see:
        | SOURCE DOCUMENT    |
        | *{{IR_REFERENCE}}* |
    I click "Edit" on line:
        | SOURCE DOCUMENT    |
        | *{{IR_REFERENCE}}* |

    I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                                    |STATE  | 
        | ADAPCABL1S-  |(computer) CABLE, SERIAL interface for two PC (fem/fem) | Draft |
        | ADAPCART02-  |(printer Laserwriter ) CARTRIDGE INKING                 | Draft |   

    I should see "Draft" in "Order State"       
    I store "Order Reference" in "PO_REF_COO_1"

    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I fill "ORDER REFERENCE" with "{{IR_REFERENCE}}"
    I click "Search" until I see:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |  
    I click on "Validate Lines"

    I should see in the main table the following data:
        | PRODUCT                                                                 | STATE     |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)   | Sourced   |
        | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male | Validated |
        | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING                   | Sourced   | 
        | [AZAZA] Product test                                                    | Validated |
        | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial                        | Validated |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab.       | Validated |
        
    I should see "Validated-p" in "Order State"
    
    I click on menu "Orders Sourcing Tool"
    I fill "Order" with "{{IR_REFERENCE}}"
    I click on "Search" 
    I click "Edit" on line:
        | PRODUCT                                                                 |
        | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male |
    I fill "from Stock" within column "PROC. METHOD"
    I validate the line
    I click "Source Line" on line:
        | PRODUCT                                                                 |
        | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male |
        
    
    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |

    I should see in the main table the following data:
        | PRODUCT                                                                 | STATE     |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)   | Sourced   |
        | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male | Confirmed |
        
    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"    
    I click on menu "Deliveries|Delivery Orders"

    I click "Edit" on line:
        | ORIGIN            |
        | {{IR_REFERENCE}}  |

    I should see in the main table the following data:
        | PRODUCT                                                                 | State     |
        | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male | Available |
                        
    I open tab menu "ORDERS"
    I click on menu "Orders Sourcing Tool"
    I fill "Order" with "{{IR_REFERENCE}}"
    I click on "Search" 
    I click "Edit" on line:
        | PRODUCT                                          |
        | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial |
    I fill "Local Market" within column "SUPPLIER"
    I validate the line
    I click "Source Line" on line:
        | PRODUCT                                          |
        | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial |

        
    I click "Edit" on line:
        | PRODUCT             |
        |[AZAZA] Product test |
    I fill "Local Market" within column "SUPPLIER"
    I validate the line
    I click "Source Line" on line:
        | PRODUCT              |
        | [AZAZA] Product test |
            
    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |

    I should see in the main table the following data:
        | PRODUCT                                          | STATE   |
        | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial | Sourced |
        | [AZAZA] Product test                             | Sourced |
    
    
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I toggle on "DRAFT"

    I click "Edit" on line:
        | REFERENCE          |
        | *{{PO_REF_COO_1}}* |

    I click "Analytical distribution" on line and open the window:
       | PRODUCT CODE  | PRODUCT DESCRIPTION                                      |
       | ADAPCABL1S-   | (computer) CABLE, SERIAL interface for two PC (fem/fem)  |
    I click on "New"   
    I fill "HT111" within column "COST CENTER"
    I validate the line
    I click on "Save" and close the window
        
    I click "Edit" on line and open the window:
       | PRODUCT CODE  | PRODUCT DESCRIPTION                                      | STATE |
       | ADAPCABL1S-   | (computer) CABLE, SERIAL interface for two PC (fem/fem)  | Draft |
      
    I fill "Quantity" with "25.00"
    I fill "Unit Price" with "20.00"
    I click on "Save & close" and close the window
    
    I click "Analytical distribution" on line and open the window:
       | PRODUCT CODE|
       | ADAPCART02- |
    I click on "New"
    I fill "HT101" within column "COST CENTER"
    I validate the line
    I click on "Save" and close the window

    I click "Validate" on line:
       | PRODUCT CODE |PRODUCT DESCRIPTION                                      | STATE |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Draft |
      
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE     |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Validated |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Draft     |   

       
    I click on "Save"
    I should see "Draft-p" in "Order State"

    I click on menu "Purchase Orders"
    I toggle on "DRAFT"
    I click "Edit" on line:
        | SOURCE DOCUMENT    | SUPPLIER     |
        | *{{IR_REFERENCE}}* | Local Market |
        
    I click on "Analytical Distribution" and open the window
    I click on "New"
    I fill "SUP" within column "DESTINATION"
    I fill "HT101" within column "COST CENTER"
    I validate the line
    I click on "Save" and close the window
    
    I click on "Validate lines"
    
    I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                | STATE     |
        | DINJCEFA1V-  | CEFAZOLIN, 1 g, (IV), powder, vial | Validated |
        | AZAZA        | Product test                       | Validated |   

    I should see "Validated" in "Order State"   
    
    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |

    I should see in the main table the following data:
       | PRODUCT                                                                 | STATE     | QUANTITY (UOM) | UNIT PRICE |
       | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)   | Sourced-v |  25.00         | 20.00      |
       | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male | Confirmed |  10.00         |  *         |
       | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING                   | Sourced   |  10.00         |  *         |
       | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial                        | Sourced-v |  30.00         |  *         |
       | [AZAZA] Product test                                                    | Sourced-v |  30.00         |  *         |            

    I open tab menu "PURCHASES"    
    I click on menu "Purchase Orders"
    I click "Edit" on line:
        | SOURCE DOCUMENT    | SUPPLIER     |
        | *{{IR_REFERENCE}}* | Local Market |
    
    I open tab "Delivery"
    I fill "Delivery Confirmed Date" with "28/May/2017"

    I click on "Confirm lines"
    I store "Order Reference" in "PO_REF_LOCM"  

    I click on menu "Purchase Orders"
    I click "Edit" on line:
        | REFERENCE          |
        | *{{PO_REF_COO_1}}* |
       
    I click "Validate" on line:
       | PRODUCT CODE |PRODUCT DESCRIPTION                       | STATE |
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING  | Draft |
       
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE     |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Validated |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Validated |   

       
    I click on "Save"
    I should see "Validated" in "Order State"      
       
    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |

    I should see in the main table the following data:
       | PRODUCT                                               | STATE     |
       | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING | Sourced-v |           
       | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial      | Confirmed |
       | [AZAZA] Product test                                  | Confirmed |    
          

          
    ####################
    ## SYNCHRONIZATION
    ###################
          
    I synchronize "HQ1C2"
    I log out
    I synchronize "HQ1C1"
    I log into instance "HQ1C1"
    
  
    I open tab menu "ORDERS"
    I click on menu "Field Orders"
    I toggle on "Draft"

    I click "Edit" on line:
        | CUSTOMER REFERENCE |
        | *{{PO_REF_COO_1}}  | 

    I click on "Analytical Distribution" and open the window
    I click on "New"
    I fill "NAT" within column "DESTINATION"
    I fill "cc-intermission" within column "COST CENTER"
    I validate the line
    I click on "Save" and close the window 

    I click "Validate" on line:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Draft |
       
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE     |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Validated |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Draft     |

    I click on "Save"
    I should see "Draft-p" in "State"
    
    I store "Order Reference" in "FO_REFERENCE" 

    I click on menu "Orders Sourcing Tool"
    I fill "Order" with "{{FO_REFERENCE}}"
    I click on "Search"

    I click "Edit" on line:
        | PRODUCT                                                              |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)|
    I fill "from Stock" within column "PROC. METHOD"
    I validate the line
    I click "Source Line" on line:
        | PRODUCT                                                              |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)|

    I click on menu "Field Orders"

    I click "Edit" on line:
        | CUSTOMER REFERENCE |
        | *{{PO_REF_COO_1}}  |

    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE     |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Confirmed |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Draft     |
   
       
    ####################
    ## SYNCHRONIZATION
    ###################
       
    I synchronize "HQ1C1"
    I log out
    I synchronize "HQ1C2"
    I log into instance "HQ1C2"   
        

    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I fill "ORDER REFERENCE" with "{{IR_REFERENCE}}"
    I click "Search" until I see:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |  

    I should see in the main table the following data:
        | PRODUCT                                                               | STATE     |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem) | Confirmed |
 
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REF_COO_1}}"

    I click "Search" until I see:
        | REFERENCE        |
        | {{PO_REF_COO_1}} |
    I click "Edit" on line:
        | REFERENCE        |
        | {{PO_REF_COO_1}} |    
    
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE     |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Confirmed |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Validated |   

       
    I click on "Save"
    I should see "Validated-p" in "Order State" 
    
    
    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Incoming Shipments"

    I click "Edit" on line:
        | PURCHASE ORDER   |
        | {{PO_REF_COO_1}} |

    I should see in the main table the following data:
        | PRODUCT                                                                | STATE     |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)  | Available |
    
    I should see "Available" in "State"
    

    
    I log into instance "HQ1C1"
    
    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Deliveries|Picking"

    I click "Search" until I see:
        | ORIGIN            |
        | {{FO_REFERENCE}}  |
    I click "Edit" on line:
        | ORIGIN           | LINES STATE |
        | {{FO_REFERENCE}} |  *vailable* |
    
    I should see in the main table the following data:
        | PRODUCT                                                                | STATE     |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)  | Available |
        

    I Click on "Convert to Simple Out"
    I click on "Process" and open the window
    I Click on "Copy all"

    I click on "Process" and close the window if necessary
    I click on "Close" and close the window if a window is open
    
    I should see in the main table the following data:
        | PRODUCT                                                                | STATE  |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)  | Closed |
        
    I should see "Closed" in "State"
    
    I open tab menu "ORDERS"
    I click on menu "Field Orders"

    I click "Edit" on line:
        | ORDER REFERENCE   |
        | *{{FO_REFERENCE}} |   

    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE  |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Closed |  
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Draft  |


    I should see "Draft-p" in "State"      
    
    I click "Edit" on line and open the window:
       | PRODUCT CODE | PRODUCT DESCRIPTION                     |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING |

    
    I fill "Quantity (UoM)" with "50.00"
    I fill "Unit Price" with "5.00"
    I click on "Save & Close" and close the window

    I click "Validate" on line:
       | PRODUCT CODE | PRODUCT DESCRIPTION                     |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING |

    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE     |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Closed    |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Validated |    

    I click on "Save"
    I should see "Validated-p" in "State"

    
    I click on menu "Orders Sourcing Tool"
    I fill "Order" with "{{FO_REFERENCE}}"
    I click on "Search"

    I click "Edit" on line:
       | PRODUCT                                               |
       | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING |
       
    I fill "ITCompany" within column "SUPPLIER"
    I validate the line
    I click "Source Line" on line:
        | PRODUCT                                               |
        | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING |
    
    I open tab menu "ORDERS"
    I click on menu "Field Orders"

    I click "Edit" on line:
        | ORDER REFERENCE   |
        | *{{FO_REFERENCE}} |   

    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                     | STATE   | 
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING | Sourced |    

    I should see "Sourced-p" in "State"


    ####################
    ## SYNCHRONIZATION
    ###################
    
    I synchronize "HQ1C1"
    I synchronize "HQ1C2"
    I log into instance "HQ1C2"

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REF_COO_1}}"

    I click on "Search"

    I click "Edit" on line:
        | REFERENCE        |
        | {{PO_REF_COO_1}} |    
    
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE     |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Confirmed |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Sourced-sy |  
       
    I should see "Sourced-p" in "Order State"   

    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Incoming Shipments"

    I click "Edit" on line:
        | PURCHASE ORDER   | STATE             |
        | {{PO_REF_COO_1}} | Available Shipped | 
    
    I should see in the main table the following data:
        | PRODUCT                                                                | STATE     |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)  | Available |
    
    I click on "Process" and open the window
    I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open
    
    I should see "Closed" in "State"
    
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REF_COO_1}}"

    I click on "Search"

    I click "Edit" on line:
        | REFERENCE          |
        | *{{PO_REF_COO_1}}* |  
    
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE     |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Closed    |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Sourced-sy |  
       
    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Incoming Shipments"

    I click "Edit" on line:
        | PURCHASE ORDER    |
        | *{{PO_REF_LOCM}}* | 


    I click on "Process" and open the window
    I click on "Copy all"
    
        I click "Edit" on line:
        | PRODUCT                                          |
        | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial |

    I fill "batch{{ID}}" within column "Batch Number" and open the window
    I click on "New"
    I fill "Expiry Date" with "20/May/2020"
    I click on "Save" and close the window
    I validate the line
    
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open


    I should see in the main table the following data:
       | PRODUCT                                          | STATE  |
       | [AZAZA] Product test                             | Closed |           
       | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial | Closed |

    I should see "Closed" in "State"

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I fill "REFERENCE" with "{{PO_REF_LOCM}}"

    I click on "Search"
    I click "Edit" on line:
        | REFERENCE         |
        | *{{PO_REF_LOCM}}* |   
    
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                | STATE  |
       | AZAZA        | Product test                       | Closed |   
       | DINJCEFA1V-  | CEFAZOLIN, 1 g, (IV), powder, vial | Closed |   
       
    
    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Deliveries|Delivery Orders"

    I click "Edit" on line:
        | ORIGIN            |
        | {{IR_REFERENCE}}  |

    I should see in the main table the following data:
        | PRODUCT                                                                 | STATE     |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)   | Available |
        | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male | Available |
        | [AZAZA] Product test                                                    | Available |
        | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial                        | Available |


    I click on "Process" and open the window
    I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open

    I should see "Closed" in "State"
    
    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |

        
    I should see in the main table the following data:
       | PRODUCT                                                                 | STATE     |
       | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)   | Closed    |
       | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male | Closed    |
       | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING                   | Sourced-sy |
       | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial                        | Closed    |
       | [AZAZA] Product test                                                    | Closed    |  

    I click on menu "Orders Sourcing Tool"
    I fill "Order" with "{{IR_REFERENCE}}"
    I click on "Search" 
    I click "Edit" on line:
        | PRODUCT                                                           |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |

    I fill "HQ1C1" within column "SUPPLIER"
    I validate the line
    I click "Source Line" on line:
        | PRODUCT                                                           |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |
               
    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |

    I should see in the main table the following data:
       | PRODUCT                                                           | STATE   |
       | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Sourced |

    I should see "Sourced-p" in "Order State"

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I toggle on "DRAFT"

    I click "Search" until I see:
        | SOURCE DOCUMENT    |
        | *{{IR_REFERENCE}}* |
    I click "Edit" on line:
        | SOURCE DOCUMENT    | SUPPLIER |
        | *{{IR_REFERENCE}}* | *HQ1C1   | 

    I click on "Analytical Distribution" and open the window
    I click on "New"
    I fill "SUP" within column "DESTINATION"
    I fill "HT101" within column "COST CENTER"
    I validate the line
    I click on "Save" and close the window
        
    I click "Validate" on line:
        | PRODUCT CODE | PRODUCT DESCRIPTION                                 |STATE  | 
        | DORADIDA15T  | DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Draft |

    I should see "Draft" in "Order State"       
    I store "Order Reference" in "PO_REF_COO_2" 
    
    I click on "Save"
    I should see "Validated" in "Order State"

    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |

    I should see in the main table the following data:
       | PRODUCT                                                           | STATE     |
       | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Sourced-v |

       I should see "Sourced-p" in "Order State"


    ####################
    ## SYNCHRONIZATION
    ###################
    
    I synchronize "HQ1C2"
    I synchronize "HQ1C1"
    I log out
    I log into instance "HQ1C1" 
    

    I open tab menu "ORDERS"
    I click on menu "Field Orders"
    I toggle on "Draft"

    I click "Edit" on line:
        | CUSTOMER REFERENCE |
        | *{{PO_REF_COO_2}}  |  

    I click "Validate" on line:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE |
       | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Draft |
       
    I should see in the main table the following data:
      | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE     |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Validated |

    I click on "Save"
    I should see "Validated" in "State" 
    I store "Order Reference" in "FO_REFERENCE_2"

    I click on menu "Orders Sourcing Tool"
    I fill "Order" with "{{FO_REFERENCE_2}}"
    I click on "Search"

    I click "Split line" on line and open the window:
        | PRODUCT                                                           |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |
    I fill "New line quantity" with "25.00"
    I click on "Split line" and close the window

    
    I click "Edit" on line:
        | PRODUCT                                                           | QTY  |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | 5.00 |

    I fill "ITCompany" within column "SUPPLIER"
    I validate the line
    I click "Source Line" on line:
        | PRODUCT                                                           | QTY      |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |   5.00   |

        
    I click "Edit" on line:
        | PRODUCT                                                           | QTY      |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |   25.00  |
        
    I fill "ESC" within column "SUPPLIER"
    I validate the line
    I click "Source Line" on line:
        | PRODUCT                                                           | QTY      |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |   25.00  | 

    I open tab menu "ORDERS"
    I click on menu "Field Orders"

    I click "Edit" on line:
        | ORDER REFERENCE     |
        | *{{FO_REFERENCE_2}} | 
       
    I should see in the main table the following data:
      | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE   | QTY   |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Sourced |  5.00 |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Sourced | 25.00 |

    I should see "Sourced" in "State"       

    
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I toggle on "DRAFT"

    I click "Edit" on line:
        | SOURCE DOCUMENT    | SUPPLIER   |
        | *{{FO_REFERENCE}}* |  ITCompany |    

    I click on "Validate lines"
    
    I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                                 |STATE      | Quantity |
        | DORADIDA15T  | DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Validated |    5.00  |
        | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING             | Validated |   50.00  |

    I store "Order Reference" in "PO_REF_EXT_COO"
    
   
    I open tab menu "ORDERS"
    I click on menu "Field Orders"
    I click "Edit" on line:
        | ORDER REFERENCE     |
        | *{{FO_REFERENCE_2}} | 
       
    I should see in the main table the following data:
      | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE     | QTY   |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Sourced-v |  5.00 |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Sourced   | 25.00 |

    I should see "Sourced-p" in "State" 
    

    I click on menu "Field Orders"

    I click "Edit" on line:
        | ORDER REFERENCE  |
        | *{{FO_REFERENCE}}|    
       
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE     |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Closed    |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Sourced-v |

    I should see "Sourced-p" in "State" 
    
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"

    I click "Edit" on line:
        | SOURCE DOCUMENT    | SUPPLIER   |
        | *{{FO_REFERENCE}}* |  ITCompany |    

    I click "Confirm" on line:
        | PRODUCT CODE | PRODUCT DESCRIPTION                     |
        | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING |
    
    I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                     | STATE     |
        | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING | Confirmed |
    
    I click on "Save"
    I should see "Validated-p" in "Order State"

    I open tab menu "ORDERS"    
    I click on menu "Field Orders"
    I click "Edit" on line:
        | ORDER REFERENCE  |
        | *{{FO_REFERENCE}}|    
       
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE     |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Closed    |   
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Confirmed |

    I should see "Confirmed-p" in "State"

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"

    I click "Edit" on line:
        | SOURCE DOCUMENT      | SUPPLIER |
        | *{{FO_REFERENCE_2}}* |  ESC     |    

    I click "Validate" on line:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE | QUANTITY |
       | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Draft | 25.00    |

    I store "Order Reference" in "PO_REF_ESC_COO"   
    
    I open tab menu "ORDERS"    
    I click on menu "Field Orders"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{FO_REFERENCE_2}}|  
       
    I should see in the main table the following data:
      | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE     | QTY   |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Sourced-v |  5.00 |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Sourced-v | 25.00 |

    I should see "Sourced-p" in "State"
        

    
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"

    I click "Edit" on line:
        | SOURCE DOCUMENT      | SUPPLIER |
        | *{{FO_REFERENCE_2}}* |  ESC     |    

    I click "Confirm" on line:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE     | QUANTITY |
       | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Validated | 25.00    |

    I open tab menu "ORDERS"    
    I click on menu "Field Orders"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{FO_REFERENCE_2}}|  
       
    I should see in the main table the following data:
      | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE     | QTY   |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Sourced-v |  5.00 |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed | 25.00 |

    I should see "Sourced-p" in "State"
    
    ####################
    ## SYNCHRONIZATION
    ################### 
    
    I log out
    I synchronize "HQ1C1"
    I synchronize "HQ1C2"
    I log into instance "HQ1C2"


    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I fill "ORDER REFERENCE" with "{{IR_REFERENCE}}"
    I click "Search" until I see:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |  
        
    I should see in the main table the following data:
        | PRODUCT                                                                 | STATE     | QUANTITY (UOM) | UNIT PRICE |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)   | Closed    |   25.00        |  20.00     |
        | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male | Closed    |   10.00        |   *        |
        | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING                   | Confirmed |   50.00        |   5.00     |
        | [AZAZA] Product test                                                    | Closed    |   30.00        |   *        |
        | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial                        | Closed    |   30.00        |   *        | 
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab.       | Sourced-sy |    5.00        |   *        |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab.       | Confirmed |   25.00        |   *        |

    I should see "Sourced-p" in "Order State"
    
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I click "Edit" on line:
        | REFERENCE          |
        | *{{PO_REF_COO_1}}* | 

    I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                                     |STATE      | 
        | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Closed    |
        | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Confirmed |

    I should see "Confirmed-p" in "Order State"     

    
    I click on menu "Purchase Orders"
    I click "Edit" on line:
        | REFERENCE          |
        | *{{PO_REF_COO_2}}* | 

    I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                                 |STATE      | 
        | DORADIDA15T  | DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Sourced-sy |
        | DORADIDA15T  | DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed |

    I should see "Sourced-p" in "Order State"   

    
    I log into instance "HQ1C1"
    
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"

    I click "Edit" on line:
        | SOURCE DOCUMENT    | SUPPLIER   |
        | *{{FO_REFERENCE}}* |  ITCompany |    

    I click "Confirm" on line:
        | PRODUCT CODE | PRODUCT DESCRIPTION                                 |
        | DORADIDA15T  | DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |
        
    I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                                 | STATE     |
        | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING             | Confirmed |
        | DORADIDA15T  | DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed |
    
# letmefix with Testfield  => JF has "I click on "cancel" ?! 
    I click on "Save"  
    I should see "Confirmed" in "Order State"

    
    I open tab menu "ORDERS"    
    I click on menu "Field Orders"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{FO_REFERENCE_2}}|  
       
    I should see in the main table the following data:
      | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE     | QTY   |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed |  5.00 |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed | 25.00 |

    I should see "Confirmed" in "State"

    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Incoming Shipments"

    I click "Edit" on line:
        | PURCHASE ORDER       |
        | *{{PO_REF_EXT_COO}}* | 


    I click on "Process" and open the window
    I click "Edit" on line:
        | PRODUCT                                               |
        | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING |
        
    I fill "50.000" within column "QUANTITY TO PROCESS" 
    I validate the line

    
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"

    I click "Edit" on line:
        | SOURCE DOCUMENT    | SUPPLIER   |
        | *{{FO_REFERENCE}}* |  ITCompany |    
    
    I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                     | STATE  |
        | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING | Closed |
        
    I should see "Confirmed-p" in "Order State"


    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Deliveries|Picking"

    
    I click "Edit" on line:

        | ORIGIN           | LINES STATE |
        | {{FO_REFERENCE}} | *vailable*  |
    
    I click on "Create Picking..." and open the window
    I click on "Copy all"
    I click on "Create Picking" and close the window
        
    I click on "Validate Picking..." and open the window
    I click on "Copy all"
    I click on "Validate Picking" and close the window

    I click on "Pack..." and open the window
    I click on "Next"
    I click "Edit" on line:
        | FROM P. |
        | 1       |

    I fill "2" within column "Weight P.P [KG]"
    I validate the line

    I click on "Process" and close the window

    I click on "Create Shipment..." and open the window
    I click on "Create Shipment" and close the window

    I click on "Validate"

    I store "Reference" in "SHIPREF_1"  


    I open tab menu "ORDERS"    
    I click on menu "Field Orders"
    I click "Edit" on line:
        | ORDER REFERENCE  |
        | *{{FO_REFERENCE}}|    
       
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE  |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Closed |  
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Closed |

    I should see "Closed" in "State"

    
    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Incoming Shipments"

    I click "Edit" on line:

        | PURCHASE ORDER       |
        | *{{PO_REF_ESC_COO}}* |  

    I click on "Process" and open the window
    I click on "Copy all"
    
    I click "Edit" on line:
        | PRODUCT                                                           |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |


    I fill "20/May/2022" within column "EXPIRY DATE"
    I validate the line
    
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open 
    
    
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"
    I click "Edit" on line:
        | REFERENCE            |
        | *{{PO_REF_ESC_COO}}* |  
    
    I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE  |
        | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Closed |
    
    I should see "Closed" in "Order State"  
    

    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Deliveries|Picking"

    
    I click "Edit" on line:

        | ORIGIN             |  LINES STATE |
        | {{FO_REFERENCE_2}} | *vailable*   |

    I click on "Create Picking..." and open the window
    I click on "Copy all"
    I click on "Create Picking" and close the window

    I click on "Validate Picking..." and open the window
    I click on "Copy all"
    I click on "Validate Picking" and close the window

    I click on "Pack..." and open the window
    I click on "Next"
    I click "Edit" on line:
        | FROM P. |
        | 1       |

    I fill "2" within column "Weight P.P [KG]"
    I validate the line

    I click on "Process" and close the window

    I click on "Create Shipment..." and open the window
    I click on "Create Shipment" and close the window

    I click on "Validate"

    I store "Reference" in "SHIPREF_2"

    ####################
    ## SYNCHRONIZATION
    ###################
    
    
    I log out
    I synchronize "HQ1C1"
    I synchronize "HQ1C2"
    I log into instance "HQ1C2"
    

    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I fill "ORDER REFERENCE" with "{{IR_REFERENCE}}"
    I click "Search" until I see:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |  

    I should see in the main table the following data:
        | PRODUCT                                                           | STATE     | QUANTITY (UOM) |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed |    5.00        |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed |   25.00        | 

    I should see "Confirmed-p" in "Order State"

    
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"

    I click "Edit" on line:
        | REFERENCE          |
        | *{{PO_REF_COO_2}}* |  
    
    I should see in the main table the following data:
        | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE     | QUANTITY |
        | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed |   5.00   |
        | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed |  25.00   |
    
    I should see "Confirmed" in "Order State"   
    
    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Incoming Shipments"

    I click "Edit" on line:
        | PURCHASE ORDER     | STATE             |
        | *{{PO_REF_COO_1}}* | Available Shipped | 


    I click on "Process" and open the window
    I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open 

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"

    I click "Edit" on line:
        | REFERENCE          |
        | *{{PO_REF_COO_1}}* |  
    
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                     | STATE  |
       | ADAPCABL1S-  | (computer) CABLE, SERIAL interface for two PC (fem/fem) | Closed |  
       | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING                 | Closed |
        
    I should see "Closed" in "Order State"  

    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Incoming Shipments"

    I click "Edit" on line:
        | PURCHASE ORDER     | STATE             |
        | *{{PO_REF_COO_2}}* | Available Shipped | 

    I click on "Process" and open the window
    I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open 
    
    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"

    I click "Edit" on line:
        | REFERENCE          |
        | *{{PO_REF_COO_2}}* |  

    I should see in the main table the following data:
      | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE     | QUANTITY   |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed |   5.00     |
      | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Closed    |  25.00     |
       
    I should see "Confirmed-p" in "Order State"     
    
    
    
    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Deliveries|Delivery Orders"

    I click "Edit" on line:
        | ORIGIN            |
        | {{IR_REFERENCE}}  |

    I should see in the main table the following data:
        | PRODUCT                                                           | Quantity | State         |
        | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING             |  50.000  | Available     |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |   5.000  | Not Available |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |  25.000  | Available     |

    I click on "Process" and open the window
    I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open
    
    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |  

    I should see in the main table the following data:
        | PRODUCT                                                           | STATE     | QUANTITY (UOM) |
        | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING             | Closed    |   50.00        |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed |    5.00        |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Closed    |   25.00        | 

    ####################
    ## SYNCHRONIZATION
    ###################
        
        
    I synchronize "HQ1C2"
    I log out
    I synchronize "HQ1C1"
    I log into instance "HQ1C1"
    
    I open tab menu "ORDERS"    
    I click on menu "Field Orders"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{FO_REFERENCE_2}}|  
       
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                 | STATE     | QTY   |
       | DORADIDA15T  | DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Confirmed |  5.00 |
       | DORADIDA15T  | DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Closed    | 25.00 |

    I should see "Confirmed-p" in "State"


    
    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Incoming Shipments"

    I click "Edit" on line:
        | PURCHASE ORDER       |
        | *{{PO_REF_EXT_COO}}* |

        
    I click on "Process" and open the window
    I click on "Copy all"
    
    I click "Edit" on line:
        | PRODUCT       |
        | *DORADIDA15T* |
        
    I fill "29/Jun/2018" within column "EXPIRY DATE"
    And I validate the line
    
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open 

    I open tab menu "PURCHASES"
    I click on menu "Purchase Orders"

    I click "Edit" on line:
        | REFERENCE            |
        | *{{PO_REF_EXT_COO}}* |  

    I should see in the main table the following data:
     | PRODUCT CODE | PRODUCT DESCRIPTION                                  | STATE     | QUANTITY |
     | ADAPCART02-  | (printer Laserwriter ) CARTRIDGE INKING              | Closed    |   50.00  |
     | DORADIDA15T  |  DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Closed    |    5.00  |
       
    I should see "Closed" in "Order State"  
    

    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Deliveries|Picking"


    I click "Edit" on line:

        | ORIGIN             | LINES STATE |
        | {{FO_REFERENCE_2}} | *vailable*  |

    I click on "Create Picking..." and open the window
    I click on "Copy all"
    I click on "Create Picking" and close the window

    I click on "Validate Picking..." and open the window
    I click on "Copy all"
    I click on "Validate Picking" and close the window

    I click on "Pack..." and open the window
    I click on "Next"
    I click "Edit" on line:
        | FROM P. |
        | 1       |

    I fill "2" within column "Weight P.P [KG]"
    I validate the line

    I click on "Process" and close the window

    I click on "Create Shipment..." and open the window
    I click on "Create Shipment" and close the window

    I click on "Validate"

    I store "Reference" in "SHIPREF_3"

    
    I open tab menu "ORDERS"    
    I click on menu "Field Orders"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{FO_REFERENCE_2}}|  
       
    I should see in the main table the following data:
       | PRODUCT CODE | PRODUCT DESCRIPTION                                 | STATE  | QTY   |
       | DORADIDA15T  | DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Closed |  5.00 |
       | DORADIDA15T  | DIDANOSINE (ddI), 150 mg, chewable dispersable tab. | Closed | 25.00 |

    I should see "Closed" in "State"    

    
    ####################
    ## SYNCHRONIZATION
    ################### 
    
    I synchronize "HQ1C1"
    I synchronize "HQ1C2"
    I log out
    I log into instance "HQ1C2"
    
    
    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Incoming Shipments"

    I click "Edit" on line:
        | PURCHASE ORDER     |
        | *{{PO_REF_COO_2}}* |

    I click on "Process" and open the window
    I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open 

    I open tab menu "WAREHOUSE"
    I open accordion menu "Warehouse Management"
    I click on menu "Deliveries|Delivery Orders"

    I click "Edit" on line:
        | ORIGIN            |
        | {{IR_REFERENCE}}  |

    I should see in the main table the following data:
        | PRODUCT                                                           | Quantity | State     |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab. |   5.000  | Available |
 
    I click on "Process" and open the window
    I click on "Copy all"
    I click on "Process" and close the window if necessary
    I click on "Refresh" until "Done" in "Processing of lines" if a window is open
    I click on "Close" and close the window if a window is open
    
    I open tab menu "ORDERS"
    I click on menu "Internal Requests"
    I click "Edit" on line:
        | ORDER REFERENCE    |
        | *{{IR_REFERENCE}}* |  

    I should see in the main table the following data:
        | PRODUCT                                                                | STATE     | QUANTITY (UOM) |
        | [ADAPCABL1S-] (computer) CABLE, SERIAL interface for two PC (fem/fem)  | Closed    |   25.00        |
        | [ADAPCABL2S-] (computer) CABLE, SERIAL interface PC/Mini-M, female/male| Closed    |   10.00        |
        | [ADAPCART02-] (printer Laserwriter ) CARTRIDGE INKING                  | Closed    |   50.00        |
        | [AZAZA] Product test                                                   | Closed    |   30.00        |
        | [DINJCEFA1V-] CEFAZOLIN, 1 g, (IV), powder, vial                       | Closed    |   30.00        |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab.      | Closed    |    5.00        |
        | [DORADIDA15T] DIDANOSINE (ddI), 150 mg, chewable dispersable tab.      | Closed    |   25.00        | 
        
    I should see "Closed" in "Order State"  
    
    
