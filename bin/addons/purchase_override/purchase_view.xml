<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>
        <!-- REWORK THE PURCHASE MENU âˆ’ SEE UF-657 - ERGONOMIC REQUIREMENTS -->
        <!-- Purchase Management -->
        <menuitem id="purchase.menu_purchase_form_action" 
                  action="purchase.purchase_form_action"
                  sequence="1" 
                  parent="purchase.menu_procurement_management" />

        <menuitem id="purchase.menu_purchase_rfq" 
                  action="purchase.purchase_rfq"
                  sequence="2" 
                  parent="purchase.menu_procurement_management" />

        <menuitem id="base.menu_procurement_management_supplier_name"
                  action="base.action_partner_supplier_form"
                  sequence="4"
                  parent="purchase.menu_procurement_management" />

        <menuitem id="base.menu_purchase_root" sequence="2" />

        <!-- Address Book -->
        <menuitem id="base.menu_procurement_management_supplier"
                  name="Address Book"
                  parent="purchase.menu_purchase_config_purchase" />

        <record id="res_partner_address_list_view" model="ir.ui.view">
            <field name="name">res.partner.address.list.view</field>
            <field name="model">res.partner.address</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="base.view_partner_address_tree" />
            <field name="arch" type="xml">
                <xpath expr="/tree//field[@name='name']" position="after">
                    <field name="street" />
                </xpath>
            </field>
        </record>

        <record id="action_supplier_address_form" model="ir.actions.act_window">
            <field name="name">Addresses</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.address</field>
            <field name="view_type">form</field>
            <field name="context">{"search_default_supplier":1}</field>
            <field name="search_view_id" ref="base.view_res_partner_address_filter" />
            <field name="help">Suppliers (also called Partners in other areas of the system) helps you manage your address book of companies whether they are prospects, customers and/or suppliers. The partner form allows you to track and record all the necessary information to interact with your partners from the company address to their contacts as well as pricelists, and much more. If you installed the CRM, with the history tab, you can track all the interactions with a partner such as opportunities, emails, or sales orders issued.</field>
        </record>

        <record id="purchase_order_confirm_wizard" model="ir.ui.view">
            <field name="name">purchase.order.confirm.wizard</field>
            <field name="model">purchase.order.confirm.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Warning on confirmation">
                    <separator colspan="4" string="Purchase Order" />
                    <field name="order_id" colspan="4" />
                    <separator colspan="4" string="Warning" />
                    <field name="errors" colspan="4" nolabel="1" />
                    <separator colspan="4" string="Actions" />
                    <button special="cancel" icon="gtk-cancel" string="Close window" colspan="1" />
                    <button type="object" name="validate_order" icon="terp-check" string="Confirm" colspan="3" />
                </form>
            </field>
        </record>
        
	<!-- Invoice control -->
        <menuitem id="purchase.menu_action_stock_move_report_po" parent="stock.next_id_61" sequence="8"/>

        <record id="purchase_order_cancel_wizard_form_view" model="ir.ui.view">
            <field name="name">purchase.order.cancel.wizard.form.view</field>
            <field name="model">purchase.order.cancel.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Cancel Purchase Order">
                    <field name="last_lines" invisible="1" />
                    <field name="has_linked_line" invisible="1" />
                    <group colspan="4" col="1">
                        <html>
                            <h3 style="text-align: center; margin: 13px"><translate>Please confirm that you want to cancel all non-confirmed lines of this PO</translate></h3>
                        </html>
                    </group>
                    <group colspan="4" col="1" attrs="{'invisible': [('has_linked_line', '=', False)]}">
                        <html>
                            <h3 style="text-align: center; margin: 13px"><translate>If you click on 'Cancel &amp; Resource' button, all linked FO/IR lines will be re-sourced.</translate></h3>
                        </html>
                    </group>
                    <newline />
                    <separator string="Actions" />
                    <button name="cancel_po" string="Cancel only" type="object" icon="gtk-cancel" colspan="2" />
                    <button name="cancel_and_resource" string="Cancel &amp; Resource" type="object" icon="gtk-cancel" colspan="2" attrs="{'invisible': [('has_linked_line', '=', False)]}"/>
                </form>
            </field>
        </record>

        <record id="ask_po_cancel_wizard_form_view" model="ir.ui.view">
            <field name="name">ask.po.cancel.wizard.form.view</field>
            <field name="model">purchase.order.cancel.wizard</field>
            <field name="type">form</field>
            <field name="priority" eval="99" />
            <field name="arch" type="xml">
                <form string="Cancel Purchase Order">
                    <group colspan="4" col="1">
                        <html>
                            <h4 style="text-align: center; margin: 10px"><translate>You removed all lines of this purchase order, would you cancel it ?</translate></h4>
                        </html>
                    </group>
                    <newline />
                    <separator string="Actions" colspan="4" />
                    <button colspan="1" type="object" icon="gtk-cancel" name="close_window" string="Close window" />
                    <button colspan="2" type="object" icon="gtk-execute" name="cancel_po" string="Cancel PO" />
                </form>
            </field>
        </record>
        
    </data>
</openerp>
