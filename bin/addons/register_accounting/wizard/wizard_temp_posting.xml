<?xml version="1.0"?>
<openerp>
      <data>
            <record model="ir.ui.view" id="wizard_temp_posting_form1">
                  <field name='name'>wizard.temp.posting.form1</field>
                  <field name='model'>wizard.temp.posting</field>
                  <field name='type'>form</field>
                  <field name='arch' type='xml'>
                        <form string="Temp Posting - Wizard">
                            <field name="has_no_register" invisible="1" />
                            <field name="has_amount_error" invisible="1" />
                            <field name="all_lines" invisible="1" />
                            <group colspan="4" attrs="{'invisible': [('has_no_register', '=', False)]}">
                                <separator colspan="4" />
                                <html colspan="4">
                                    <h2>
                                    <translate>The following lines have no counterpart register, please choose an action:</translate>
                                    </h2>
                                </html>
                                <button name="nothing_selection" icon="gtk-no" string="Set Do Not Post on selection" type="object" set_ids="no_register_error_lines" />
                                <button name="post_selection" icon="gtk-yes" string="Set Post on selection" type="object" set_ids="no_register_error_lines" />
                                <field name="no_register_error_lines" colspan="4" nolabel="1" o2m_selectable="2">
                                    <tree string="Counterpart register does not exist" editable="top"  hide_delete_button="1" hide_new_button="1" hide_edit_button="1">
                                        <field name="sequence_for_reference" />
                                        <field name="name" />
                                        <field name="ref" />
                                        <field name="account_id" />
                                        <field name="amount_in" />
                                        <field name="amount_out" />
                                        <field name="third" />
                                        <field name="action" />
                                        <field name="hidden_action" invisible="1"/>
                                        <button name="do_nothing" icon="gtk-no" string="Set Do Not Post" type="object" attrs="{'invisible': [('hidden_action', '=', 'do_nothing')]}" />
                                        <button name="do_post" icon="gtk-yes" string="Set Post" type="object" attrs="{'invisible': [('hidden_action', '=', 'post')]}" />
                                    </tree>
                                </field>
                            </group>

                            <group colspan="4" attrs="{'invisible': [('has_amount_error', '=', False)]}">
                                <separator colspan="4" />
                                <html colspan="4">
                                    <h2>
                                    <translate>On the following lines, the amount, the third party or the account of transfer entry does not match with counter party, please choose an action:</translate>
                                    </h2>
                                </html>
                                <button name="nothing_hard_selection" icon="gtk-no" string="Set Do Not Post on selection" type="object" set_ids="amount_error_lines" />
                                <button name="post_hard_selection" icon="gtk-yes" string="Set Post on selection" type="object" set_ids="amount_error_lines" />
                                <field name="amount_error_lines" colspan="4" nolabel="1" o2m_selectable="2">
                                    <tree string="Amounts mismatch" editable="top"  hide_delete_button="1" hide_new_button="1" hide_edit_button="1">
                                        <field name="sequence_for_reference" />
                                        <field name="name" />
                                        <field name="ref" />
                                        <field name="account_id" />
                                        <field name="amount_in" />
                                        <field name="amount_out" />
                                        <field name="third" />
                                        <field name="other_ref" />
                                        <field name="other_account_id" />
                                        <field name="other_in" />
                                        <field name="other_out" />
                                        <field name="other_third_id" />
                                        <field name="action" />
                                        <field name="hidden_action" invisible="1"/>
                                        <button name="do_nothing" icon="gtk-no" string="Set Do Not Post" type="object" attrs="{'invisible': [('hidden_action', '=', 'do_nothing')]}" />
                                        <button name="do_post" icon="gtk-yes" string="Set Post" type="object" attrs="{'invisible': [('hidden_action', '=', 'post')]}" />
                                    </tree>

                                </field>
                            </group>


                            <group colspan="4" attrs="{'invisible': [('all_lines', '=', False)]}">
                                <html>
                                    <h2 style="text-align:center;">
                                        <translate>Are you sure you want to post <span style="font-weight: bold; color: red;">ALL</span> the entries?</translate>
                                    </h2>
                                </html>
                            </group>
                            <group colspan="4">
                                <button string='Cancel' special='cancel' icon='gtk-cancel' colspan="2" />
                                <button name="action_confirm_temp_posting" string="Post" type="object" icon="gtk-apply" colspan="2" />
                            </group>
                        </form>
                  </field>
            </record>

            <record id="action_server_wizard_temp_post_selection" model="ir.actions.server">
                <field name="name">Temp Posting</field>
                <field name="model_id" ref="model_account_bank_statement_line" />
                <field name="state">code</field>
                <field name="code">action = obj.open_mass_temp_post(all_lines=False, posttype='temp', context=context)</field>
            </record>

            <record id="ir_wizard_temp_post_selection" model="ir.values">
                <field name="key2">client_action_multi</field>
                <field name="model">account.bank.statement.line</field>
                <field name="name">act_wizard_temp_post_selection</field>
                <field eval="'ir.actions.server,%d'%ref('action_server_wizard_temp_post_selection')" name="value"/>
                <field name="key">action</field>
                <field name="sequence" eval="10"/>
                <field eval="True" name="object"/>
            </record>

            <!-- Temp Post All The Entries - Entry Menu -->
            <record id="action_server_wizard_temp_post_all" model="ir.actions.server">
                <field name="name">Temp Post All The Entries</field>
                <field name="model_id" ref="model_account_bank_statement_line" />
                <field name="state">code</field>
                <field name="code">action = obj.open_mass_temp_post(all_lines=True, posttype='temp', context=context)</field>
            </record>

            <!-- Add the entry in the Actions section of the menu (with a sequence order) -->
            <record id="ir_wizard_temp_post_all" model="ir.values">
                <field name="key2">client_action_multi</field>
                <field name="model">account.bank.statement.line</field>
                <field name="name">act_wizard_temp_post_all</field>
                <field eval="'ir.actions.server,%d'%ref('action_server_wizard_temp_post_all')" name="value"/>
                <field name="key">action</field>
                <field name="sequence" eval="110"/>
                <field eval="True" name="object"/>
            </record>

            <record id="action_server_wizard_hard_post_selection" model="ir.actions.server">
                <field name="name">Hard Posting</field>
                <field name="model_id" ref="model_account_bank_statement_line" />
                <field name="state">code</field>
                <field name="code">action = obj.open_mass_temp_post(all_lines=False, posttype='hard', context=context)</field>
            </record>

            <record id="ir_wizard_hard_post_selection" model="ir.values">
                <field name="key2">client_action_multi</field>
                <field name="model">account.bank.statement.line</field>
                <field name="name">act_wizard_hard_post_selection</field>
                <field eval="'ir.actions.server,%d'%ref('action_server_wizard_hard_post_selection')" name="value"/>
                <field name="key">action</field>
                <field name="sequence" eval="10"/>
                <field eval="True" name="object"/>
            </record>

            <!-- Temp Post All The Entries - Entry Menu -->
            <record id="action_server_wizard_hard_post_all" model="ir.actions.server">
                <field name="name">Hard Post All The Entries</field>
                <field name="model_id" ref="model_account_bank_statement_line" />
                <field name="state">code</field>
                <field name="code">action = obj.open_mass_temp_post(all_lines=True, posttype='hard', context=context)</field>
            </record>

            <!-- Add the entry in the Actions section of the menu (with a sequence order) -->
            <record id="ir_wizard_hard_post_all" model="ir.values">
                <field name="key2">client_action_multi</field>
                <field name="model">account.bank.statement.line</field>
                <field name="name">act_wizard_hard_post_all</field>
                <field eval="'ir.actions.server,%d'%ref('action_server_wizard_hard_post_all')" name="value"/>
                <field name="key">action</field>
                <field name="sequence" eval="110"/>
                <field eval="True" name="object"/>
            </record>

      </data>
</openerp>
