<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record model="ir.ui.view" id="product_replace_tree">
            <field name="name">product.replace.tree</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_product_tree_view" />
            <field name="type">tree</field>
            <field name="priority">105</field>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/tree" position="replace">
                        <tree colors="red:virtual_available&lt;0;blue:virtual_available&gt;=0 and state in ('draft', 'end', 'obsolete');grey:active == False" string="Products" hide_delete_button="1">
                        <field name="default_code" string="Code"/>
                        <field name="name" string="Description"/>
                        <field name="old_code" invisible="1" />
                        <field name="categ_id" invisible="1"/>
                        <field name="uom_id" string="UoM"/>
                        <field name="type"   invisible="1" />
                        <field name="qty_available"/>
                        <field name="virtual_available"/>
                        <field name="product_amc" string="AMC"/>
                        <field name="reviewed_consumption" string="FMC" />
                        <!--<field name="lst_price"/>-->
                        <field name="price" invisible="not context.get('pricelist',False)" string="Price"/>
                        <field name="standard_price" invisible="context.get('pricelist', False)"/>
                        <field name="state" />
                        <field name="international_status"/>
                        <field name="uf_create_date" string="Creation"/>
                        <field name="uf_write_date" string="Modification"/>
                        <field name="active" invisible="1"/>
                        <field name="restrictions_txt" />
                        <field name="is_mml_valid" />
                       </tree>
                    </xpath>
                </data>
            </field>
        </record>

        <record model="ir.ui.view" id="product_account_no_sales_tax">
            <field name="name">product.normal.form</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="account.product_normal_form_view" />
            <field name="type">form</field>
            <field name="priority">30</field>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//page[@string='Accounting']//group[2]" position="replace" >
                        <field name="vat_ok" invisible="1" />
                        <group colspan="2" attrs="{'invisible': [('vat_ok', '=', False)]}" >
                            <separator string="Purchase Taxes" colspan="4"/>
                            <field name="supplier_taxes_id" nolabel="1" colspan="4" attrs="{'readonly':[('purchase_ok','=',0)]}"/>
                        </group>
                    </xpath>
                </data>
            </field>
        </record>

        <record id="product.product_normal_form_view" model="ir.ui.view">
            <field name="name">product.normal.form</field>
            <field name="model">product.product</field>
            <field name="type">form</field>
            <field eval="7" name="priority"/>
            <field name="arch" type="xml">
                <form string="Product" hide_delete_button="1">
                   <group colspan="4" col="6">
                        <group colspan="1" col="2">
                            <separator string="Codes" colspan="2"/>
                            <field name="default_code" required="1" string="Code"  on_change="onchange_code(default_code)" attrs="{'readonly':[('duplicate_ok','=',False)]}" />
                            <field name="new_code"/>
                            <field name="duplicate_ok" invisible="1"/>
                        </group>
                        <group colspan="4" col="2">
                            <separator string="Description" colspan="2"/>
                            <field name="name" string="Description" />
                            <field name="old_code"/>
                            <field name="sale_ok" invisible="1" />
                            <field name="purchase_ok" invisible="1" />
                            <field name="xmlid_code" invisible="1" />
                        </group>
                    </group>

                    <notebook colspan="4">
                        <page string="Information">
                            <group colspan="2" col="2">
                                <separator string="Procurement" colspan="2"/>
                                <field name="type"/>
                                <field name="procure_method" />
                                <field name="supply_method"/>
                            </group>
                            <group colspan="2" col="3">
                                <separator string="Base Prices" colspan="3"/>
                                <field name="cost_method" colspan="3"/>
                                <field name="standard_price" string="Cost Price " attrs="{'readonly':[('cost_method','=','average')]}"/>
                                <field name="currency_id" nolabel="1" />
                                <field name="list_price" colspan="2"/>
                                <field name="field_currency_id" nolabel="1" />
                                <newline/>
                            </group>

                            <group colspan="2" col="2">
                                <separator string="Weights" colspan="2"/>
                                <field name="volume" attrs="{'readonly':[('type','=','service')]}"/>
                                <field name="soq_volume" attrs="{'readonly':[('type','=','service')]}"/>
                                <field name="weight" attrs="{'readonly':[('type','=','service')]}"/>
                                <field name="soq_weight" attrs="{'readonly':[('type','=','service')]}"/>
                                <!-- uf-1544
                                <field digits="(14, 3)" name="weight_net" attrs="{'readonly':[('type','=','service')]}"/>
                                 -->
                            </group>

                            <group colspan="2" col="3" name="status">
                                <separator string="Status" colspan="3"/>
                                <field name="categ_id" readonly="1" colspan="3"/>
                                <field name="international_status" required="1" widget="selection" colspan="3"/>
                                <field name="int_status_code" invisible="1" />
                                <field name="standard_ok" colspan="3" />
                                <field name="state" colspan="3" widget="selection" />
                                <field name="state_ud" colspan="3" />
                                <field name="oc_subscription" colspan="3" readonly="1" attrs="{'invisible': [('int_status_code', '!=', 'unidata')]}"/>
                                <group colspan="3" col="6">
                                    <field name="oc_validation" readonly="1" attrs="{'invisible': [('int_status_code', '!=', 'unidata')]}" />
                                    <field name="oc_validation_date" readonly="1" attrs="{'invisible': ['|', ('int_status_code', '!=', 'unidata'), ('oc_validation', '!=', True)]}" widget="date"/>
                                    <field name="oc_devalidation_date" readonly="1" attrs="{'invisible': ['|', ('int_status_code', '!=', 'unidata'), ('oc_validation', '=', True)]}" widget="date"/>
                                </group>
                                <group colspan="2" col="4">
                                    <field name="active" readonly="1"/>
                                    <field name="nsl_merged" attrs="{'invisible': [('int_status_code', '!=', 'local')]}" />
                                    <field name="unidata_merged" attrs="{'invisible': [('unidata_merged', '=', False)]}" />
                                </group>
                                <field name="instance_level" invisible="1" />
                                <group colspan="1" col="1">
                                   <field name="can_be_hq_merged" invisible="1"/>
                                   <button name="deactivate_product" icon="gtk-execute" string="De-activate product" type="object" attrs="{'invisible': [('active', '=', False)]}" />
                                   <button name="reactivate_product" icon="gtk-execute" string="Re-activate product" type="object" attrs="{'invisible': ['|', '|', ('active', '=', True), ('nsl_merged', '=', True), ('unidata_merged', '=', True)]}" />
                                   <button name="open_merge_product_wizard" icon="gtk-convert" string="Merge product" type="object"  attrs="{'invisible': ['|', '|', '|', ('int_status_code', '!=', 'local'), ('nsl_merged', '=', True), ('active', '=', False), ('instance_level', '!=', 'coordo')]}"/>
                                   <button name="open_merge_hq_product_wizard" icon="gtk-convert" string="HQ Merge product" type="object"  attrs="{'invisible': [('can_be_hq_merged', '!=', 'True')]}"/>
                                   <button name="pull_ud" icon="unidata.png" string="Pull UD OC Validation" type="object"  attrs="{'invisible': ['|', ('int_status_code', '!=', 'unidata'), ('instance_level', '!=', 'section')]}" />
                                </group>
                            </group>
                            <group colspan="2" col="3" name="quality">
                                <field name="expected_prod_creator" invisible="1"/>
                                <field name="uf_create_date" invisible="1"/>
                                <separator string="Quality" colspan="3"/>
                                <group colspan="1" col="2">
                                    <field name="perishable" attrs="{'readonly': [('uf_create_date', '!=', False)]}"/>
                                    <field name="batch_management" attrs="{'readonly': [('uf_create_date', '!=', False)]}" on_change="onchange_batch_management(batch_management)" />
                                </group>
                                <group colspan="2" col="1" attrs="{'invisible': [('expected_prod_creator', '=', False)]}">
                                    <button name="change_bn_ed_mandatory" icon="gtk-execute" string="Change to ED only" type="object" attrs="{'invisible': [('batch_management', '=', False), ('perishable', '=', True)]}" context="{'change_target': 'edonly'}"/>
                                    <button name="change_bn_ed_mandatory" icon="gtk-execute" string="Remove ED/BN" type="object" attrs="{'invisible': [('batch_management', '=', False), ('perishable', '=', False)]}" context="{'change_target': 'nobn_noed'}"/>
                                    <button name="change_bn_ed_mandatory" icon="gtk-execute" string="Change to BN+ED" type="object" attrs="{'invisible': [('batch_management', '=', True), ('perishable', '=', True)]}" context="{'change_target': 'bn'}"/>
                                </group>
                                <separator string="UOM" colspan="3"/>
                                <field name="soq_quantity" on_change="change_soq_quantity(soq_quantity, uom_id)" colspan="3"/>
                                <field name="uom_id" on_change="onchange_uom(uom_id,uom_po_id)" domain="[('compatible_product_id', '=', active_id)]" colspan="3"/>
                                <field name="uom_po_id" string="Exchangeable Unit of Measure" domain="[('compatible_product_id', '=', active_id)]" colspan="3"/>
                            </group>
                        </page>
                        <page string="MSL" attrs="{'invisible': [('int_status_code', '!=', 'unidata')]}">
                            <group colspan="4" col="6">
                                <field name="oc_coordo_restrictions" nolabel="1" colspan="2">
                                    <tree string="Mission Restrictions">
                                        <field name="code" />
                                    </tree>
                                </field>

                                <field name="oc_project_restrictions" nolabel="1" colspan="2">
                                    <tree string="Project Restrictions">
                                        <field name="instance_id" string="Code"/>
                                    </tree>
                                </field>

                                <field name="msl_project_ids" nolabel="1" colspan="2">
                                    <tree string="MSL">
                                        <field name="instance_id" string="Code"/>
                                        <field name="publication" />
                                    </tree>
                                </field>
                            </group>
                        </page>
                        <page string="Specific info">
                            <group colspan="2" col="2">
                                <separator string="Quality" colspan="2"/>
                                <field name="heat_sensitive_item" colspan="2" widget="selection" on_change="onchange_heat(heat_sensitive_item)"/>
                                <field name="show_cold_chain" invisible="1" />
                                <field name="cold_chain" colspan="2" attrs="{'invisible': [('show_cold_chain','=',False)]}"  widget="selection"/>
                                <field name="sterilized" colspan="2"/>
                                <field name="single_use" colspan="2"/>
                                <field name="controlled_substance" colspan="2"/>
                                <separator string="Transport" colspan="2"/>
                                <field name="dangerous_goods" colspan="2"/>
                                <field name="un_code" colspan="2"/>
                                <separator string="Import restrictions" colspan="4"/>
                                <field name="restricted_country" colspan="2"/>
                                <field name="country_restriction" colspan="2" widget="selection" attrs="{'readonly':[('restricted_country','=',False)]}"/>
                            </group>
                            <group colspan="2" col="2">
                                <separator string="Diffusion" colspan="2"/>
                                <field name="justification_code_id" colspan="2" />
                                <field name="closed_article" colspan="2"/>
                                <field name="manufacturer_ref" attrs="{'invisible': [('closed_article', '=', 'no')]}" />
                                <field name="manufacturer_txt" attrs="{'invisible': [('closed_article', '=', 'no')]}" />
                                <group colspan="2" col="2" attrs="{'invisible':[('int_status_code', '!=', 'unidata')]}">
                                    <separator string="MML Info" colspan="2"/>
                                    <separator string="UD Comments" colspan="2" />
                                    <field name="oc_comments" colspan="2" nolabel="1" />
                                    <separator string="Devalidation Reason" colspan="2" attrs="{'invisible': [('oc_validation', '=', True)]}" />
                                    <field name="oc_devalidation_reason" colspan="2" attrs="{'invisible': [('oc_validation', '=', True)]}" nolabel="1"/>
                                </group>
                            </group>
                            <group colspan="2" col="2">
                                <separator string="Form" colspan="2" />
                                <field name="form_value" nolabel="1" colspan="2" />
                            </group>
                            <group colspan="2" col="2">
                                <separator string="Fit" colspan="2" />
                                <field name="fit_value" nolabel="1" colspan="2" />
                            </group>
                            <group colspan="2" col="2">
                                <separator string="Function" colspan="2" />
                                <field name="function_value" nolabel="1" colspan="2" />
                            </group>
                        </page>
                        <page string="Miscellaneous">
                            <field name="msfid" invisible="1" readonly="1"/>
                            <group colspan="4" col="4">
                                <group colspan="2" col="2">
                                    <separator string="Information" colspan="2"/>
                                    <field name="criticism" colspan="2"/>
                                    <field name="abc_class" colspan="2"/>
                                </group>
                                <newline />
                                <separator string="Lists/Sublists" colspan="2"/>
                                <separator string="Code remarks section" colspan="2"/>
                                <field name="list_ids" colspan="2" nolabel="1" mode="tree">
                                    <tree string="Lists/Sublists">
                                        <field name="type" />
                                        <field name="name" />
                                        <field name="ref" />
                                    </tree>
                                </field>
                                <field name="supply_source_ids" colspan="2" nolabel="1" context="{'from_product':True}">
                                    <tree>
                                        <field name="source" />
                                    </tree>
                                </field>
                            </group>

                            <separator string="Associated Products" colspan="4"/>
                            <field name="options_ids" colspan="4" nolabel="1"/>
                        </page>
                        <page string="Suppliers">
                            <field colspan="4" name="seller_ids" nolabel="1">
                                <form>
                                    <field name="name" on_change="onchange_supplier(name)" attrs="{'readonly': [('catalogue_id', '!=', False)]}" />
                                    <field name="sequence" />
                                    <field name="product_code" attrs="{'readonly': [('catalogue_id', '!=', False)]}" />
                                    <field name="product_name" attrs="{'readonly': [('catalogue_id', '!=', False)]}" />
                                    <!-- utp-129: we filter the product_uom according to the uom_id of the product because of the constraint
                                    _check_uom in unifield-addons/product/product.py -->
                                    <field name="product_uom" domain="[('uom_by_parent', '=', parent.uom_id)]" attrs="{'readonly': [('catalogue_id', '!=', False)]}" />
                                    <field name="manufacturer_id" attrs="{'readonly': [('catalogue_id', '!=', False)]}" />
                                    <field name="catalogue_id" readonly="1" />
                                    <field name="second_manufacturer_id" attrs="{'readonly': ['|', ('manufacturer_id', '=', False), ('catalogue_id', '!=', False)]}"/>
                                    <field name="delay" attrs="{'readonly': [('catalogue_id', '!=', False)]}" />
                                    <field name="third_manufacturer_id" attrs="{'readonly': ['|', ('second_manufacturer_id', '=', False), ('catalogue_id', '!=', False)]}"/>
                                    <field colspan="4" name="pricelist_ids" nolabel="1" widget="one2many_list" context="{'partner_id': name}" attrs="{'readonly': [('catalogue_id', '!=', False)]}">
                                        <tree editable="top" string="Pricelist">
                                            <field name="min_quantity" on_change="onchange_uom_qty(uom_id, min_quantity, False)" />
                                            <field name="uom_id" on_change="onchange_uom_qty(uom_id, min_quantity, min_order_qty)" 
                                                   domain="[('uom_by_parent', '=', parent.product_uom)]" />
                                            <field name="price" />
                                            <field name="rounding" />
                                            <field name="currency_id" domain="[('partner_currency', '=', parent.name)]" />
                                            <field name="min_order_qty" on_change="onchange_uom_qty(uom_id, False, min_order_qty)" />
                                            <field name="valid_from" />
                                            <field name="valid_till" />
                                            <field name="comment" />
                                            <field name="purchase_order_id" />
                                            <field name="purchase_order_line_number" />
                                            <field name="purchase_order_line_id" />
                                        </tree>
                                    </field>
                                </form>
                                <tree>
                                    <field name="editable" invisible="1" />
                                    <field name="sequence_bis"/>
                                    <field name="name"/>
                                    <field name="product_code" />
                                    <field name="delay"/>
                                    <field name="catalogue_id"/>
                                    <field name="get_from_date"/>
                                    <field name="get_till_date"/>
                                    <field name="get_first_price"/>
                                    <field name="get_first_currency" />
                                    <field name="check_manufacturer"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Packaging">
                            <field colspan="4" name="packaging" nolabel="1">
                                <form string="Packaging">
                                    <field name="sequence" invisible="1"/>
                                    <newline/>
                                    <field name="qty"/>
                                    <field name="ul"/>
                                    <field name="weight_ul"/>
                                    <separator colspan="4" string="Palletization"/>
                                    <field name="ul_qty"/>
                                    <field name="rows"/>
                                    <field name="weight"/>
                                    <separator colspan="4" string="Pallet Dimension"/>
                                    <field name="height"/>
                                    <field name="width"/>
                                    <field name="length"/>
                                    <separator colspan="4" string="Description"/>
                                    <field colspan="4" name="name" nolabel="1"/>
                                </form>
                            </field>
                        </page>
                        <page string="Descriptions">
                            <separator string="Description"/>
                            <!-- uf-1544 invisible-->
                            <field name="product_catalog_page" invisible="1"/>
                            <field name="product_catalog_path" widget="url"/>
                            <separator string="Description"/>
                            <field colspan="4" name="description" nolabel="1"/>
                            <field colspan="4" name="description2" nolabel="1"/>
                            <separator string="Sale Description"/>
                            <field colspan="4" name="description_sale" nolabel="1"/>
                            <separator string="Purchase Description"/>
                            <field colspan="4" name="description_purchase" nolabel="1"/>
                        </page>
                        <page string="Procurement &amp; Locations">
                            <group colspan="2" col="2" name="delay">
                                <separator string="Delays" colspan="2"/>
                                <field name="sale_delay" attrs="{'readonly':[('sale_ok','=',0)]}" invisible="True" />
                                <field name="produce_delay" invisible="True" />
                            </group>
                            <!-- uf-1544 invisible-->
                            <group colspan="2" col="2" name="store">
                            </group>

                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="stock.view_normal_stock_property_form" model="ir.ui.view">
            <field name="name">product.normal.stock.form.inherit</field>
            <field name="model">product.product</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="product.product_normal_form_view"/>
            <field name="arch" type="xml">
                <group name="status" position="after">
                    <group colspan="2" col="3">
                        <separator string="Stocks" colspan="4"/>
                        <field name="qty_available"/>
                        <!--<button name="%(stock.action_view_change_product_quantity)d" string="Update" attrs="{'invisible': [('type', '=', 'service')]}"
                            type="action" icon="gtk-execute" />-->
                        <newline/>
                        <field name="virtual_available"/>
                    </group>
                </group>
            </field>
        </record>

        <record id="product_packaging_tree_view" model="ir.ui.view">
            <field name="name">product.packaging.tree.view.inherit</field>
            <field name="model">product.packaging</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="product.product_packaging_tree_view"/>
            <field name="arch" type="xml">
                <field name="ean" position="replace"/>
            </field>
        </record>

        <record id="product_supplierinfo_form_view" model="ir.ui.view">
            <field name="name">product.supplierinfo.form.view.inherit</field>
            <field name="model">product.supplierinfo</field>
            <field name="type">form</field>
            <field name="priority">45</field>
            <field name="inherit_id" ref="product.product_supplierinfo_form_view"/>
            <field name="arch" type="xml">
                <data>
                    <field name="sequence" position="replace">
                        <field name="sequence" string="Ranking"/>
                    </field>
                    <field name="company_id" position="replace"/>
                </data>
            </field>
        </record>

        <record id="product_supplierinfo_tree_view" model="ir.ui.view">
            <field name="name">product.supplierinfo.tree.view.inherit</field>
            <field name="model">product.supplierinfo</field>
            <field name="type">tree</field>
            <field name="priority">35</field>
            <field name="inherit_id" ref="product.product_supplierinfo_tree_view"/>
            <field name="arch" type="xml">
                <data>
                    <field name="company_id" position="replace"/>
                </data>
            </field>
        </record>

        <record model="ir.ui.view" id="product_manufacturer.view_product_form_expiry">
            <field name="name">product.normal.form</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_normal_form_view" />
            <field name="type">form</field>
            <field name="arch" type="xml">
                <data/>
            </field>
        </record>

        <record model="ir.ui.view" id="product_expiry.view_product_form_expiry">
            <field name="name">product.normal.form</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_normal_form_view" />
            <field name="type">form</field>
            <field name="arch" type="xml">
                <page string="Specific info" position="before">
                    <page string="Dates">
                        <field name="life_time" attrs="{'required': [('short_shelf_life', '=', 'True')]}" />
                        <field name="short_shelf_life" />
                        <field name="use_time" />
                        <field name="alert_time" />
                    </page>
                </page>
            </field>
        </record>

        <record id="product_search_form_view" model="ir.ui.view">
            <field name="name">product.search.form</field>
            <field name="model">product.product</field>
            <field name="type">search</field>
            <field name="priority">25</field>
            <field name="inherit_id" ref="product.product_search_form_view" />
            <field name="arch" type="xml">
               <field name="default_code" position="after">
                   <field name="old_code"/>
                   <field name="new_code"/>

               </field>
            </field>
        </record>

        <record id="product_section_code_tree_view" model="ir.ui.view">
            <field name="name">product.section.code.tree</field>
            <field name="model">product.section.code</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Section Code">
                    <field name="code" nolabel="1"/>
                    <field name="section" nolabel="1"/>
                    <field name="description" nolabel="1"/>
                </tree>
            </field>
        </record>

        <record id="product_supply_source_tree_view" model="ir.ui.view">
            <field name="name">product.supply.source.tree</field>
            <field name="model">product.supply.source</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Supply Source" editable="top" hide_new_button="context.get('from_product')" >
                    <field name="source" nolabel="1" required="True"/>
                </tree>
            </field>
        </record>

        <record id="product_supply_source_search_view" model="ir.ui.view">
            <field name="name">product.supply.source.search</field>
            <field name="model">product.supply.source</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Supply sources">
                    <field name="source" />
                </search>
            </field>
        </record>

        <record id="product_supply_source_action" model="ir.actions.act_window">
            <field name="name">Supply sources</field>
            <field name="res_model">product.supply.source</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem action="product_supply_source_action"
                  id="product_supply_source_menu"
                  parent="purchase.menu_product_in_config_purchase" />

        <record id="product.product_search_form_view" model="ir.ui.view">
            <field name="name">product.search.form</field>
            <field name="model">product.product</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Product">
                   <group>
                       <filter string="Stock>0"  icon="terp-accessories-archiver" domain="[('postive_qty','=',True)]"/>
                       <separator orientation="vertical"/>
                       <filter string="Stockable" icon="terp-accessories-archiver" domain="[('type','=','product')]"/>
                       <filter string="Non-Stockable" icon="terp-accessories-archiver" domain="[('type','=','consu')]"/>
                       <filter string="Service with Reception" name="service_with_reception" icon="terp-accessories-archiver" domain="[('type','=','service_recep')]" />
                       <separator orientation="vertical"/>
                   </group>
                   <field name="default_code" string="Code"/>
                   <field name="name" string="Description"/>
                   <field name="list_ids" widget="many2one" context="{'list': self}" />
                   <field name="uf_create_date" string="Creation" widget="date" />
                   <field name="uf_write_date" string="Modification" widget="date" />
                   <newline/>
                   <group>
                       <filter string="Single Item" icon="terp-accessories-archiver" domain="[('subtype','=','single')]"/>
                       <filter string="Kit/Module" icon="terp-accessories-archiver" domain="[('subtype','=','kit')]"/>
                       <filter string="Asset" icon="terp-accessories-archiver" domain="[('subtype','=','asset')]"/>
                       <group name="display_active_filter" invisible="1">
                            <filter name="active" string="Active" domain="[('active', '=', True)]" icon="terp-check" />
                            <filter name="inactive" string="Inactive" domain="[('active', '=', False)]" icon="gtk-dialog-error"/>
                       </group>
                   </group>
                   <group name="batch_attr" invisible="1">
                       <field name="batch_attributes" />
                    </group>
                   <newline/>
                   <group expand="0" string="Extended Filters..." />
                   <newline/>
                   <group  expand='0' string='Group by...' name="group_by">
                       <filter string='Category' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'categ_id'}" />
                       <separator orientation="vertical"/>
                       <filter string='Default UOM' icon="terp-mrp" domain="[]" context="{'group_by' : 'uom_id'}" />
                       <separator orientation="vertical"/>
                       <filter string='Type' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'type'}" />
                   </group>

                </search>
            </field>
        </record>

        <record id="stock.product_search_form_view_stock" model="ir.ui.view">
            <field name="name">product.search.stock.form</field>
            <field name="model">product.product</field>
            <field name="type">search</field>
            <field name="inherit_id" ref="product.product_search_form_view"/>
            <field name="arch" type="xml">
                   <field name="list_ids" position="before">
                       <field name="location_id" context="{'search_location': self}"/>
                       <separator orientation="vertical"/>
                   </field>
            </field>
        </record>

        <record id="product_search_replace_ext" model="ir.ui.view">
            <field name="name">product.search.replace.ext</field>
            <field name="model">product.product</field>
            <field name="type">search</field>
            <field name="inherit_id" ref="product.product_search_form_view"/>
            <field name="priority">40</field>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/search/group[@string='Extended Filters...']" position="replace">
                    </xpath>
                </data>
            </field>
        </record>

        <record id="product_form_replace_pack" model="ir.ui.view">
            <field name="name">product.form.replace.ext</field>
            <field name="model">product.product</field>
            <field name="type">form</field>
            <field name="priority">110</field>
            <field name="inherit_id" ref="product.product_normal_form_view"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/form/notebook/page[@string='Packaging']" position="replace">
                    </xpath>
                </data>
            </field>
        </record>

        <!-- List of actions at the bottom of the list, the dashed line-break is located on the web's side -->
        <!-- FO -->
        <record id="action_product_fo_tree" model="ir.actions.server">
            <field name="name">Field Orders</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="state">code</field>
            <field name="code">
action = self.view_docs_with_product(cr, uid, ids, menu_action='sale.action_order_form', context=context)
            </field>
        </record>

        <record id="open_product_fo_tree" model="ir.values">
            <field name="key2">client_action_relate</field>
            <field name="model">product.product</field>
            <field name="name">Field Orders</field>
            <field name="value" eval="'ir.actions.server,%d'%action_product_fo_tree"/>
            <field name="object" eval="True"/>
            <field name="sequence" eval="100001"/>
        </record>

        <!-- IR -->
        <record id="action_product_ir_tree" model="ir.actions.server">
            <field name="name">Internal Requests</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="state">code</field>
            <field name="code">
action = self.view_docs_with_product(cr, uid, ids, menu_action='procurement_request.action_procurement_request', context=context)
            </field>
        </record>

        <record id="open_product_ir_tree" model="ir.values">
            <field name="key2">client_action_relate</field>
            <field name="model">product.product</field>
            <field name="name">Internal Requests</field>
            <field name="value" eval="'ir.actions.server,%d'%action_product_ir_tree"/>
            <field name="object" eval="True"/>
            <field name="sequence" eval="100002"/>
        </record>

        <!-- PO -->
        <record id="action_product_po_tree" model="ir.actions.server">
            <field name="name">Purchases</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="state">code</field>
            <field name="code">
action = self.view_docs_with_product(cr, uid, ids, menu_action='purchase.purchase_form_action', context=context)
            </field>
        </record>

        <record id="open_product_po_tree" model="ir.values">
            <field name="key2">client_action_relate</field>
            <field name="model">product.product</field>
            <field name="name">Purchases</field>
            <field name="value" eval="'ir.actions.server,%d'%action_product_po_tree"/>
            <field name="object" eval="True"/>
            <field name="sequence" eval="100003"/>
        </record>

        <!-- RfQ -->
        <record id="action_product_rfq_tree" model="ir.actions.server">
            <field name="name">RfQs</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="state">code</field>
            <field name="code">
action = self.view_docs_with_product(cr, uid, ids, menu_action='purchase.purchase_rfq', context=context)
            </field>
        </record>

        <record id="open_product_rfq_tree" model="ir.values">
            <field name="key2">client_action_relate</field>
            <field name="model">product.product</field>
            <field name="name">RfQs</field>
            <field name="value" eval="'ir.actions.server,%d'%action_product_rfq_tree"/>
            <field name="object" eval="True"/>
            <field name="sequence" eval="100004"/>
        </record>

        <!-- Tender -->
        <record id="action_product_tender_tree" model="ir.actions.server">
            <field name="name">Tenders</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="state">code</field>
            <field name="code">
action = self.view_docs_with_product(cr, uid, ids, menu_action='tender_flow.tender_action', context=context)
            </field>
        </record>

        <record id="open_product_tender_tree" model="ir.values">
            <field name="key2">client_action_relate</field>
            <field name="model">product.product</field>
            <field name="name">Tenders</field>
            <field name="value" eval="'ir.actions.server,%d'%action_product_tender_tree"/>
            <field name="object" eval="True"/>
            <field name="sequence" eval="100005"/>
        </record>

        <!-- IN -->
        <record id="action_product_in_tree" model="ir.actions.server">
            <field name="name">Incoming Shipments</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="state">code</field>
            <field name="code">
action = self.view_docs_with_product(cr, uid, ids, menu_action='stock.action_picking_tree4', context=context)
            </field>
        </record>

        <record id="open_product_in_tree" model="ir.values">
            <field name="key2">client_action_relate</field>
            <field name="model">product.product</field>
            <field name="name">Incoming Shipments</field>
            <field name="value" eval="'ir.actions.server,%d'%action_product_in_tree"/>
            <field name="object" eval="True"/>
            <field name="sequence" eval="100006"/>
        </record>

        <!-- INT -->
        <record id="action_product_int_tree" model="ir.actions.server">
            <field name="name">Internal Moves</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="state">code</field>
            <field name="code">
action = self.view_docs_with_product(cr, uid, ids, menu_action='stock.action_picking_tree6', context=context)
            </field>
        </record>

        <record id="open_product_int_tree" model="ir.values">
            <field name="key2">client_action_relate</field>
            <field name="model">product.product</field>
            <field name="name">Internal Moves</field>
            <field name="value" eval="'ir.actions.server,%d'%action_product_int_tree"/>
            <field name="object" eval="True"/>
            <field name="sequence" eval="100007"/>
        </record>

        <!-- OUT -->
        <record id="action_product_out_tree" model="ir.actions.server">
            <field name="name">Delivery Orders</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="state">code</field>
            <field name="code">
action = self.view_docs_with_product(cr, uid, ids, menu_action='stock.action_picking_tree', context=context)
            </field>
        </record>

        <record id="open_product_out_tree" model="ir.values">
            <field name="key2">client_action_relate</field>
            <field name="model">product.product</field>
            <field name="name">Delivery Orders</field>
            <field name="value" eval="'ir.actions.server,%d'%action_product_out_tree"/>
            <field name="object" eval="True"/>
            <field name="sequence" eval="100008"/>
        </record>

        <!-- Pick -->
        <record id="action_product_pick_tree" model="ir.actions.server">
            <field name="name">Pickings</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="state">code</field>
            <field name="code">
action = self.view_docs_with_product(cr, uid, ids, menu_action='msf_outgoing.action_picking_ticket', context=context)
            </field>
        </record>

        <record id="open_product_pick_tree" model="ir.values">
            <field name="key2">client_action_relate</field>
            <field name="model">product.product</field>
            <field name="name">Pickings</field>
            <field name="value" eval="'ir.actions.server,%d'%action_product_pick_tree"/>
            <field name="object" eval="True"/>
            <field name="sequence" eval="100009"/>
        </record>

        <!-- PPL -->
        <record id="action_product_pack_tree" model="ir.actions.server">
            <field name="name">Packings</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="state">code</field>
            <field name="code">
action = self.view_docs_with_product(cr, uid, ids, menu_action='msf_outgoing.action_ppl', context=context)
            </field>
        </record>

        <record id="open_product_pack_tree" model="ir.values">
            <field name="key2">client_action_relate</field>
            <field name="model">product.product</field>
            <field name="name">Packings</field>
            <field name="value" eval="'ir.actions.server,%d'%action_product_pack_tree"/>
            <field name="object" eval="True"/>
            <field name="sequence" eval="100010"/>
        </record>

        <!-- Add a link to see all inactivated products -->
        <act_window
           context="{}"
           domain="[('active', '=', False)]"
           id="unactive_product_list"
           name="Inactivated products"
           res_model="product.product"
           src_model="product.product" />


        <record id="view_act_product_stock_move_open" model="ir.ui.view">
            <field name="name">Stock Moves</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="priority">19</field>
            <field name="arch" type="xml">
                <tree colors="grey:state in ('cancel')" string="Moves"  noteditable="1" hide_delete_button="1"    hide_new_button="1" editable="top">
                    <field name="name" />
                    <field name="picking_id" string="Reference"/>
                    <field name="origin"/>
                    <field name="reason_type_id" />
                    <field name="comment" />
                    <field name="partner_id" />
                    <field name="product_id" />
                    <field name="product_qty" />
                    <field name="product_uom" string="UOM"/>
                    <field name="order_type" />
                    <field name="order_category" />
                    <field name="order_priority" />
                    <field name="prodlot_id" />
                    <field name="tracking_id" />
                    <field name="location_id" />
                    <field name="location_dest_id" />
                    <field name="date" />
                    <field name="date_expected" />
                    <field name="state" />
                    <field name="lot_check" />
                    <field name="exp_check" />
                    <field name="kc_check" />
                    <field name="dg_check" />
                    <field name="np_check" />
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window.view" id="act_product_stock_move_open_tree">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_act_product_stock_move_open"/>
            <field name="act_window_id" ref="stock.act_product_stock_move_open"/>
        </record>

        <menuitem id="menu_main_product" name="Products" sequence="1" 
                  web_icon_hover="images/products.png"
                  web_icon="images/products-hover.png" 
                  action="product.product_normal_action"
                />

        <menuitem id="menu_product_config" name="Configuration" parent="menu_main_product" sequence="20" />
        <menuitem id="product.prod_config_main" name="Product" parent="product_attributes.menu_product_config" sequence="9"/>
        <menuitem id="base.menu_product" name="Products" parent="menu_main_product" sequence="9" />

	<!-- status -->
	<record id="product_status_search" model="ir.ui.view">
	    <field name="name">product.status.search</field>
	    <field name="model">product.status</field>
	    <field name="type">search</field>
	    <field name="arch" type="xml">
	        <search string="Status">
	            <field name="name" />
	        </search>
	    </field>
	</record>
	<record id="product_status_tree" model="ir.ui.view">
	    <field name="name">product.status.tree</field>
	    <field name="model">product.status</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Status" noteditable="True" editable="top" hide_new_button="1" hide_delete_button="1">
                    <field name="name" />
                    <field name="no_external" />
                    <field name="no_esc" />
                    <field name="no_internal" />
                    <field name="no_consumption" />
                    <field name="no_storage" />
                </tree>
            </field>
        </record>
	<record id="product_status_action" model="ir.actions.act_window">
            <field name="name">Status</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.status</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="product_status_search" />
        </record>
        <menuitem id="menu_status_product"
                  action="product_status_action"
                  parent="purchase.menu_product_in_config_purchase" />

	<!-- international status -->
	<record id="product_international_status_search" model="ir.ui.view">
	    <field name="name">product.international.status.search</field>
	    <field name="model">product.international.status</field>
	    <field name="type">search</field>
	    <field name="arch" type="xml">
	        <search string="Product Creators">
	            <field name="name" />
	        </search>
	    </field>
	</record>
	<record id="product_international_status_tree" model="ir.ui.view">
	    <field name="name">product.international.status.tree</field>
	    <field name="model">product.international.status</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Product Creators" editable="top" >
                    <field name="name" />
                    <field name="no_external" />
                    <field name="no_esc" />
                    <field name="no_internal" />
                    <field name="no_consumption" />
                    <field name="no_storage" />
                </tree>
            </field>
        </record>
	<record id="product_international_status_action" model="ir.actions.act_window">
            <field name="name">Product creators</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.international.status</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="product_international_status_search" />
        </record>
        <menuitem id="menu_international_status_product"
                  action="product_international_status_action"
                  parent="purchase.menu_product_in_config_purchase" />

	<!-- heat sensitive -->
	<record id="product_heat_sensitive_search" model="ir.ui.view">
	    <field name="name">product.heat_sensitive.search</field>
	    <field name="model">product.heat_sensitive</field>
	    <field name="type">search</field>
	    <field name="arch" type="xml">
	        <search string="Temperature sensitive">
	            <field name="name" />
	        </search>
	    </field>
	</record>
	<record id="product_heat_sensitive_tree" model="ir.ui.view">
	    <field name="name">product.heat_sensitive.tree</field>
	    <field name="model">product.heat_sensitive</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Temperature sensitive" editable="top" >
	            <field name="name" />
                </tree>
            </field>
        </record>
	<record id="product_heat_sensitive_action" model="ir.actions.act_window">
            <field name="name">Temperature sensitive</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.heat_sensitive</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="product_heat_sensitive_search" />
        </record>
        <menuitem id="menu_heat_sensitive_product"
                  action="product_heat_sensitive_action"
                  parent="purchase.menu_product_in_config_purchase" />

	<!-- Cold chain -->
	<record id="product_cold_chain_search" model="ir.ui.view">
	    <field name="name">product.cold_chain.search</field>
	    <field name="model">product.cold_chain</field>
	    <field name="type">search</field>
	    <field name="arch" type="xml">
	        <search string="Thermosensitivity">
	            <field name="name" />
	            <field name="cold_chain" />
	        </search>
	    </field>
	</record>
	<record id="product_cold_chain_tree" model="ir.ui.view">
	    <field name="name">product.cold_chain.tree</field>
	    <field name="model">product.cold_chain</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Thermosensitivity" editable="top" >
                <field name="name" />
                <field name="cold_chain" />
                </tree>
            </field>
        </record>
    <record id="product_cold_chain_form" model="ir.ui.view">
        <field name="name">product.cold_chain.form</field>
        <field name="model">product.cold_chain</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Thermosensitivity">
                    <field name="name" />
                    <field name="cold_chain" />
                </form>
            </field>
    </record>
	<record id="product_cold_chain_action" model="ir.actions.act_window">
            <field name="name">Thermosensitivity</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.cold_chain</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="product_cold_chain_search" />
        </record>
	<menuitem id="menu_cold_chain_product"
                  action="product_cold_chain_action"
                  parent="purchase.menu_product_in_config_purchase" />

        <record id="product_justification_code_form_view" model="ir.ui.view">
            <field name="name">product.justification.code.form</field>
            <field name="model">product.justification.code</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Justification Code">
                    <field name="code" readonly="True"/>
                    <field name="description" readonly="True"/>
                </form>
            </field>
        </record>

        <record id="product_justification_code_tree_view" model="ir.ui.view">
            <field name="name">product.justification.code.tree</field>
            <field name="model">product.justification.code</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Justification Code" editable="top">
                    <field name="code" />
                    <field name="description"/>
                </tree>
            </field>
        </record>

        <record id="product_justification_code_search_view" model="ir.ui.view">
            <field name="name">product.justification.code.search.view</field>
            <field name="model">product.justification.code</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Justification Codes">
                    <field name="description" />
                </search>
            </field>
        </record>

        <record id="product_justification_code_action" model="ir.actions.act_window">
            <field name="name">Justification codes</field>
            <field name="res_model">product.justification.code</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="product_justification_code_search_view" />
        </record>

        <menuitem id="menu_justification_code_product"
                  action="product_justification_code_action"
                  parent="purchase.menu_product_in_config_purchase" />

        
        
        <!--  Deactivation product error wizard -->
        <record id="deactivation_product_error_form_view" model="ir.ui.view">
           <field name="name">deactivation.product.error.form.view</field>
           <field name="model">product.deactivation.error</field>
           <field name="type">form</field>
           <field name="arch" type="xml">
              <form string="Product deactivation error">
                 <separator string="Concerned product" />
                 <field name="product_id" colspan="4"/>
                 <separator string="You cannot inactivate this product due to below reasons :" />
                 <field name="stock_exist" colspan="4" />
                 <field name="opened_object" colspan="4" />
                 <group attrs="{'invisible': [('opened_object', '=', False)]}" colspan="4" col="4">
                    <separator colspan="4" string="Documents" />
                    <field name="error_lines" attrs="{'invisible': [('opened_object', '=', False)]}" mode="tree" readonly="1" colspan="4" nolabel="1">
                       <tree string="Error documents">
                          <field name="type"/>
                          <field name="doc_ref"/>
                          <button name="open_doc" type="object" string="Open the document" icon="terp-gtk-go-back-rtl"/> 
                       </tree>
                    </field>
                    </group>
                    <separator string="Actions" colspan="4" />
                    <label colspan="3"> </label>
                    <button type="object" name="return_to_product" string="Close window" icon="gtk-cancel" />
              </form>
           </field>
       </record>

        <record id="change_bn_ed_mandatory_wizard" model="ir.ui.view">
            <field name="name">change.bn.ed.mandatory.wizard</field>
            <field name="model">change.bn.ed.mandatory.wizard</field>
            <field name="arch" type="xml">
                <form string="Batch Number / Expiry Date flags change">
                    <group colspan="4" col="1">
                        <html>
                            <h3 style="text-align: center; margin: 10px; font-weight: normal"><translate>
                                This product is still in use, changing the Batch Number / Expiry Date flags will have an impact on the quantity in stock or in pending transactions.<br /><br />
                                Once this action is done, any previous Batch / Expiry date information will no longer be available according to the attributes chosen...<br /><br />
                                Do you still want to continue ?
                            </translate></h3>
                        </html>
                    </group>
                    <newline />
                    <button name="yes_change_bn_ed_mandatory" string="Yes" type="object" icon="terp-check" colspan="1" />
                    <button name="no_change_bn_ed_mandatory" string="No" type="object" icon="gtk-cancel" colspan="1" />
                </form>
            </field>
        </record>

        <!-- Product Mass Update Menu -->
        <menuitem id="product.parent_product_mass_update" parent="product_attributes.menu_main_product" name="Products Update" />
        <menuitem action="product.previous_mass_update_action" id="menu_import_request" sequence="1" parent="product.parent_product_mass_update" />
        <menuitem action="product.products_bn_ed_mass_update_action" id="products_bn_ed_mass_update_menu" sequence="20" parent="product.parent_product_mass_update" />

        <record id="product_ask_activate_wizard_form_view" model="ir.ui.view">
            <field name="name">product.ask.activate.wizard.form.view</field>
            <field name="model">product.ask.activate.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Warning">
                    <field name="product_id" invisible="1" />
                    <group colspan="4" col="1">
                        <html>
                            <h3 style="text-align: center; margin: 10px"><translate>This is an NSL (Non-standard Local) product, please ensure that there is no duplicate “Local” product with which this product should be merged. If you activate and start to use this product it will no longer be possible to merge it with another.</translate></h3>
                        </html>
                    </group>
                    <group colspan="4" col="2">
                        <separator string="Actions" colspan="2" />
                        <button name="do_activate_product" string="OK" type="object" icon="gtk-ok" colspan="1" />
                        <button name="button_close" string="Cancel" type="object" icon="gtk-cancel" colspan="1" />
                    </group>
                </form>
            </field>
        </record>

    </data>
</openerp>
