<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <!-- Tree for purchase displayed on the accounting board -->
        <record id="account_purchase_order_tree" model="ir.ui.view">
            <field name="name">account.purchase.order.tree</field>
            <field name="model">purchase.order</field>
            <field name="priority" eval="20"/>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="grey:state=='cancel';blue:state in ('wait','confirmed');red:state in ('except_invoice','except_picking')" string="Purchase Order">
                    <field name="name" string="Reference"/>
                    <field name="date_order" string="Order Date"/>
                    <field name="partner_id"/>
                    <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    <field name="location_id"/>
                    <field name="minimum_planned_date"/>
                    <field name="origin"/>
                    <field name="invoiced_rate" widget="progressbar"/>
                    <field name="shipped_rate" widget="progressbar"/>
                    <field name="amount_untaxed" sum="Total Untaxed amount"/>
                    <field name="amount_total" sum="Total amount"/>
                    <field name="state"/>
                    <button name="purchase_confirmed_wait" states="confirmed" string="Confirm" icon="gtk-go-forward"/>
                </tree>
            </field>
        </record>

        <!-- Action that give a link to the purchase_order_tree only for accounting (priority superior to the mainly purchase_order_tree -->
        <record id="purchase_waiting_msf" model="ir.actions.act_window">
            <field name="name">Purchase Order Waiting Approval</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">purchase.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="account_purchase_order_tree"/>
            <field name="domain">[('date_order','&gt;',time.strftime('%Y-01-01 00:00:00')),('date_order','&lt;',time.strftime('%Y-12-31 23:59:59')), ('state','in',('wait','confirmed'))]</field>
            <field name="search_view_id" eval="False"/>
        </record>

        <!-- DashBoard -->
        <record id="account_board_commitment_voucher_view" model="ir.ui.view">
            <field name="name">account.commitment</field>
            <field name="model">account.commitment</field>
            <field name="type">tree</field>
            <field name="priority">80</field>
            <field name="arch" type="xml">
                <tree string="Statement" limit="5">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="partner_id"/>
                    <field name="purchase_id"/>
                    <field name="currency_id"/>
                    <field name="total"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="account_board_commitment_voucher" model="ir.actions.act_window">
            <field name="name">Commitment Voucher</field>
            <field name="res_model">account.commitment</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <!-- US-2704 domain is related to action_account_commitment_tree of analytic_distribution/account_commitment_view.xml with state='draft' domain addition -->
            <field name="domain">[('state', '=', 'draft'), ('cv_flow_type', '=', 'supplier')]</field>
            <field name="context">{'board_view': True, 'search_default_draft': 1}</field>
            <field ref="account_board_commitment_voucher_view" name="view_id"/>
            <field name="limit">5</field>
        </record>

        <record id="account_board_supplier_invoice_draft_view" model="ir.ui.view">
            <field name="name">account.invoice</field>
            <field name="model">account.invoice</field>
            <field name="type">tree</field>
            <field name="priority">80</field>
            <field name="arch" type="xml">
                <tree string="Statement" limit="5">
                    <field name="number"/>
                    <field name="name"/>
                    <field name="partner_id"/>
                    <field name="date_invoice"/>
                    <field name="date_due"/>
                    <field name="currency_id"/>
                    <field name="amount_to_pay"/>
                    <field name="amount_total"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="account_board_supplier_invoice_draft" model="ir.actions.act_window">
            <field name="name">Suppliers invoices pending validation</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <!-- US-2704 domain is related to account.action_invoice_tree2 of account_override/account_invoice_view.xml with state='draft' domain addition -->
            <field name="domain">[('state', '=', 'draft'), ('doc_type', '=', 'si')]</field>
            <field name="context">{'doc_type': 'si', 'board_view': True, 'type': 'in_invoice', 'journal_type': 'purchase', 'from_inv_form': True, 'search_default_draft': 1}</field>
            <field ref="account_board_supplier_invoice_draft_view" name="view_id"/>
            <field name="limit">5</field>
        </record>

        <record id="account_board_supplier_invoice_open" model="ir.actions.act_window">
            <field name="name">Suppliers invoices pending payment</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <!-- US-2704 domain is related to account.action_invoice_tree2 of account_override/account_invoice_view.xml with state='open' domain addition -->
            <field name="domain">[('state', '=', 'open'), ('doc_type', '=', 'si')]</field>
            <field name="context">{'doc_type': 'si', 'board_view': True, 'type': 'in_invoice', 'journal_type': 'purchase', 'from_inv_form': True, 'search_default_unpaid': 1}</field>
            <field ref="account_board_supplier_invoice_draft_view" name="view_id"/>
            <field name="limit">5</field>
        </record>

        <!-- Show the Currency rates -->
        <record id="account_board_currency_view" model="ir.ui.view">
            <field name="name">res.currency</field>
            <field name="model">res.currency</field>
            <field name="type">tree</field>
            <field name="priority">80</field>
            <field name="arch" type="xml">
                <tree string="Latest FX rates" limit="5">
                    <field name="name"/>
                    <field name="rate"/>
                    <field name="date"/>
                </tree>
            </field>
        </record>

        <record id="account_board_currency" model="ir.actions.act_window">
            <field name="name">Latest FX rates</field>
            <field name="res_model">res.currency</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field ref="account_board_currency_view" name="view_id"/>
            <field name="context">{'board_view': True}</field>
            <field name="limit">3</field>
        </record>

        <record id="account_board_period_view" model="ir.ui.view">
            <field name="name">account.period.board</field>
            <field name="model">account.period</field>
            <field name="type">tree</field>
            <field name="priority">80</field>
            <field name="arch" type="xml">
                <tree string="Account periods" limit="5">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="date_start"/>
                    <field name="date_stop"/>
                    <field name="fiscalyear_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="account_board_period" model="ir.actions.act_window">
            <field name="name">Account Periods</field>
            <field name="res_model">account.period</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field ref="account_board_period_view" name="view_id"/>
            <field name="domain">[('state', '=', 'draft'), ('special', '=', False)]</field>
            <field name="context">{'board_view': True}</field>
        </record>

        <!-- Show HQ entries to be validated -->
        <record id="account_hq_entries_view" model="ir.ui.view">
            <field name="name">hq.entries</field>
            <field name="model">hq.entries</field>
            <field name="type">tree</field>
            <field name="priority">80</field>
            <field name="arch" type="xml">
                <tree string="HQ Entries to be validated" limit="5" editable="top">
                    <field name="name"/>
                    <field name="ref"/>
                    <field name="date"/>
                    <field name="period_id"/>
                    <field name="account_id"/>
                    <field name="amount"/>
                    <field name="currency_id"/>
                    <field name="cost_center_id"/>
                </tree>
            </field>
        </record>

        <record id="account_hq_entries" model="ir.actions.act_window">
            <field name="name">HQ Entries to be validated</field>
            <field name="res_model">hq.entries</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field ref="account_hq_entries_view" name="view_id"/>
            <!-- US-2704 domain is related to action_hq_entries_tree of account_hq_entries/account_view.xml with user_validated!=True domain addition -->
            <field name="domain">[('user_validated', '!=', True)]</field>
            <field name="context">{'board_view': True, 'search_default_non_validated': 1}</field>
            <field name="limit">5</field>
        </record>
        <!-- End HQ Entries -->

        <!-- Show the Payrolls entries to be validated -->
        <record id="hr_payroll_board_view" model="ir.ui.view">
            <field name="name">hr.payroll.msf</field>
            <field name="model">hr.payroll.msf</field>
            <field name="type">tree</field>
            <field name="priority">80</field>
            <field name="arch" type="xml">
                <tree string="Payroll Entries to be validated" limit="5" editable="top">
                    <field name="name"/>
                    <field name="ref"/>
                    <field name="period_id"/>
                    <field name="employee_id_number"/>
                    <field name="account_id"/>
                    <field name="amount"/>
                    <field name="currency_id"/>
                </tree>
            </field>
        </record>
        <record id="hr_payroll_board" model="ir.actions.act_window">
            <field name="name">Payroll entries to be validated</field>
            <field name="res_model">hr.payroll.msf</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field ref="hr_payroll_board_view" name="view_id"/>
            <field name="domain">[('state', '=', 'draft'), ('account_id.is_analytic_addicted', '=', True)]</field>
            <field name="context">{'board_view': True}</field>
            <field name="limit">5</field>
        </record>
        <!-- End for Payroll -->

        <!-- Custom Accounting Board moved to msf_profile/view/boad_accounting_view.xml -->

    </data>
</openerp>
