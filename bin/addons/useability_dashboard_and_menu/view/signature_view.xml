<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="res_users_my_signature_form" model="ir.ui.view">
            <field name="name">my_Signature_form</field>
            <field name="model">res.users</field>
            <field name="type">form</field>
            <field name="priority">201</field>
            <field name="arch" type="xml">
                <form hide_new_button="1" hide_save_button="1" hide_duplicate_button="1" hide_delete_button="1" hide_cancel_button="1" string="My Signature">
                    <group colspan="2" col="4">
                    <field name="name" readonly="1" />
                    <field name="login" readonly="1" />
                    <newline />
                        <field name="signature_from" readonly="1"/>
                        <field name="signature_to" readonly="1" />
                        <field name="current_signature" widget="image" height="100" nolabel="1" colspan="4"/>
                        <field name="new_signature_required" invisible="1" />
                        <field name="has_valid_signature" invisible="1" />
                        <button type="object" string="Replace Signature" name="replace_signature" icon="gtk-edit" colspan="2" attrs="{'invisible': [('new_signature_required', '=', True), ('has_valid_signature', '=', False)]}"/>
                        <button type="object" string="Delete Signature" name="delete_signature" icon="gtk-del" colspan="2" attrs="{'invisible': [('new_signature_required', '=', True), ('has_valid_signature', '=', False)]}"/>
                        <button type="object" string="Create Signature" name="add_signature" icon="gtk-edit" colspan="2" attrs="{'invisible': ['|', ('new_signature_required', '=', False), ('has_valid_signature', '=', True)]}" />

                        <field name="signature_history_ids" colspan="4" mode="tree" readonly="1" nolabel="1">
                            <tree string="De-activated Signatures">
                                <field name="legal_name" />
                                <field name="user_name" />
                                <field name="create_date" />
                                <field name="inactivation_date" />
                                <field name="image" widget="image" height="50"/>
                            </tree>
                        </field>
                    </group>
                    <label colspan="2"/>
                </form>
            </field>
        </record>

        <record id="my_signature_server_action" model="ir.actions.server">
           <field name="name">My Signature</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="state">code</field>
            <field name="code">
action = self.open_my_signature(cr, uid, context=context)
            </field>
        </record>

        <menuitem id="my_signature_menu" name="My Signature" action="my_signature_server_action" type="server" parent="base.menu_users" sequence="17"/>


        <function model="ir.ui.view" name="generate_button_access_rules">
            <function model="ir.ui.view" name="search" eval="[[('id', '=', ref('base.view_users_form'))]]"/>
        </function>

        <function model="ir.ui.view" name="generate_button_access_rules">
            <function model="ir.ui.view" name="search" eval="[[('id', '=', ref('base.signature_change_date_form'))]]"/>
        </function>



    </data>
</openerp>
