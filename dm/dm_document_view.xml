<?xml version="1.0"?>
<openerp>
<data>

	<menuitem name="Documents" id="menu_action_offer_doc" parent="dm.menu_dm_config" sequence="1" />
	
	<!--
	=======================================================
	OFFER STEP DOCUMENT CATEGORY VIEWS
	=======================================================
	-->

	<record model="ir.ui.view" id="view_offer_step_document_categ_form">
		<field name="name">dm.offer.document.category.form</field>
		<field name="model">dm.offer.document.category</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Document Category">
				<field name="name" select="1"/>
				<field name="parent_id"/>
			</form>
		</field>
	</record>

	<record model="ir.ui.view" id="view_offer_step_document_categ_tree">
		<field name="name">dm.offer.document.category.tree</field>
		<field name="model">dm.offer.document.category</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Document Category">
				<field name="complete_name"/>
			</tree>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_doc_categ_form">
		<field name="name">Edit document categories</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer.document.category</field>
		<field name="view_type">form</field>
		<field name="view_id" ref="view_offer_step_document_categ_tree"/>
	</record>

	<menuitem id="menu_action_offer_doc_categ_form" parent="dm.menu_action_offer_doc" action="action_doc_categ_form" sequence="1"/>

	<!--
	=======================================================
	OFFER STEP DOCUMENT VIEWS
	=======================================================
	-->

	<record model="ir.ui.view" id="view_offer_step_document_form">
		<field name="name">dm.offer.document.form</field>
		<field name="model">dm.offer.document</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Documents">
				<notebook>
				<page string="General">
					<field name="name" select="1"/>
					<field name="code" select="2"/>
					<field name="lang_id"/>
					<field name="copywriter_id" select="1"/>
					<field name="step_id" select="1"/>
					<separator string="Document Categories" colspan="4"/>
					<field name="category_ids" colspan="4" nolabel="1"/>
					<separator string="Description" colspan="4"/>
					<field name="note" colspan="4" nolabel="1"/>
					<separator string="Status" colspan="4"/>
					<group col="2" colspan="4">
						<field name="state" nolabel="1"/>
						<button name="state_validate_set" string="Validate" states="draft"/>
					</group>
				</page>
				<page string="Dynamic Fields">
					<field name="document_template_id" select="1" on_change ="onchange_plugin(document_template_id)"/>
					<separator string="Template Plugins" colspan="4"/>
					<field name="document_template_plugin_ids" colspan="4" nolabel="1" context="{'dm_template_id':document_template_id}"/>
				</page>				
				</notebook>
			</form>
		</field>
	</record>

	<record model="ir.ui.view" id="view_offer_step_document_tree">
		<field name="name">dm.offer.document.tree</field>
		<field name="model">dm.offer.document</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree colors="red:not bool(has_attachment)" string="Documents">
				<field name="name"/>
				<field name="code"/>
				<field name="copywriter_id"/>
				<field name="state"/>
				<field name="has_attachment" invisible="1"/>
			</tree>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_document_form">
		<field name="name">All Documents</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer.document</field>
		<field name="view_type">form</field>
		<field name="view_id" ref="view_offer_step_document_tree"/>
	</record>

	<menuitem id="menu_action_document_form" parent="dm.menu_action_offer_doc" action="action_document_form" sequence="2"/>

    <!--
    =======================================================
    Document Template
    =======================================================
    -->

    <record model="ir.ui.view" id="view_dm_document_template_form">
        <field name="name">dm.document.template.form</field>
        <field name="model">dm.document.template</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Document Template">
                <field name="name" select="1"/>
                <separator string="Plugins" colspan="4"/>
                <field name="plugin_ids" colspan="4" nolabel="1" />
                <separator string="Description" colspan="4"/>
                <field name="note" colspan="4" nolabel="1"/>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_document_template_tree">
        <field name="name">dm.document.template.tree</field>
        <field name="model">dm.document.template</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Document Template">
                <field name="name" select="1"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_template">
        <field name="name">All Document Dynamic Fields Templates</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.document.template</field>
        <field name="view_type">form</field>
        <field name="view_id" ref="view_dm_document_template_tree"/>
    </record>

    <menuitem id="menu_action_dm_template" parent="dm.menu_action_offer_doc" action="action_dm_template" sequence="2" />
    
    <!--
    =======================================================
    Plugin
    =======================================================
    -->

    <record model="ir.ui.view" id="view_dm_ddf_plugin_form">
        <field name="name">dm.ddf.plugin.form</field>
        <field name="model">dm.ddf.plugin</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Plugin">
            	<group  colspan="4">
	                <field name="name" select="1" colspan="4"/>
	                <field name="field" select="2" colspan="4"/>
	                <field name="file_id" colspan="4" filename="file_fname"/>
	                <field name="file_fname"/>
                </group>
                <newline/>
				<separator string="Argument List" colspan="4"/>
				<field name="argument_ids" nolabel="1" colspan="4">
					<form string="Argument List">
            			<group  colspan="4">
			                <field name="name" select="1"/>
			                <field name="value"/>
						</group>			                
						<separator  colspan="4"/> 
						<field name="note" nolabel="1" colspan="4"/>
					</form>
					<tree string="Argument List">
		                <field name="name" select="1"/>
		                <field name="value"/>
					</tree>					
				</field>
				<separator string="Description" colspan="4"/>
				<field name="note" nolabel="1" colspan="4"/>
			</form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_ddf_plugin_tree">
        <field name="name">dm.ddf.plugin.tree</field>
        <field name="model">dm.ddf.plugin</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Plugins">
                <field name="name" select="1"/>
                <field name="note"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_ddf_plugin">
        <field name="name">All Plugins</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.ddf.plugin</field>
        <field name="view_type">form</field>
        <field name="view_id" ref="view_dm_ddf_plugin_tree"/>
    </record>

    <menuitem id="menu_action_dm_ddf_plugin" parent="dm.menu_action_offer_doc" action="action_dm_ddf_plugin" sequence="3" />    

    <!--
    =======================================================
    Customer - Plugin - Value
    =======================================================
    -->

    <record model="ir.ui.view" id="view_dm_plugins_value_form">
        <field name="name">dm.plugins.value.form</field>
        <field name="model">dm.plugins.value</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="All Plugins Values">
                <field name="customer_id" select="1"/>
                <field name="plugin_id" select="2"/>
                <field name="value" select="2"/>
                <field name="date" select="2"/>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_plugins_value_tree">
        <field name="name">dm.plugins.value.tree</field>
        <field name="model">dm.plugins.value</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Plugins Values">
                <field name="customer_id" select="1"/>
                <field name="plugin_id" select="2"/>
                <field name="value" select="2"/>
                <field name="date" select="2"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_plugins_value">
        <field name="name">All Plugins Values</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.plugins.value</field>
        <field name="view_type">form</field>
        <field name="view_id" ref="view_dm_plugins_value_tree"/>
    </record>

    <menuitem id="menu_action_dm_plugins_value" parent="dm.menu_dm_config_customer" action="action_dm_plugins_value" sequence="4" />

</data>
</openerp>    