<?xml version="1.0"?>
<openerp>
<data>

    <menuitem name="Customers" id="menu_dm_config_customer" parent="dm.menu_dm_config" sequence="7"/>


    <!--
    ======================
    CUSTOMER
    ======================
    -->

    <record model="ir.ui.view" id="view_dm_customer_form">
        <field name="name">dm.customer.form</field>
        <field name="model">res.partner</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Customer">
                <group colspan="3" col="4">
                    <separator string="Customer Description" colspan="5"/>
                    <field name="name" select="1"/>
                    <field name="ref" select="1"/>
<!--                    <field name="code" select="1"/>-->
                    <field name="lang" select="2"/>
                </group>
            <notebook>
                <page string="Address">
                    <separator string="Address Infos" colspan="4"/>
                	<field colspan="4" mode="form,tree" name="address" nolabel="1" select="1">
	                    <form string="Partner contacts">
	                        <field name="name" select="2"/>
	                        <field domain="[('domain', '=', 'contact')]" name="title" string="Type"/>
	                        <field name="function"/>
	                        <field name="type" select="2"/>
	                        <field name="street" select="2"/>
	                        <field name="street2"/>
	                        <newline/>
	                        <field name="zip" select="2"/>
	                        <field name="city" select="2"/>
	                        <newline/>
	                        <field completion="1" name="country_id" select="2"/>
	                        <field name="state_id" select="2"/>
	                        <newline/>
	                        <field name="phone"/>
	                        <field name="fax"/>
	                        <newline/>
	                        <field name="mobile"/>
	                        <field name="email" select="2" widget="email"/>
	                    </form>
	                    <tree string="Partner contacts">
	                        <field name="name"/>
	                        <field name="zip"/>
	                        <field name="city"/>
	                        <field name="country_id"/>
	                    </tree>
                    </field>
                </page>
                <page string="Decoy Address">
                    <group colspan="2" col="4">
                        <separator string="Decoy Address Infos" colspan="4"/>
                        <field name="decoy_address" colspan="4" select="1"/>
                        <field name="decoy_owner" colspan="4" select="2"/>
                        <field name="decoy_external_ref" colspan="4" select="2"/>
                        <separator string="Usability" colspan="4"/>
                        <field name="decoy_for_campaign" colspan="2" select="2"/>
                        <field name="decoy_for_renting" colspan="2" select="2"/>
                    </group>
                    <group colspan="2" col="2">
                        <separator string="Decoy address for Media" colspan="4"/>
                        <field name="decoy_media_ids" nolabel="1" select="2"/>
                    </group>
                </page>
                <page string="Extra Infos">
                    <group colspan="2" col="2">
<!--                        <field name="language_id" nolabel="1" select="2"/>-->
                        <separator string="Other Languages" colspan="2"/>
                        <field name="language_ids" nolabel="1" select="2"/>
                    </group>
                    <group colspan="2" col="2">
                        <separator string="Prospect for Media" colspan="2"/>
                        <field name="prospect_media_ids" nolabel="1" select="2"/>
                        <separator string="Client for Media" colspan="2"/>
                        <field name="client_media_ids" nolabel="1" select="2"/>
                    </group>
                    <group colspan="2" col="2">
                    	<separator string="Allowed Countries" colspan="2"/>
                    	<field name="country_ids" nolabel="1" select="2"/>
                    </group>
                    <group colspan="2" col="2">
                    	<separator string="Allowed States" colspan="2"/>
                    	<field name="state_ids" nolabel="1" select="2"/>
                    </group>
                </page>
            </notebook>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_customer_tree">
        <field name="name">dm.customer.tree</field>
        <field name="model">res.partner</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Customers">
            	<field name="ref"/>
<!--                <field name="code"/>-->
                <field name="name" colspan="4"/>
                <field name="country"/>
                <field name="lang"/>
<!--                <field name="language_id"/>-->
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_customer_form">
        <field name="name">All Customers</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_dm_customer_tree"/>
    </record>
	<record model="ir.actions.act_window.view" id="dm_customer_tree_act_view0">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_dm_customer_tree"/>
        <field name="act_window_id" ref="action_dm_customer_form"/>
    </record>    
    <record model="ir.actions.act_window.view" id="dm_customer_form__act_view0">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_dm_customer_form"/>
        <field name="act_window_id" ref="action_dm_customer_form"/>
    </record>
    <menuitem id="menu_dm_customer_form" parent="dm.menu_dm_config_customer" action="action_dm_customer_form" sequence="1" />

    <!--
    =======================================================
    CUSTOMER ORDER VIEWS
    =======================================================
    -->
    
    <record model="ir.ui.view" id="view_dm_customer_order_form">
        <field name="name">dm.customer.order.form</field>
        <field name="model">dm.customer.order</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Customer Order">
                <separator string="Customer Infos" colspan="4"/>
                <field name="customer_id"/>
                <field name="name"/>
                <separator string="Campaign Infos" colspan="4"/>
                <field name="segment_id"/>
                <field name="offer_step_id"/>
                <separator string="Sale Infos" colspan="4"/>
                <field name="shop_id" on_change="onchange_shop_id(shop_id)" select="2"/>
                <field name="date_order"/>
                <field name="partner_id" on_change="onchange_partner_id(partner_id)" required="1" select="1" string="Partner"/>
                <field domain="[('partner_id','=',partner_id)]" name="partner_order_id"/>
                <field domain="[('partner_id','=',partner_id)]" name="partner_invoice_id"/>
                <field domain="[('partner_id','=',partner_id)]" name="partner_shipping_id"/>
                <field domain="[('name','=','Public Pricelist')]" name="pricelist_id"/>
                <field name="picking_policy" required="True"/>
                <field name="order_policy" on_change="shipping_policy_change(order_policy)"/>
                <field name="invoice_quantity" attrs="{'readonly':[('order_policy','=','prepaid'),('order_policy','=','picking')]}"/>
                <separator string="Note" colspan="4"/>
                <field name="note" colspan="4" nolabel="1" widget="text_wiki"/>
                <field name="state"/>
                <button string="Confirm" name="set_confirm" type="object" states="draft" colspan="2"/>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_customer_order_tree">
        <field name="name">dm.customer.order.tree</field>
        <field name="model">dm.customer.order</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Customer Orders">
                <field name="customer_id"/>
                <field name="segment_id"/>
                <field name="offer_step_id"/>
                <field name="state"/>
                <field name="note"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_customer_order_form">
        <field name="name">All Customer Orders</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.customer.order</field>
        <field name="view_type">form</field>
        <field name="view_id" ref="view_dm_customer_order_tree"/>
    </record>

    <menuitem id="menu_action_dm_customer_order_form" parent="dm.menu_dm_config_customer" action="action_dm_customer_order_form" sequence="2" />

    <!--
    =======================================================
    ORDER VIEWS
    =======================================================
    -->

    <record model="ir.ui.view" id="view_dm_order_form">
        <field name="name">dm.order.form</field>
        <field name="model">dm.order</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Order">
                <separator string="Scanned Data" colspan="4"/>
                <field name="raw_datas" colspan="4" on_change="onchange_rawdatas(raw_datas)" nolabel="1"/>
                <separator string="Customer Infos" colspan="4"/>
                <field name="customer_code" select="1"/>
                <field name="title" select="1"/>
                <field name="customer_firstname" select="1"/>
                <field name="customer_lastname" select="1"/>
                <newline/>
                <separator string="Address" colspan="4"/>
                <field name="customer_add1" select="2"/>
                <field name="customer_add2" select="2"/>
                <field name="customer_add3" select="2"/>
                <field name="customer_add4" select="2"/>
                <field name="zip" select="2"/>
                <field name="zip_summary" select="2"/>
                <field name="country" select="1"/>
                <field name="distribution_office" select="2"/>
                <separator string="Campaign Infos" colspan="4"/>
                <field name="segment_code" select="1"/>
                <field name="offer_step_code" select="1"/>
                <separator string="Status" colspan="4"/>
                <field name="state"/>
                <button string="Confirm" name="set_confirm" type="object" states="draft" colspan="2"/>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_order_tree">
        <field name="name">dm.order.tree</field>
        <field name="model">dm.order</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Orders">
                <field name="customer_code"/>
                <field name="customer_firstname"/>
                <field name="customer_lastname"/>
                <field name="country"/>
                <field name="distribution_office"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_order_form">
        <field name="name">All Orders</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.order</field>
        <field name="view_type">form</field>
        <field name="view_id" ref="view_dm_order_tree"/>
    </record>

    <menuitem id="menu_action_dm_order_form" parent="dm.menu_dm_config_customer" action="action_dm_order_form" sequence="4" />

    <!--
    =======================================================
    CUSTOMER GENDER VIEWS
    =======================================================
    -->

    <record model="ir.ui.view" id="view_dm_customer_gender_form">
        <field name="name">dm.customer.gender.form</field>
        <field name="model">dm.customer.gender</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Customer Gender">
				<field name="name" select="1"/>
				<field name="code" select="2"/>
				<field name="from_gender_id" select="1"/>
				<field name="to_gender_id" select="1"/>
				<field name="lang_id" select="2"/>
				<separator string="Description" colspan="4"/>
				<field name="description" nolabel="1" colspan="4" widget="text_wiki"/>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_customer_gender_tree">
        <field name="name">dm.customer.gender.tree</field>
        <field name="model">dm.customer.gender</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Customer Genders">
                <field name="name"/>
				<field name="code"/>
				<field name="from_gender_id"/>
				<field name="to_gender_id"/>
				<field name="lang_id"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_customer_gender_form">
        <field name="name">All Customers Genders</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.customer.gender</field>
        <field name="view_type">form</field>
        <field name="view_id" ref="view_dm_customer_gender_tree"/>
    </record>

    <menuitem id="menu_action_view_dm_customer_gender_form" parent="dm.menu_dm_config_customer" action="action_dm_customer_gender_form"/>

    <!--
    =======================================================
    SEGMENTATION VIEWS
    =======================================================
    -->

    <record model="ir.ui.view" id="view_dm_customer_segmentation_form">
        <field name="name">dm.customer.segmentation.form</field>
        <field name="model">dm.customer.segmentation</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Segmentation">
                <separator string="Segmentation Informations" colspan="4"/>
                <field name="name" select="1"/>
                <field name="code" select="1"/>
                <notebook colspan="4">
                    <page string="General">
                        <separator string="Description" colspan="4"/>
                        <field name="notes" nolabel="1" select="2" colspan="4" widget="text_wiki"/>
                    </page>
                    <page string="Customers">
                        <field name="customer_text_criteria_ids" colspan="2" nolabel="1" select="2">
                            <form string="Customer Textual Criteria">
	                            <field name="field_id"/>
	                            <field name="operator" nolabel="1"/>
	                            <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Textual Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                        <field name="customer_numeric_criteria_ids" colspan="2" nolabel="1" select="2">
                            <form string="Customer Numeric Criteria">
                                <field name="field_id"/>
                                <field name="operator" nolabel="1"/>
                                <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Numeric Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                        <field name="customer_boolean_criteria_ids" colspan="2" nolabel="1" select="2">
                            <form string="Customer Boolean Criteria">
                                <field name="field_id"/>
                                <field name="operator" nolabel="1"/>
                                <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Boolean Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                        <field name="customer_date_criteria_ids" colspan="2" nolabel="1" select="2">
                            <form string="Customer Date Criteria">
                                <field name="field_id"/>
                                <field name="operator" nolabel="1"/>
                                <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Date Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                    </page>
                    <page string="Customer Orders">
                        <field name="order_text_criteria_ids" colspan="2" nolabel="1" select="2">
                            <form string="Customer Order Textual Criteria">
	                            <field name="field_id"/>
	                            <field name="operator" nolabel="1"/>
	                            <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Order Textual Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                        <field name="order_numeric_criteria_ids" colspan="2" nolabel="1" select="2">
                            <form string="Customer Order Numeric Criteria">
                                <field name="field_id"/>
                                <field name="operator" nolabel="1"/>
                                <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Order Numeric Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                        <field name="order_boolean_criteria_ids" colspan="2" nolabel="1" select="2">
                            <form string="Customer Order Boolean Criteria">
                                <field name="field_id"/>
                                <field name="operator" nolabel="1"/>
                                <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Order Boolean Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                        <field name="order_date_criteria_ids" colspan="2" nolabel="1" select="2">
                            <form string="Customer Order Date Criteria">
                                <field name="field_id"/>
                                <field name="operator" nolabel="1"/>
                                <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Order Date Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                    </page>
                    <page string="SQL">
                        <separator string="SQL Query" colspan="4"/>
                        <field name="sql_query" nolabel="1" select="2" colspan="4"/>
                        <button string="Compute Sql Query" name="compute_sql_query" type="action"/>
                    </page>
                </notebook>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_customer_segmentation_tree">
        <field name="name">dm.customer.segmentation.tree</field>
        <field name="model">dm.customer.segmentation</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Segmentations">
                <field name="name"/>
                <field name="code"/>
                <field name="notes"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_customer_segmentation_form">
        <field name="name">All Segmentations</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.customer.segmentation</field>
        <field name="view_type">form</field>
        <field name="view_id" ref="view_dm_customer_segmentation_tree"/>
    </record>

    <menuitem id="menu_action_dm_customer_segmentation_form" parent="dm.menu_dm_config_customer" action="action_dm_customer_segmentation_form" sequence="0" />

    </data>
</openerp>
