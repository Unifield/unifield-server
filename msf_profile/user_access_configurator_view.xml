<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>

        <record id="user_access_configurator_view" model="ir.ui.view">
            <field name="name">user.access.configurator.view</field>
            <field name="model">user.access.configurator</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Import Access Rights">
                    <separator colspan="4" string="User Access File" />
                    <field name="file_to_import_uac" colspan="4" />
                    <field name="number_of_non_group_columns_uac" invisible="True" />
                    <separator colspan="4" string="Actions" />
                    <group col="4" colspan="4">
                        <button special="cancel" string="Cancel" icon="gtk-cancel" />
                        <button name="do_process_uac" string="Process User Rights" icon="terp-stock_effects-object-colorize" colspan="3" type="object" />
                    </group>
                </form>
            </field>
        </record>
        
        <act_window name="Import User Access from File"
		    res_model="user.access.configurator"
		    view_mode="form"
		    target="new"
            key2="client_action_multi"
		    id="msf_profile.action_open_user_access_wizard" />
		
		<menuitem action="msf_profile.action_open_user_access_wizard" id="menu_user_access_wizard" parent="base.menu_security" sequence="20" />
		
		<record id="user_access_results_view" model="ir.ui.view">
            <field name="name">user.access.results.view</field>
            <field name="model">user.access.results</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Import Access Rights Results">
                    <notebook colspan="4">
                    	<page string="Groups">
                    		<group col="4" colspan="4">
			                    <field name="group_ids_user_access_results" nolabel="True">
			                    	<tree hide_new_button="True" hide_delete_button="True" string="Groups" editable="top" noteditable="True" colors="red:type_user_access_results_line in ['error'];orange:type_user_access_results_line in ['warning']">
			                    		<field name="type_user_access_results_line" invisible="True" />
			                            <field name="name" />
			                        </tree>
			                    </field>
		                    </group>
	                    </page>
	                    <page string="Users">
                    		<group col="4" colspan="4">
			                    <field name="user_ids_user_access_results" nolabel="True">
			                    	<tree hide_new_button="True" hide_delete_button="True" string="Users" editable="top" noteditable="True" colors="red:type_user_access_results_line in ['error'];orange:type_user_access_results_line in ['warning']">
			                    		<field name="type_user_access_results_line" invisible="True" />
			                            <field name="name" />
			                        </tree>
			                    </field>
		                    </group>
	                    </page>
	                    <page string="Menus">
                    		<group col="4" colspan="4">
			                    <field name="menu_ids_user_access_results" nolabel="True">
			                    	<tree hide_new_button="True" hide_delete_button="True" string="Menus" editable="top" noteditable="True" colors="red:type_user_access_results_line in ['error'];orange:type_user_access_results_line in ['warning']">
			                    		<field name="type_user_access_results_line" invisible="True" />
			                            <field name="name" />
			                        </tree>
			                    </field>
		                    </group>
	                    </page>
                    </notebook>
                    <separator colspan="4" string="Actions" />
                    <group col="4" colspan="4">
                        <button special="cancel" string="Close" icon="gtk-close" />
                    </group>
                </form>
            </field>
        </record>
        
        
        <!-- MODIFICATION OF EXISTING VIEWS TO TAKE VISIBLE_RES_GROUPS INTO ACCOUNT -->
        <record id="view_workflow_transition_form" model="ir.ui.view">
		  <field name="name">workflow.transition.form</field>
		  <field name="model">workflow.transition</field>
		  <field name="type">form</field>
		  <field name="inherit_id" ref="view_workflow_transition_form" />
		  <field name="arch" type="xml">
		  	<data>
		  		<xpath expr="/form/field[@name='group_id']" position="attributes">
                    <attribute name="domain">[('visible_res_groups', '=', True)]</attribute>
                </xpath>
		  	</data>
		  </field>
		</record>

    </data>
</openerp>
