-
  I create an invoice with a total amount to 500
-
  !record {model: account.invoice, id: invoice_1}:
    account_id: account_4000
    address_contact_id: base.res_partner_address_3000
    address_invoice_id: base.res_partner_address_3000
    check_total: 500.0
    company_id: base.main_company
    currency_id: base.EUR
    journal_id: account.expenses_journal
    partner_id: base.res_partner_desertic_hispafuentes
    reference_type: none
    type: in_invoice
    analytic_distribution_id: distrib_1
    date_invoice: !eval time.strftime('%Y-01-14')
-
  Then I add an invoice line in order it takes analytic distribution from invoice
-
  !python {model: account.invoice.line}: |
    vals = {
        'account_id': ref('account_6101'),
        'name': 'Product PC1',
        'price_unit': 50.0,
        'product_id': ref('product11'),
        'quantity': 10.0,
        'uos_id': ref('product.product_uom_unit'),
        'invoice_id': ref('account_corrections.invoice_1'),
    }
    self.create(cr, uid, vals)
-
  I validate the invoice
-
  !workflow {model: account.invoice, ref: invoice_1, action: invoice_open}
